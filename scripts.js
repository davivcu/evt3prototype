function OpenSeadragon(e){return new OpenSeadragon.Viewer(e)}(function(e,i){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?i(e,!0):function(s){if(!s.document)throw new Error("jQuery requires a window with a document");return i(s)}:i(e)})("undefined"!=typeof window?window:this,function(e,i){"use strict";var s=[],u=Object.getPrototypeOf,d=s.slice,r=s.flat?function(t){return s.flat.call(t)}:function(t){return s.concat.apply([],t)},o=s.push,a=s.indexOf,p={},y=p.toString,w=p.hasOwnProperty,O=w.toString,R=O.call(Object),A={},C=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},_=function(t){return null!=t&&t===t.window},D=e.document,N={type:!0,src:!0,nonce:!0,noModule:!0};function Z(t,n,l){var c,m,x=(l=l||D).createElement("script");if(x.text=t,n)for(c in N)(m=n[c]||n.getAttribute&&n.getAttribute(c))&&x.setAttribute(c,m);l.head.appendChild(x).parentNode.removeChild(x)}function Y(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?p[y.call(t)]||"object":typeof t}var h=function(t,n){return new h.fn.init(t,n)};function ie(t){var n=!!t&&"length"in t&&t.length,l=Y(t);return!C(t)&&!_(t)&&("array"===l||0===n||"number"==typeof n&&0<n&&n-1 in t)}h.fn=h.prototype={jquery:"3.6.1",constructor:h,length:0,toArray:function(){return d.call(this)},get:function(t){return null==t?d.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var n=h.merge(this.constructor(),t);return n.prevObject=this,n},each:function(t){return h.each(this,t)},map:function(t){return this.pushStack(h.map(this,function(n,l){return t.call(n,l,n)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(h.grep(this,function(t,n){return(n+1)%2}))},odd:function(){return this.pushStack(h.grep(this,function(t,n){return n%2}))},eq:function(t){var n=this.length,l=+t+(t<0?n:0);return this.pushStack(0<=l&&l<n?[this[l]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:s.sort,splice:s.splice},h.extend=h.fn.extend=function(){var t,n,l,c,m,x,T=arguments[0]||{},F=1,H=arguments.length,M=!1;for("boolean"==typeof T&&(M=T,T=arguments[F]||{},F++),"object"==typeof T||C(T)||(T={}),F===H&&(T=this,F--);F<H;F++)if(null!=(t=arguments[F]))for(n in t)c=t[n],"__proto__"!==n&&T!==c&&(M&&c&&(h.isPlainObject(c)||(m=Array.isArray(c)))?(l=T[n],x=m&&!Array.isArray(l)?[]:m||h.isPlainObject(l)?l:{},m=!1,T[n]=h.extend(M,x,c)):void 0!==c&&(T[n]=c));return T},h.extend({expando:"jQuery"+("3.6.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var n,l;return!(!t||"[object Object]"!==y.call(t)||(n=u(t))&&("function"!=typeof(l=w.call(n,"constructor")&&n.constructor)||O.call(l)!==R))},isEmptyObject:function(t){var n;for(n in t)return!1;return!0},globalEval:function(t,n,l){Z(t,{nonce:n&&n.nonce},l)},each:function(t,n){var l,c=0;if(ie(t))for(l=t.length;c<l&&!1!==n.call(t[c],c,t[c]);c++);else for(c in t)if(!1===n.call(t[c],c,t[c]))break;return t},makeArray:function(t,n){var l=n||[];return null!=t&&(ie(Object(t))?h.merge(l,"string"==typeof t?[t]:t):o.call(l,t)),l},inArray:function(t,n,l){return null==n?-1:a.call(n,t,l)},merge:function(t,n){for(var l=+n.length,c=0,m=t.length;c<l;c++)t[m++]=n[c];return t.length=m,t},grep:function(t,n,l){for(var c=[],m=0,x=t.length,T=!l;m<x;m++)!n(t[m],m)!==T&&c.push(t[m]);return c},map:function(t,n,l){var c,m,x=0,T=[];if(ie(t))for(c=t.length;x<c;x++)null!=(m=n(t[x],x,l))&&T.push(m);else for(x in t)null!=(m=n(t[x],x,l))&&T.push(m);return r(T)},guid:1,support:A}),"function"==typeof Symbol&&(h.fn[Symbol.iterator]=s[Symbol.iterator]),h.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,n){p["[object "+n+"]"]=n.toLowerCase()});var ye=function(t){var n,l,c,m,x,T,F,H,M,q,Q,W,G,me,Se,ve,gt,Ct,$t,ot="sizzle"+1*new Date,De=t.document,Xt=0,Je=0,mt=nn(),qi=nn(),$i=nn(),ei=nn(),Oi=function(E,L){return E===L&&(Q=!0),0},Hi={}.hasOwnProperty,Yt=[],Fi=Yt.pop,ui=Yt.push,vt=Yt.push,ti=Yt.slice,ii=function(E,L){for(var B=0,K=E.length;B<K;B++)if(E[B]===L)return B;return-1},vi="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ae="[\\x20\\t\\r\\n\\f]",it="(?:\\\\[\\da-fA-F]{1,6}"+Ae+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Rt="\\["+Ae+"*("+it+")(?:"+Ae+"*([*^$|!~]?=)"+Ae+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+Ae+"*\\]",ni=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Rt+")*)|.*)\\)|)",St=new RegExp(Ae+"+","g"),ri=new RegExp("^"+Ae+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ae+"+$","g"),ki=new RegExp("^"+Ae+"*,"+Ae+"*"),en=new RegExp("^"+Ae+"*([>+~]|"+Ae+")"+Ae+"*"),Nn=new RegExp(Ae+"|>"),zn=new RegExp(ni),jn=new RegExp("^"+it+"$"),tn={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+Rt),PSEUDO:new RegExp("^"+ni),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ae+"*(even|odd|(([+-]|)(\\d*)n|)"+Ae+"*(?:([+-]|)"+Ae+"*(\\d+)|))"+Ae+"*\\)|)","i"),bool:new RegExp("^(?:"+vi+")$","i"),needsContext:new RegExp("^"+Ae+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ae+"*((?:-\\d)?\\d*)"+Ae+"*\\)|)(?=[^-]|$)","i")},Wn=/HTML$/i,Un=/^(?:input|select|textarea|button)$/i,qn=/^h\d$/i,Gi=/^[^{]+\{\s*\[native \w/,Gn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gn=/[+~]/,Ei=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ae+"?|\\\\([^\\r\\n\\f])","g"),Si=function(E,L){var B="0x"+E.slice(1)-65536;return L||(B<0?String.fromCharCode(B+65536):String.fromCharCode(B>>10|55296,1023&B|56320))},Rn=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,_n=function(E,L){return L?"\0"===E?"\ufffd":E.slice(0,-1)+"\\"+E.charCodeAt(E.length-1).toString(16)+" ":"\\"+E},Dn=function(){W()},Vn=on(function(E){return!0===E.disabled&&"fieldset"===E.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{vt.apply(Yt=ti.call(De.childNodes),De.childNodes)}catch(E){vt={apply:Yt.length?function(L,B){ui.apply(L,ti.call(B))}:function(L,B){for(var K=L.length,z=0;L[K++]=B[z++];);L.length=K-1}}}function at(E,L,B,K){var z,$,ne,le,fe,Re,Pe,Ce=L&&L.ownerDocument,Xe=L?L.nodeType:9;if(B=B||[],"string"!=typeof E||!E||1!==Xe&&9!==Xe&&11!==Xe)return B;if(!K&&(W(L),L=L||G,Se)){if(11!==Xe&&(fe=Gn.exec(E)))if(z=fe[1]){if(9===Xe){if(!(ne=L.getElementById(z)))return B;if(ne.id===z)return B.push(ne),B}else if(Ce&&(ne=Ce.getElementById(z))&&$t(L,ne)&&ne.id===z)return B.push(ne),B}else{if(fe[2])return vt.apply(B,L.getElementsByTagName(E)),B;if((z=fe[3])&&l.getElementsByClassName&&L.getElementsByClassName)return vt.apply(B,L.getElementsByClassName(z)),B}if(l.qsa&&!ei[E+" "]&&(!ve||!ve.test(E))&&(1!==Xe||"object"!==L.nodeName.toLowerCase())){if(Pe=E,Ce=L,1===Xe&&(Nn.test(E)||en.test(E))){for((Ce=gn.test(E)&&vn(L.parentNode)||L)===L&&l.scope||((le=L.getAttribute("id"))?le=le.replace(Rn,_n):L.setAttribute("id",le=ot)),$=(Re=T(E)).length;$--;)Re[$]=(le?"#"+le:":scope")+" "+rn(Re[$]);Pe=Re.join(",")}try{return vt.apply(B,Ce.querySelectorAll(Pe)),B}catch(Tt){ei(E,!0)}finally{le===ot&&L.removeAttribute("id")}}}return H(E.replace(ri,"$1"),L,B,K)}function nn(){var E=[];return function L(B,K){return E.push(B+" ")>c.cacheLength&&delete L[E.shift()],L[B+" "]=K}}function ci(E){return E[ot]=!0,E}function di(E){var L=G.createElement("fieldset");try{return!!E(L)}catch(B){return!1}finally{L.parentNode&&L.parentNode.removeChild(L),L=null}}function mn(E,L){for(var B=E.split("|"),K=B.length;K--;)c.attrHandle[B[K]]=L}function On(E,L){var B=L&&E,K=B&&1===E.nodeType&&1===L.nodeType&&E.sourceIndex-L.sourceIndex;if(K)return K;if(B)for(;B=B.nextSibling;)if(B===L)return-1;return E?1:-1}function Zn(E){return function(L){return"input"===L.nodeName.toLowerCase()&&L.type===E}}function Xn(E){return function(L){var B=L.nodeName.toLowerCase();return("input"===B||"button"===B)&&L.type===E}}function An(E){return function(L){return"form"in L?L.parentNode&&!1===L.disabled?"label"in L?"label"in L.parentNode?L.parentNode.disabled===E:L.disabled===E:L.isDisabled===E||L.isDisabled!==!E&&Vn(L)===E:L.disabled===E:"label"in L&&L.disabled===E}}function Ai(E){return ci(function(L){return L=+L,ci(function(B,K){for(var z,$=E([],B.length,L),ne=$.length;ne--;)B[z=$[ne]]&&(B[z]=!(K[z]=B[z]))})})}function vn(E){return E&&void 0!==E.getElementsByTagName&&E}for(n in l=at.support={},x=at.isXML=function(E){var B=E&&(E.ownerDocument||E).documentElement;return!Wn.test(E&&E.namespaceURI||B&&B.nodeName||"HTML")},W=at.setDocument=function(E){var L,B,K=E?E.ownerDocument||E:De;return K!=G&&9===K.nodeType&&K.documentElement&&(me=(G=K).documentElement,Se=!x(G),De!=G&&(B=G.defaultView)&&B.top!==B&&(B.addEventListener?B.addEventListener("unload",Dn,!1):B.attachEvent&&B.attachEvent("onunload",Dn)),l.scope=di(function(z){return me.appendChild(z).appendChild(G.createElement("div")),void 0!==z.querySelectorAll&&!z.querySelectorAll(":scope fieldset div").length}),l.attributes=di(function(z){return z.className="i",!z.getAttribute("className")}),l.getElementsByTagName=di(function(z){return z.appendChild(G.createComment("")),!z.getElementsByTagName("*").length}),l.getElementsByClassName=Gi.test(G.getElementsByClassName),l.getById=di(function(z){return me.appendChild(z).id=ot,!G.getElementsByName||!G.getElementsByName(ot).length}),l.getById?(c.filter.ID=function(z){var $=z.replace(Ei,Si);return function(ne){return ne.getAttribute("id")===$}},c.find.ID=function(z,$){if(void 0!==$.getElementById&&Se){var ne=$.getElementById(z);return ne?[ne]:[]}}):(c.filter.ID=function(z){var $=z.replace(Ei,Si);return function(ne){var le=void 0!==ne.getAttributeNode&&ne.getAttributeNode("id");return le&&le.value===$}},c.find.ID=function(z,$){if(void 0!==$.getElementById&&Se){var ne,le,fe,Re=$.getElementById(z);if(Re){if((ne=Re.getAttributeNode("id"))&&ne.value===z)return[Re];for(fe=$.getElementsByName(z),le=0;Re=fe[le++];)if((ne=Re.getAttributeNode("id"))&&ne.value===z)return[Re]}return[]}}),c.find.TAG=l.getElementsByTagName?function(z,$){return void 0!==$.getElementsByTagName?$.getElementsByTagName(z):l.qsa?$.querySelectorAll(z):void 0}:function(z,$){var ne,le=[],fe=0,Re=$.getElementsByTagName(z);if("*"===z){for(;ne=Re[fe++];)1===ne.nodeType&&le.push(ne);return le}return Re},c.find.CLASS=l.getElementsByClassName&&function(z,$){if(void 0!==$.getElementsByClassName&&Se)return $.getElementsByClassName(z)},gt=[],ve=[],(l.qsa=Gi.test(G.querySelectorAll))&&(di(function(z){var $;me.appendChild(z).innerHTML="<a id='"+ot+"'></a><select id='"+ot+"-\r\\' msallowcapture=''><option selected=''></option></select>",z.querySelectorAll("[msallowcapture^='']").length&&ve.push("[*^$]="+Ae+"*(?:''|\"\")"),z.querySelectorAll("[selected]").length||ve.push("\\["+Ae+"*(?:value|"+vi+")"),z.querySelectorAll("[id~="+ot+"-]").length||ve.push("~="),($=G.createElement("input")).setAttribute("name",""),z.appendChild($),z.querySelectorAll("[name='']").length||ve.push("\\["+Ae+"*name"+Ae+"*="+Ae+"*(?:''|\"\")"),z.querySelectorAll(":checked").length||ve.push(":checked"),z.querySelectorAll("a#"+ot+"+*").length||ve.push(".#.+[+~]"),z.querySelectorAll("\\\f"),ve.push("[\\r\\n\\f]")}),di(function(z){z.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var $=G.createElement("input");$.setAttribute("type","hidden"),z.appendChild($).setAttribute("name","D"),z.querySelectorAll("[name=d]").length&&ve.push("name"+Ae+"*[*^$|!~]?="),2!==z.querySelectorAll(":enabled").length&&ve.push(":enabled",":disabled"),me.appendChild(z).disabled=!0,2!==z.querySelectorAll(":disabled").length&&ve.push(":enabled",":disabled"),z.querySelectorAll("*,:x"),ve.push(",.*:")})),(l.matchesSelector=Gi.test(Ct=me.matches||me.webkitMatchesSelector||me.mozMatchesSelector||me.oMatchesSelector||me.msMatchesSelector))&&di(function(z){l.disconnectedMatch=Ct.call(z,"*"),Ct.call(z,"[s!='']:x"),gt.push("!=",ni)}),ve=ve.length&&new RegExp(ve.join("|")),gt=gt.length&&new RegExp(gt.join("|")),L=Gi.test(me.compareDocumentPosition),$t=L||Gi.test(me.contains)?function(z,$){var ne=9===z.nodeType?z.documentElement:z,le=$&&$.parentNode;return z===le||!(!le||1!==le.nodeType||!(ne.contains?ne.contains(le):z.compareDocumentPosition&&16&z.compareDocumentPosition(le)))}:function(z,$){if($)for(;$=$.parentNode;)if($===z)return!0;return!1},Oi=L?function(z,$){if(z===$)return Q=!0,0;var ne=!z.compareDocumentPosition-!$.compareDocumentPosition;return ne||(1&(ne=(z.ownerDocument||z)==($.ownerDocument||$)?z.compareDocumentPosition($):1)||!l.sortDetached&&$.compareDocumentPosition(z)===ne?z==G||z.ownerDocument==De&&$t(De,z)?-1:$==G||$.ownerDocument==De&&$t(De,$)?1:q?ii(q,z)-ii(q,$):0:4&ne?-1:1)}:function(z,$){if(z===$)return Q=!0,0;var ne,le=0,fe=z.parentNode,Re=$.parentNode,Pe=[z],Ce=[$];if(!fe||!Re)return z==G?-1:$==G?1:fe?-1:Re?1:q?ii(q,z)-ii(q,$):0;if(fe===Re)return On(z,$);for(ne=z;ne=ne.parentNode;)Pe.unshift(ne);for(ne=$;ne=ne.parentNode;)Ce.unshift(ne);for(;Pe[le]===Ce[le];)le++;return le?On(Pe[le],Ce[le]):Pe[le]==De?-1:Ce[le]==De?1:0}),G},at.matches=function(E,L){return at(E,null,null,L)},at.matchesSelector=function(E,L){if(W(E),l.matchesSelector&&Se&&!ei[L+" "]&&(!gt||!gt.test(L))&&(!ve||!ve.test(L)))try{var B=Ct.call(E,L);if(B||l.disconnectedMatch||E.document&&11!==E.document.nodeType)return B}catch(K){ei(L,!0)}return 0<at(L,G,null,[E]).length},at.contains=function(E,L){return(E.ownerDocument||E)!=G&&W(E),$t(E,L)},at.attr=function(E,L){(E.ownerDocument||E)!=G&&W(E);var B=c.attrHandle[L.toLowerCase()],K=B&&Hi.call(c.attrHandle,L.toLowerCase())?B(E,L,!Se):void 0;return void 0!==K?K:l.attributes||!Se?E.getAttribute(L):(K=E.getAttributeNode(L))&&K.specified?K.value:null},at.escape=function(E){return(E+"").replace(Rn,_n)},at.error=function(E){throw new Error("Syntax error, unrecognized expression: "+E)},at.uniqueSort=function(E){var L,B=[],K=0,z=0;if(Q=!l.detectDuplicates,q=!l.sortStable&&E.slice(0),E.sort(Oi),Q){for(;L=E[z++];)L===E[z]&&(K=B.push(z));for(;K--;)E.splice(B[K],1)}return q=null,E},m=at.getText=function(E){var L,B="",K=0,z=E.nodeType;if(z){if(1===z||9===z||11===z){if("string"==typeof E.textContent)return E.textContent;for(E=E.firstChild;E;E=E.nextSibling)B+=m(E)}else if(3===z||4===z)return E.nodeValue}else for(;L=E[K++];)B+=m(L);return B},(c=at.selectors={cacheLength:50,createPseudo:ci,match:tn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(E){return E[1]=E[1].replace(Ei,Si),E[3]=(E[3]||E[4]||E[5]||"").replace(Ei,Si),"~="===E[2]&&(E[3]=" "+E[3]+" "),E.slice(0,4)},CHILD:function(E){return E[1]=E[1].toLowerCase(),"nth"===E[1].slice(0,3)?(E[3]||at.error(E[0]),E[4]=+(E[4]?E[5]+(E[6]||1):2*("even"===E[3]||"odd"===E[3])),E[5]=+(E[7]+E[8]||"odd"===E[3])):E[3]&&at.error(E[0]),E},PSEUDO:function(E){var L,B=!E[6]&&E[2];return tn.CHILD.test(E[0])?null:(E[3]?E[2]=E[4]||E[5]||"":B&&zn.test(B)&&(L=T(B,!0))&&(L=B.indexOf(")",B.length-L)-B.length)&&(E[0]=E[0].slice(0,L),E[2]=B.slice(0,L)),E.slice(0,3))}},filter:{TAG:function(E){var L=E.replace(Ei,Si).toLowerCase();return"*"===E?function(){return!0}:function(B){return B.nodeName&&B.nodeName.toLowerCase()===L}},CLASS:function(E){var L=mt[E+" "];return L||(L=new RegExp("(^|"+Ae+")"+E+"("+Ae+"|$)"))&&mt(E,function(B){return L.test("string"==typeof B.className&&B.className||void 0!==B.getAttribute&&B.getAttribute("class")||"")})},ATTR:function(E,L,B){return function(K){var z=at.attr(K,E);return null==z?"!="===L:!L||(z+="","="===L?z===B:"!="===L?z!==B:"^="===L?B&&0===z.indexOf(B):"*="===L?B&&-1<z.indexOf(B):"$="===L?B&&z.slice(-B.length)===B:"~="===L?-1<(" "+z.replace(St," ")+" ").indexOf(B):"|="===L&&(z===B||z.slice(0,B.length+1)===B+"-"))}},CHILD:function(E,L,B,K,z){var $="nth"!==E.slice(0,3),ne="last"!==E.slice(-4),le="of-type"===L;return 1===K&&0===z?function(fe){return!!fe.parentNode}:function(fe,Re,Pe){var Ce,Xe,Tt,ke,_t,At,qt=$!==ne?"nextSibling":"previousSibling",lt=fe.parentNode,yi=le&&fe.nodeName.toLowerCase(),zt=!Pe&&!le,bt=!1;if(lt){if($){for(;qt;){for(ke=fe;ke=ke[qt];)if(le?ke.nodeName.toLowerCase()===yi:1===ke.nodeType)return!1;At=qt="only"===E&&!At&&"nextSibling"}return!0}if(At=[ne?lt.firstChild:lt.lastChild],ne&&zt){for(bt=(_t=(Ce=(Xe=(Tt=(ke=lt)[ot]||(ke[ot]={}))[ke.uniqueID]||(Tt[ke.uniqueID]={}))[E]||[])[0]===Xt&&Ce[1])&&Ce[2],ke=_t&&lt.childNodes[_t];ke=++_t&&ke&&ke[qt]||(bt=_t=0)||At.pop();)if(1===ke.nodeType&&++bt&&ke===fe){Xe[E]=[Xt,_t,bt];break}}else if(zt&&(bt=_t=(Ce=(Xe=(Tt=(ke=fe)[ot]||(ke[ot]={}))[ke.uniqueID]||(Tt[ke.uniqueID]={}))[E]||[])[0]===Xt&&Ce[1]),!1===bt)for(;(ke=++_t&&ke&&ke[qt]||(bt=_t=0)||At.pop())&&((le?ke.nodeName.toLowerCase()!==yi:1!==ke.nodeType)||!++bt||(zt&&((Xe=(Tt=ke[ot]||(ke[ot]={}))[ke.uniqueID]||(Tt[ke.uniqueID]={}))[E]=[Xt,bt]),ke!==fe)););return(bt-=z)===K||bt%K==0&&0<=bt/K}}},PSEUDO:function(E,L){var B,K=c.pseudos[E]||c.setFilters[E.toLowerCase()]||at.error("unsupported pseudo: "+E);return K[ot]?K(L):1<K.length?(B=[E,E,"",L],c.setFilters.hasOwnProperty(E.toLowerCase())?ci(function(z,$){for(var ne,le=K(z,L),fe=le.length;fe--;)z[ne=ii(z,le[fe])]=!($[ne]=le[fe])}):function(z){return K(z,0,B)}):K}},pseudos:{not:ci(function(E){var L=[],B=[],K=F(E.replace(ri,"$1"));return K[ot]?ci(function(z,$,ne,le){for(var fe,Re=K(z,null,le,[]),Pe=z.length;Pe--;)(fe=Re[Pe])&&(z[Pe]=!($[Pe]=fe))}):function(z,$,ne){return L[0]=z,K(L,null,ne,B),L[0]=null,!B.pop()}}),has:ci(function(E){return function(L){return 0<at(E,L).length}}),contains:ci(function(E){return E=E.replace(Ei,Si),function(L){return-1<(L.textContent||m(L)).indexOf(E)}}),lang:ci(function(E){return jn.test(E||"")||at.error("unsupported lang: "+E),E=E.replace(Ei,Si).toLowerCase(),function(L){var B;do{if(B=Se?L.lang:L.getAttribute("xml:lang")||L.getAttribute("lang"))return(B=B.toLowerCase())===E||0===B.indexOf(E+"-")}while((L=L.parentNode)&&1===L.nodeType);return!1}}),target:function(E){var L=t.location&&t.location.hash;return L&&L.slice(1)===E.id},root:function(E){return E===me},focus:function(E){return E===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(E.type||E.href||~E.tabIndex)},enabled:An(!1),disabled:An(!0),checked:function(E){var L=E.nodeName.toLowerCase();return"input"===L&&!!E.checked||"option"===L&&!!E.selected},selected:function(E){return!0===E.selected},empty:function(E){for(E=E.firstChild;E;E=E.nextSibling)if(E.nodeType<6)return!1;return!0},parent:function(E){return!c.pseudos.empty(E)},header:function(E){return qn.test(E.nodeName)},input:function(E){return Un.test(E.nodeName)},button:function(E){var L=E.nodeName.toLowerCase();return"input"===L&&"button"===E.type||"button"===L},text:function(E){var L;return"input"===E.nodeName.toLowerCase()&&"text"===E.type&&(null==(L=E.getAttribute("type"))||"text"===L.toLowerCase())},first:Ai(function(){return[0]}),last:Ai(function(E,L){return[L-1]}),eq:Ai(function(E,L,B){return[B<0?B+L:B]}),even:Ai(function(E,L){for(var B=0;B<L;B+=2)E.push(B);return E}),odd:Ai(function(E,L){for(var B=1;B<L;B+=2)E.push(B);return E}),lt:Ai(function(E,L,B){for(var K=B<0?B+L:L<B?L:B;0<=--K;)E.push(K);return E}),gt:Ai(function(E,L,B){for(var K=B<0?B+L:B;++K<L;)E.push(K);return E})}}).pseudos.nth=c.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})c.pseudos[n]=Zn(n);for(n in{submit:!0,reset:!0})c.pseudos[n]=Xn(n);function Ln(){}function rn(E){for(var L=0,B=E.length,K="";L<B;L++)K+=E[L].value;return K}function on(E,L,B){var K=L.dir,z=L.next,$=z||K,ne=B&&"parentNode"===$,le=Je++;return L.first?function(fe,Re,Pe){for(;fe=fe[K];)if(1===fe.nodeType||ne)return E(fe,Re,Pe);return!1}:function(fe,Re,Pe){var Ce,Xe,Tt,ke=[Xt,le];if(Pe){for(;fe=fe[K];)if((1===fe.nodeType||ne)&&E(fe,Re,Pe))return!0}else for(;fe=fe[K];)if(1===fe.nodeType||ne)if(Xe=(Tt=fe[ot]||(fe[ot]={}))[fe.uniqueID]||(Tt[fe.uniqueID]={}),z&&z===fe.nodeName.toLowerCase())fe=fe[K]||fe;else{if((Ce=Xe[$])&&Ce[0]===Xt&&Ce[1]===le)return ke[2]=Ce[2];if((Xe[$]=ke)[2]=E(fe,Re,Pe))return!0}return!1}}function yn(E){return 1<E.length?function(L,B,K){for(var z=E.length;z--;)if(!E[z](L,B,K))return!1;return!0}:E[0]}function sn(E,L,B,K,z){for(var $,ne=[],le=0,fe=E.length,Re=null!=L;le<fe;le++)($=E[le])&&(B&&!B($,K,z)||(ne.push($),Re&&L.push(le)));return ne}function wn(E,L,B,K,z,$){return K&&!K[ot]&&(K=wn(K)),z&&!z[ot]&&(z=wn(z,$)),ci(function(ne,le,fe,Re){var Pe,Ce,Xe,Tt=[],ke=[],_t=le.length,At=ne||function(yi,zt,bt){for(var fi=0,an=zt.length;fi<an;fi++)at(yi,zt[fi],bt);return bt}(L||"*",fe.nodeType?[fe]:fe,[]),qt=!E||!ne&&L?At:sn(At,Tt,E,fe,Re),lt=B?z||(ne?E:_t||K)?[]:le:qt;if(B&&B(qt,lt,fe,Re),K)for(Pe=sn(lt,ke),K(Pe,[],fe,Re),Ce=Pe.length;Ce--;)(Xe=Pe[Ce])&&(lt[ke[Ce]]=!(qt[ke[Ce]]=Xe));if(ne){if(z||E){if(z){for(Pe=[],Ce=lt.length;Ce--;)(Xe=lt[Ce])&&Pe.push(qt[Ce]=Xe);z(null,lt=[],Pe,Re)}for(Ce=lt.length;Ce--;)(Xe=lt[Ce])&&-1<(Pe=z?ii(ne,Xe):Tt[Ce])&&(ne[Pe]=!(le[Pe]=Xe))}}else lt=sn(lt===le?lt.splice(_t,lt.length):lt),z?z(null,le,lt,Re):vt.apply(le,lt)})}function xn(E){for(var L,B,K,z=E.length,$=c.relative[E[0].type],ne=$||c.relative[" "],le=$?1:0,fe=on(function(Ce){return Ce===L},ne,!0),Re=on(function(Ce){return-1<ii(L,Ce)},ne,!0),Pe=[function(Ce,Xe,Tt){var ke=!$&&(Tt||Xe!==M)||((L=Xe).nodeType?fe(Ce,Xe,Tt):Re(Ce,Xe,Tt));return L=null,ke}];le<z;le++)if(B=c.relative[E[le].type])Pe=[on(yn(Pe),B)];else{if((B=c.filter[E[le].type].apply(null,E[le].matches))[ot]){for(K=++le;K<z&&!c.relative[E[K].type];K++);return wn(1<le&&yn(Pe),1<le&&rn(E.slice(0,le-1).concat({value:" "===E[le-2].type?"*":""})).replace(ri,"$1"),B,le<K&&xn(E.slice(le,K)),K<z&&xn(E=E.slice(K)),K<z&&rn(E))}Pe.push(B)}return yn(Pe)}return Ln.prototype=c.filters=c.pseudos,c.setFilters=new Ln,T=at.tokenize=function(E,L){var B,K,z,$,ne,le,fe,Re=qi[E+" "];if(Re)return L?0:Re.slice(0);for(ne=E,le=[],fe=c.preFilter;ne;){for($ in B&&!(K=ki.exec(ne))||(K&&(ne=ne.slice(K[0].length)||ne),le.push(z=[])),B=!1,(K=en.exec(ne))&&(B=K.shift(),z.push({value:B,type:K[0].replace(ri," ")}),ne=ne.slice(B.length)),c.filter)!(K=tn[$].exec(ne))||fe[$]&&!(K=fe[$](K))||(B=K.shift(),z.push({value:B,type:$,matches:K}),ne=ne.slice(B.length));if(!B)break}return L?ne.length:ne?at.error(E):qi(E,le).slice(0)},F=at.compile=function(E,L){var B,K,z,$,ne,le,fe=[],Re=[],Pe=$i[E+" "];if(!Pe){for(L||(L=T(E)),B=L.length;B--;)(Pe=xn(L[B]))[ot]?fe.push(Pe):Re.push(Pe);(Pe=$i(E,(K=Re,$=0<(z=fe).length,ne=0<K.length,le=function(Ce,Xe,Tt,ke,_t){var At,qt,lt,yi=0,zt="0",bt=Ce&&[],fi=[],an=M,Hn=Ce||ne&&c.find.TAG("*",_t),Fn=Xt+=null==an?1:Math.random()||.1,Yn=Hn.length;for(_t&&(M=Xe==G||Xe||_t);zt!==Yn&&null!=(At=Hn[zt]);zt++){if(ne&&At){for(qt=0,Xe||At.ownerDocument==G||(W(At),Tt=!Se);lt=K[qt++];)if(lt(At,Xe||G,Tt)){ke.push(At);break}_t&&(Xt=Fn)}$&&((At=!lt&&At)&&yi--,Ce&&bt.push(At))}if(yi+=zt,$&&zt!==yi){for(qt=0;lt=z[qt++];)lt(bt,fi,Xe,Tt);if(Ce){if(0<yi)for(;zt--;)bt[zt]||fi[zt]||(fi[zt]=Fi.call(ke));fi=sn(fi)}vt.apply(ke,fi),_t&&!Ce&&0<fi.length&&1<yi+z.length&&at.uniqueSort(ke)}return _t&&(Xt=Fn,M=an),bt},$?ci(le):le))).selector=E}return Pe},H=at.select=function(E,L,B,K){var z,$,ne,le,fe,Re="function"==typeof E&&E,Pe=!K&&T(E=Re.selector||E);if(B=B||[],1===Pe.length){if(2<($=Pe[0]=Pe[0].slice(0)).length&&"ID"===(ne=$[0]).type&&9===L.nodeType&&Se&&c.relative[$[1].type]){if(!(L=(c.find.ID(ne.matches[0].replace(Ei,Si),L)||[])[0]))return B;Re&&(L=L.parentNode),E=E.slice($.shift().value.length)}for(z=tn.needsContext.test(E)?0:$.length;z--&&!c.relative[le=(ne=$[z]).type];)if((fe=c.find[le])&&(K=fe(ne.matches[0].replace(Ei,Si),gn.test($[0].type)&&vn(L.parentNode)||L))){if($.splice(z,1),!(E=K.length&&rn($)))return vt.apply(B,K),B;break}}return(Re||F(E,Pe))(K,L,!Se,B,!L||gn.test(E)&&vn(L.parentNode)||L),B},l.sortStable=ot.split("").sort(Oi).join("")===ot,l.detectDuplicates=!!Q,W(),l.sortDetached=di(function(E){return 1&E.compareDocumentPosition(G.createElement("fieldset"))}),di(function(E){return E.innerHTML="<a href='#'></a>","#"===E.firstChild.getAttribute("href")})||mn("type|href|height|width",function(E,L,B){if(!B)return E.getAttribute(L,"type"===L.toLowerCase()?1:2)}),l.attributes&&di(function(E){return E.innerHTML="<input/>",E.firstChild.setAttribute("value",""),""===E.firstChild.getAttribute("value")})||mn("value",function(E,L,B){if(!B&&"input"===E.nodeName.toLowerCase())return E.defaultValue}),di(function(E){return null==E.getAttribute("disabled")})||mn(vi,function(E,L,B){var K;if(!B)return!0===E[L]?L.toLowerCase():(K=E.getAttributeNode(L))&&K.specified?K.value:null}),at}(e);h.find=ye,h.expr=ye.selectors,h.expr[":"]=h.expr.pseudos,h.uniqueSort=h.unique=ye.uniqueSort,h.text=ye.getText,h.isXMLDoc=ye.isXML,h.contains=ye.contains,h.escapeSelector=ye.escape;var Oe=function(t,n,l){for(var c=[],m=void 0!==l;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(m&&h(t).is(l))break;c.push(t)}return c},_e=function(t,n){for(var l=[];t;t=t.nextSibling)1===t.nodeType&&t!==n&&l.push(t);return l},Ue=h.expr.match.needsContext;function qe(t,n){return t.nodeName&&t.nodeName.toLowerCase()===n.toLowerCase()}var nt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Bt(t,n,l){return C(n)?h.grep(t,function(c,m){return!!n.call(c,m,c)!==l}):n.nodeType?h.grep(t,function(c){return c===n!==l}):"string"!=typeof n?h.grep(t,function(c){return-1<a.call(n,c)!==l}):h.filter(n,t,l)}h.filter=function(t,n,l){var c=n[0];return l&&(t=":not("+t+")"),1===n.length&&1===c.nodeType?h.find.matchesSelector(c,t)?[c]:[]:h.find.matches(t,h.grep(n,function(m){return 1===m.nodeType}))},h.fn.extend({find:function(t){var n,l,c=this.length,m=this;if("string"!=typeof t)return this.pushStack(h(t).filter(function(){for(n=0;n<c;n++)if(h.contains(m[n],this))return!0}));for(l=this.pushStack([]),n=0;n<c;n++)h.find(t,m[n],l);return 1<c?h.uniqueSort(l):l},filter:function(t){return this.pushStack(Bt(this,t||[],!1))},not:function(t){return this.pushStack(Bt(this,t||[],!0))},is:function(t){return!!Bt(this,"string"==typeof t&&Ue.test(t)?h(t):t||[],!1).length}});var ft,Ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(h.fn.init=function(t,n,l){var c,m;if(!t)return this;if(l=l||ft,"string"==typeof t){if(!(c="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:Ve.exec(t))||!c[1]&&n)return!n||n.jquery?(n||l).find(t):this.constructor(n).find(t);if(c[1]){if(h.merge(this,h.parseHTML(c[1],(n=n instanceof h?n[0]:n)&&n.nodeType?n.ownerDocument||n:D,!0)),nt.test(c[1])&&h.isPlainObject(n))for(c in n)C(this[c])?this[c](n[c]):this.attr(c,n[c]);return this}return(m=D.getElementById(c[2]))&&(this[0]=m,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):C(t)?void 0!==l.ready?l.ready(t):t(h):h.makeArray(t,this)}).prototype=h.fn,ft=h(D);var ut=/^(?:parents|prev(?:Until|All))/,Dt={children:!0,contents:!0,next:!0,prev:!0};function xe(t,n){for(;(t=t[n])&&1!==t.nodeType;);return t}h.fn.extend({has:function(t){var n=h(t,this),l=n.length;return this.filter(function(){for(var c=0;c<l;c++)if(h.contains(this,n[c]))return!0})},closest:function(t,n){var l,c=0,m=this.length,x=[],T="string"!=typeof t&&h(t);if(!Ue.test(t))for(;c<m;c++)for(l=this[c];l&&l!==n;l=l.parentNode)if(l.nodeType<11&&(T?-1<T.index(l):1===l.nodeType&&h.find.matchesSelector(l,t))){x.push(l);break}return this.pushStack(1<x.length?h.uniqueSort(x):x)},index:function(t){return t?"string"==typeof t?a.call(h(t),this[0]):a.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,n){return this.pushStack(h.uniqueSort(h.merge(this.get(),h(t,n))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),h.each({parent:function(t){var n=t.parentNode;return n&&11!==n.nodeType?n:null},parents:function(t){return Oe(t,"parentNode")},parentsUntil:function(t,n,l){return Oe(t,"parentNode",l)},next:function(t){return xe(t,"nextSibling")},prev:function(t){return xe(t,"previousSibling")},nextAll:function(t){return Oe(t,"nextSibling")},prevAll:function(t){return Oe(t,"previousSibling")},nextUntil:function(t,n,l){return Oe(t,"nextSibling",l)},prevUntil:function(t,n,l){return Oe(t,"previousSibling",l)},siblings:function(t){return _e((t.parentNode||{}).firstChild,t)},children:function(t){return _e(t.firstChild)},contents:function(t){return null!=t.contentDocument&&u(t.contentDocument)?t.contentDocument:(qe(t,"template")&&(t=t.content||t),h.merge([],t.childNodes))}},function(t,n){h.fn[t]=function(l,c){var m=h.map(this,n,l);return"Until"!==t.slice(-5)&&(c=l),c&&"string"==typeof c&&(m=h.filter(c,m)),1<this.length&&(Dt[t]||h.uniqueSort(m),ut.test(t)&&m.reverse()),this.pushStack(m)}});var rt=/[^\x20\t\r\n\f]+/g;function jt(t){return t}function Pt(t){throw t}function Lt(t,n,l,c){var m;try{t&&C(m=t.promise)?m.call(t).done(n).fail(l):t&&C(m=t.then)?m.call(t,n,l):n.apply(void 0,[t].slice(c))}catch(x){l.apply(void 0,[x])}}h.Callbacks=function(t){var l;t="string"==typeof t?(l={},h.each(t.match(rt)||[],function(W,G){l[G]=!0}),l):h.extend({},t);var c,m,x,T,F=[],H=[],M=-1,q=function(){for(T=T||t.once,x=c=!0;H.length;M=-1)for(m=H.shift();++M<F.length;)!1===F[M].apply(m[0],m[1])&&t.stopOnFalse&&(M=F.length,m=!1);t.memory||(m=!1),c=!1,T&&(F=m?[]:"")},Q={add:function(){return F&&(m&&!c&&(M=F.length-1,H.push(m)),function W(G){h.each(G,function(me,Se){C(Se)?t.unique&&Q.has(Se)||F.push(Se):Se&&Se.length&&"string"!==Y(Se)&&W(Se)})}(arguments),m&&!c&&q()),this},remove:function(){return h.each(arguments,function(W,G){for(var me;-1<(me=h.inArray(G,F,me));)F.splice(me,1),me<=M&&M--}),this},has:function(W){return W?-1<h.inArray(W,F):0<F.length},empty:function(){return F&&(F=[]),this},disable:function(){return T=H=[],F=m="",this},disabled:function(){return!F},lock:function(){return T=H=[],m||c||(F=m=""),this},locked:function(){return!!T},fireWith:function(W,G){return T||(G=[W,(G=G||[]).slice?G.slice():G],H.push(G),c||q()),this},fire:function(){return Q.fireWith(this,arguments),this},fired:function(){return!!x}};return Q},h.extend({Deferred:function(t){var n=[["notify","progress",h.Callbacks("memory"),h.Callbacks("memory"),2],["resolve","done",h.Callbacks("once memory"),h.Callbacks("once memory"),0,"resolved"],["reject","fail",h.Callbacks("once memory"),h.Callbacks("once memory"),1,"rejected"]],l="pending",c={state:function(){return l},always:function(){return m.done(arguments).fail(arguments),this},catch:function(x){return c.then(null,x)},pipe:function(){var x=arguments;return h.Deferred(function(T){h.each(n,function(F,H){var M=C(x[H[4]])&&x[H[4]];m[H[1]](function(){var q=M&&M.apply(this,arguments);q&&C(q.promise)?q.promise().progress(T.notify).done(T.resolve).fail(T.reject):T[H[0]+"With"](this,M?[q]:arguments)})}),x=null}).promise()},then:function(x,T,F){var H=0;function M(q,Q,W,G){return function(){var me=this,Se=arguments,ve=function(){var Ct,$t;if(!(q<H)){if((Ct=W.apply(me,Se))===Q.promise())throw new TypeError("Thenable self-resolution");C($t=Ct&&("object"==typeof Ct||"function"==typeof Ct)&&Ct.then)?G?$t.call(Ct,M(H,Q,jt,G),M(H,Q,Pt,G)):(H++,$t.call(Ct,M(H,Q,jt,G),M(H,Q,Pt,G),M(H,Q,jt,Q.notifyWith))):(W!==jt&&(me=void 0,Se=[Ct]),(G||Q.resolveWith)(me,Se))}},gt=G?ve:function(){try{ve()}catch(Ct){h.Deferred.exceptionHook&&h.Deferred.exceptionHook(Ct,gt.stackTrace),H<=q+1&&(W!==Pt&&(me=void 0,Se=[Ct]),Q.rejectWith(me,Se))}};q?gt():(h.Deferred.getStackHook&&(gt.stackTrace=h.Deferred.getStackHook()),e.setTimeout(gt))}}return h.Deferred(function(q){n[0][3].add(M(0,q,C(F)?F:jt,q.notifyWith)),n[1][3].add(M(0,q,C(x)?x:jt)),n[2][3].add(M(0,q,C(T)?T:Pt))}).promise()},promise:function(x){return null!=x?h.extend(x,c):c}},m={};return h.each(n,function(x,T){var F=T[2],H=T[5];c[T[1]]=F.add,H&&F.add(function(){l=H},n[3-x][2].disable,n[3-x][3].disable,n[0][2].lock,n[0][3].lock),F.add(T[3].fire),m[T[0]]=function(){return m[T[0]+"With"](this===m?void 0:this,arguments),this},m[T[0]+"With"]=F.fireWith}),c.promise(m),t&&t.call(m,m),m},when:function(t){var n=arguments.length,l=n,c=Array(l),m=d.call(arguments),x=h.Deferred(),T=function(F){return function(H){c[F]=this,m[F]=1<arguments.length?d.call(arguments):H,--n||x.resolveWith(c,m)}};if(n<=1&&(Lt(t,x.done(T(l)).resolve,x.reject,!n),"pending"===x.state()||C(m[l]&&m[l].then)))return x.then();for(;l--;)Lt(m[l],T(l),x.reject);return x.promise()}});var yt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;h.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&yt.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},h.readyException=function(t){e.setTimeout(function(){throw t})};var Mt=h.Deferred();function Ht(){D.removeEventListener("DOMContentLoaded",Ht),e.removeEventListener("load",Ht),h.ready()}h.fn.ready=function(t){return Mt.then(t).catch(function(n){h.readyException(n)}),this},h.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--h.readyWait:h.isReady)||(h.isReady=!0)!==t&&0<--h.readyWait||Mt.resolveWith(D,[h])}}),h.ready.then=Mt.then,"complete"===D.readyState||"loading"!==D.readyState&&!D.documentElement.doScroll?e.setTimeout(h.ready):(D.addEventListener("DOMContentLoaded",Ht),e.addEventListener("load",Ht));var Et=function(t,n,l,c,m,x,T){var F=0,H=t.length,M=null==l;if("object"===Y(l))for(F in m=!0,l)Et(t,n,F,l[F],!0,x,T);else if(void 0!==c&&(m=!0,C(c)||(T=!0),M&&(T?(n.call(t,c),n=null):(M=n,n=function(q,Q,W){return M.call(h(q),W)})),n))for(;F<H;F++)n(t[F],l,T?c:c.call(t[F],F,n(t[F],l)));return m?t:M?n.call(t):H?n(t[0],l):x},oi=/^-ms-/,Ft=/-([a-z])/g;function si(t,n){return n.toUpperCase()}function wt(t){return t.replace(oi,"ms-").replace(Ft,si)}var ai=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function f(){this.expando=h.expando+f.uid++}f.uid=1,f.prototype={cache:function(t){var n=t[this.expando];return n||(n={},ai(t)&&(t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,configurable:!0}))),n},set:function(t,n,l){var c,m=this.cache(t);if("string"==typeof n)m[wt(n)]=l;else for(c in n)m[wt(c)]=n[c];return m},get:function(t,n){return void 0===n?this.cache(t):t[this.expando]&&t[this.expando][wt(n)]},access:function(t,n,l){return void 0===n||n&&"string"==typeof n&&void 0===l?this.get(t,n):(this.set(t,n,l),void 0!==l?l:n)},remove:function(t,n){var l,c=t[this.expando];if(void 0!==c){if(void 0!==n)for((l=(n=Array.isArray(n)?n.map(wt):(n=wt(n))in c?[n]:n.match(rt)||[]).length);l--;)delete c[n[l]];(void 0===n||h.isEmptyObject(c))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var n=t[this.expando];return void 0!==n&&!h.isEmptyObject(n)}};var b=new f,U=new f,te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,oe=/[A-Z]/g;function ue(t,n,l){var c,m;if(void 0===l&&1===t.nodeType)if(c="data-"+n.replace(oe,"-$&").toLowerCase(),"string"==typeof(l=t.getAttribute(c))){try{l="true"===(m=l)||"false"!==m&&("null"===m?null:m===+m+""?+m:te.test(m)?JSON.parse(m):m)}catch(x){}U.set(t,n,l)}else l=void 0;return l}h.extend({hasData:function(t){return U.hasData(t)||b.hasData(t)},data:function(t,n,l){return U.access(t,n,l)},removeData:function(t,n){U.remove(t,n)},_data:function(t,n,l){return b.access(t,n,l)},_removeData:function(t,n){b.remove(t,n)}}),h.fn.extend({data:function(t,n){var l,c,m,x=this[0],T=x&&x.attributes;if(void 0===t){if(this.length&&(m=U.get(x),1===x.nodeType&&!b.get(x,"hasDataAttrs"))){for(l=T.length;l--;)T[l]&&0===(c=T[l].name).indexOf("data-")&&(c=wt(c.slice(5)),ue(x,c,m[c]));b.set(x,"hasDataAttrs",!0)}return m}return"object"==typeof t?this.each(function(){U.set(this,t)}):Et(this,function(F){var H;if(x&&void 0===F)return void 0!==(H=U.get(x,t))||void 0!==(H=ue(x,t))?H:void 0;this.each(function(){U.set(this,t,F)})},null,n,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){U.remove(this,t)})}}),h.extend({queue:function(t,n,l){var c;if(t)return c=b.get(t,n=(n||"fx")+"queue"),l&&(!c||Array.isArray(l)?c=b.access(t,n,h.makeArray(l)):c.push(l)),c||[]},dequeue:function(t,n){var l=h.queue(t,n=n||"fx"),c=l.length,m=l.shift(),x=h._queueHooks(t,n);"inprogress"===m&&(m=l.shift(),c--),m&&("fx"===n&&l.unshift("inprogress"),delete x.stop,m.call(t,function(){h.dequeue(t,n)},x)),!c&&x&&x.empty.fire()},_queueHooks:function(t,n){var l=n+"queueHooks";return b.get(t,l)||b.access(t,l,{empty:h.Callbacks("once memory").add(function(){b.remove(t,[n+"queue",l])})})}}),h.fn.extend({queue:function(t,n){var l=2;return"string"!=typeof t&&(n=t,t="fx",l--),arguments.length<l?h.queue(this[0],t):void 0===n?this:this.each(function(){var c=h.queue(this,t,n);h._queueHooks(this,t),"fx"===t&&"inprogress"!==c[0]&&h.dequeue(this,t)})},dequeue:function(t){return this.each(function(){h.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var l,c=1,m=h.Deferred(),x=this,T=this.length,F=function(){--c||m.resolveWith(x,[x])};for("string"!=typeof t&&(n=t,t=void 0),t=t||"fx";T--;)(l=b.get(x[T],t+"queueHooks"))&&l.empty&&(c++,l.empty.add(F));return F(),m.promise(n)}});var ae=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Me=new RegExp("^(?:([+-])=|)("+ae+")([a-z%]*)$","i"),Ne=["Top","Right","Bottom","Left"],Le=D.documentElement,Te=function(t){return h.contains(t.ownerDocument,t)},Qe={composed:!0};Le.getRootNode&&(Te=function(t){return h.contains(t.ownerDocument,t)||t.getRootNode(Qe)===t.ownerDocument});var Ie=function(t,n){return"none"===(t=n||t).style.display||""===t.style.display&&Te(t)&&"none"===h.css(t,"display")};function xt(t,n,l,c){var m,x,T=20,F=c?function(){return c.cur()}:function(){return h.css(t,n,"")},H=F(),M=l&&l[3]||(h.cssNumber[n]?"":"px"),q=t.nodeType&&(h.cssNumber[n]||"px"!==M&&+H)&&Me.exec(h.css(t,n));if(q&&q[3]!==M){for(M=M||q[3],q=+(H/=2)||1;T--;)h.style(t,n,q+M),(1-x)*(1-(x=F()/H||.5))<=0&&(T=0),q/=x;h.style(t,n,(q*=2)+M),l=l||[]}return l&&(q=+q||+H||0,m=l[1]?q+(l[1]+1)*l[2]:+l[2],c&&(c.unit=M,c.start=q,c.end=m)),m}var kt={};function pi(t,n){for(var l,c,m,x,T,F,H,M=[],q=0,Q=t.length;q<Q;q++)(c=t[q]).style&&(l=c.style.display,n?("none"===l&&(M[q]=b.get(c,"display")||null,M[q]||(c.style.display="")),""===c.style.display&&Ie(c)&&(M[q]=(H=T=x=void 0,T=(m=c).ownerDocument,(H=kt[F=m.nodeName])||(x=T.body.appendChild(T.createElement(F)),H=h.css(x,"display"),x.parentNode.removeChild(x),"none"===H&&(H="block"),kt[F]=H)))):"none"!==l&&(M[q]="none",b.set(c,"display",l)));for(q=0;q<Q;q++)null!=M[q]&&(t[q].style.display=M[q]);return t}h.fn.extend({show:function(){return pi(this,!0)},hide:function(){return pi(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ie(this)?h(this).show():h(this).hide()})}});var v,g,S=/^(?:checkbox|radio)$/i,P=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,V=/^$|^module$|\/(?:java|ecma)script/i;v=D.createDocumentFragment().appendChild(D.createElement("div")),(g=D.createElement("input")).setAttribute("type","radio"),g.setAttribute("checked","checked"),g.setAttribute("name","t"),v.appendChild(g),A.checkClone=v.cloneNode(!0).cloneNode(!0).lastChild.checked,v.innerHTML="<textarea>x</textarea>",A.noCloneChecked=!!v.cloneNode(!0).lastChild.defaultValue,v.innerHTML="<option></option>",A.option=!!v.lastChild;var J={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ge(t,n){var l;return l=void 0!==t.getElementsByTagName?t.getElementsByTagName(n||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(n||"*"):[],void 0===n||n&&qe(t,n)?h.merge([t],l):l}function Ge(t,n){for(var l=0,c=t.length;l<c;l++)b.set(t[l],"globalEval",!n||b.get(n[l],"globalEval"))}J.tbody=J.tfoot=J.colgroup=J.caption=J.thead,J.th=J.td,A.option||(J.optgroup=J.option=[1,"<select multiple='multiple'>","</select>"]);var be=/<|&#?\w+;/;function Ot(t,n,l,c,m){for(var x,T,F,H,M,q,Q=n.createDocumentFragment(),W=[],G=0,me=t.length;G<me;G++)if((x=t[G])||0===x)if("object"===Y(x))h.merge(W,x.nodeType?[x]:x);else if(be.test(x)){for(T=T||Q.appendChild(n.createElement("div")),F=(P.exec(x)||["",""])[1].toLowerCase(),T.innerHTML=(H=J[F]||J._default)[1]+h.htmlPrefilter(x)+H[2],q=H[0];q--;)T=T.lastChild;h.merge(W,T.childNodes),(T=Q.firstChild).textContent=""}else W.push(n.createTextNode(x));for(Q.textContent="",G=0;x=W[G++];)if(c&&-1<h.inArray(x,c))m&&m.push(x);else if(M=Te(x),T=ge(Q.appendChild(x),"script"),M&&Ge(T),l)for(q=0;x=T[q++];)V.test(x.type||"")&&l.push(x);return Q}var dt=/^([^.]*)(?:\.(.+)|)/;function Wt(){return!0}function k(){return!1}function I(t,n){return t===function(){try{return D.activeElement}catch(l){}}()==("focus"===n)}function j(t,n,l,c,m,x){var T,F;if("object"==typeof n){for(F in"string"!=typeof l&&(c=c||l,l=void 0),n)j(t,F,l,c,n[F],x);return t}if(null==c&&null==m?(m=l,c=l=void 0):null==m&&("string"==typeof l?(m=c,c=void 0):(m=c,c=l,l=void 0)),!1===m)m=k;else if(!m)return t;return 1===x&&(T=m,(m=function(H){return h().off(H),T.apply(this,arguments)}).guid=T.guid||(T.guid=h.guid++)),t.each(function(){h.event.add(this,n,m,c,l)})}function X(t,n,l){l?(b.set(t,n,!1),h.event.add(t,n,{namespace:!1,handler:function(c){var m,x,T=b.get(this,n);if(1&c.isTrigger&&this[n]){if(T.length)(h.event.special[n]||{}).delegateType&&c.stopPropagation();else if(T=d.call(arguments),b.set(this,n,T),m=l(this,n),this[n](),T!==(x=b.get(this,n))||m?b.set(this,n,!1):x={},T!==x)return c.stopImmediatePropagation(),c.preventDefault(),x&&x.value}else T.length&&(b.set(this,n,{value:h.event.trigger(h.extend(T[0],h.Event.prototype),T.slice(1),this)}),c.stopImmediatePropagation())}})):void 0===b.get(t,n)&&h.event.add(t,n,Wt)}h.event={global:{},add:function(t,n,l,c,m){var x,T,F,H,M,q,Q,W,G,me,Se,ve=b.get(t);if(ai(t))for(l.handler&&(l=(x=l).handler,m=x.selector),m&&h.find.matchesSelector(Le,m),l.guid||(l.guid=h.guid++),(H=ve.events)||(H=ve.events=Object.create(null)),(T=ve.handle)||(T=ve.handle=function(gt){return void 0!==h&&h.event.triggered!==gt.type?h.event.dispatch.apply(t,arguments):void 0}),M=(n=(n||"").match(rt)||[""]).length;M--;)G=Se=(F=dt.exec(n[M])||[])[1],me=(F[2]||"").split(".").sort(),G&&(Q=h.event.special[G]||{},Q=h.event.special[G=(m?Q.delegateType:Q.bindType)||G]||{},q=h.extend({type:G,origType:Se,data:c,handler:l,guid:l.guid,selector:m,needsContext:m&&h.expr.match.needsContext.test(m),namespace:me.join(".")},x),(W=H[G])||((W=H[G]=[]).delegateCount=0,Q.setup&&!1!==Q.setup.call(t,c,me,T)||t.addEventListener&&t.addEventListener(G,T)),Q.add&&(Q.add.call(t,q),q.handler.guid||(q.handler.guid=l.guid)),m?W.splice(W.delegateCount++,0,q):W.push(q),h.event.global[G]=!0)},remove:function(t,n,l,c,m){var x,T,F,H,M,q,Q,W,G,me,Se,ve=b.hasData(t)&&b.get(t);if(ve&&(H=ve.events)){for(M=(n=(n||"").match(rt)||[""]).length;M--;)if(G=Se=(F=dt.exec(n[M])||[])[1],me=(F[2]||"").split(".").sort(),G){for(Q=h.event.special[G]||{},W=H[G=(c?Q.delegateType:Q.bindType)||G]||[],F=F[2]&&new RegExp("(^|\\.)"+me.join("\\.(?:.*\\.|)")+"(\\.|$)"),T=x=W.length;x--;)q=W[x],!m&&Se!==q.origType||l&&l.guid!==q.guid||F&&!F.test(q.namespace)||c&&c!==q.selector&&("**"!==c||!q.selector)||(W.splice(x,1),q.selector&&W.delegateCount--,Q.remove&&Q.remove.call(t,q));T&&!W.length&&(Q.teardown&&!1!==Q.teardown.call(t,me,ve.handle)||h.removeEvent(t,G,ve.handle),delete H[G])}else for(G in H)h.event.remove(t,G+n[M],l,c,!0);h.isEmptyObject(H)&&b.remove(t,"handle events")}},dispatch:function(t){var n,l,c,m,x,T,F=new Array(arguments.length),H=h.event.fix(t),M=(b.get(this,"events")||Object.create(null))[H.type]||[],q=h.event.special[H.type]||{};for(F[0]=H,n=1;n<arguments.length;n++)F[n]=arguments[n];if(H.delegateTarget=this,!q.preDispatch||!1!==q.preDispatch.call(this,H)){for(T=h.event.handlers.call(this,H,M),n=0;(m=T[n++])&&!H.isPropagationStopped();)for(H.currentTarget=m.elem,l=0;(x=m.handlers[l++])&&!H.isImmediatePropagationStopped();)H.rnamespace&&!1!==x.namespace&&!H.rnamespace.test(x.namespace)||(H.handleObj=x,H.data=x.data,void 0!==(c=((h.event.special[x.origType]||{}).handle||x.handler).apply(m.elem,F))&&!1===(H.result=c)&&(H.preventDefault(),H.stopPropagation()));return q.postDispatch&&q.postDispatch.call(this,H),H.result}},handlers:function(t,n){var l,c,m,x,T,F=[],H=n.delegateCount,M=t.target;if(H&&M.nodeType&&!("click"===t.type&&1<=t.button))for(;M!==this;M=M.parentNode||this)if(1===M.nodeType&&("click"!==t.type||!0!==M.disabled)){for(x=[],T={},l=0;l<H;l++)void 0===T[m=(c=n[l]).selector+" "]&&(T[m]=c.needsContext?-1<h(m,this).index(M):h.find(m,this,null,[M]).length),T[m]&&x.push(c);x.length&&F.push({elem:M,handlers:x})}return M=this,H<n.length&&F.push({elem:M,handlers:n.slice(H)}),F},addProp:function(t,n){Object.defineProperty(h.Event.prototype,t,{enumerable:!0,configurable:!0,get:C(n)?function(){if(this.originalEvent)return n(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(l){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:l})}})},fix:function(t){return t[h.expando]?t:new h.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var n=this||t;return S.test(n.type)&&n.click&&qe(n,"input")&&X(n,"click",Wt),!1},trigger:function(t){var n=this||t;return S.test(n.type)&&n.click&&qe(n,"input")&&X(n,"click"),!0},_default:function(t){var n=t.target;return S.test(n.type)&&n.click&&qe(n,"input")&&b.get(n,"click")||qe(n,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},h.removeEvent=function(t,n,l){t.removeEventListener&&t.removeEventListener(n,l)},h.Event=function(t,n){if(!(this instanceof h.Event))return new h.Event(t,n);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Wt:k,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,n&&h.extend(this,n),this.timeStamp=t&&t.timeStamp||Date.now(),this[h.expando]=!0},h.Event.prototype={constructor:h.Event,isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},h.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},h.event.addProp),h.each({focus:"focusin",blur:"focusout"},function(t,n){h.event.special[t]={setup:function(){return X(this,t,I),!1},trigger:function(){return X(this,t),!0},_default:function(l){return b.get(l.target,t)},delegateType:n}}),h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,n){h.event.special[t]={delegateType:n,bindType:n,handle:function(l){var c,m=l.relatedTarget,x=l.handleObj;return m&&(m===this||h.contains(this,m))||(l.type=x.origType,c=x.handler.apply(this,arguments),l.type=n),c}}}),h.fn.extend({on:function(t,n,l,c){return j(this,t,n,l,c)},one:function(t,n,l,c){return j(this,t,n,l,c,1)},off:function(t,n,l){var c,m;if(t&&t.preventDefault&&t.handleObj)return c=t.handleObj,h(t.delegateTarget).off(c.namespace?c.origType+"."+c.namespace:c.origType,c.selector,c.handler),this;if("object"==typeof t){for(m in t)this.off(m,n,t[m]);return this}return!1!==n&&"function"!=typeof n||(l=n,n=void 0),!1===l&&(l=k),this.each(function(){h.event.remove(this,t,l,n)})}});var ce=/<script|<style|<link/i,ee=/checked\s*(?:[^=]|=\s*.checked.)/i,de=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function se(t,n){return qe(t,"table")&&qe(11!==n.nodeType?n:n.firstChild,"tr")&&h(t).children("tbody")[0]||t}function he(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Ee(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function we(t,n){var l,c,m,x,T,F;if(1===n.nodeType){if(b.hasData(t)&&(F=b.get(t).events))for(m in b.remove(n,"handle events"),F)for(l=0,c=F[m].length;l<c;l++)h.event.add(n,m,F[m][l]);U.hasData(t)&&(x=U.access(t),T=h.extend({},x),U.set(n,T))}}function pe(t,n,l,c){n=r(n);var m,x,T,F,H,M,q=0,Q=t.length,W=Q-1,G=n[0],me=C(G);if(me||1<Q&&"string"==typeof G&&!A.checkClone&&ee.test(G))return t.each(function(Se){var ve=t.eq(Se);me&&(n[0]=G.call(this,Se,ve.html())),pe(ve,n,l,c)});if(Q&&(x=(m=Ot(n,t[0].ownerDocument,!1,t,c)).firstChild,1===m.childNodes.length&&(m=x),x||c)){for(F=(T=h.map(ge(m,"script"),he)).length;q<Q;q++)H=m,q!==W&&(H=h.clone(H,!0,!0),F&&h.merge(T,ge(H,"script"))),l.call(t[q],H,q);if(F)for(M=T[T.length-1].ownerDocument,h.map(T,Ee),q=0;q<F;q++)V.test((H=T[q]).type||"")&&!b.access(H,"globalEval")&&h.contains(M,H)&&(H.src&&"module"!==(H.type||"").toLowerCase()?h._evalUrl&&!H.noModule&&h._evalUrl(H.src,{nonce:H.nonce||H.getAttribute("nonce")},M):Z(H.textContent.replace(de,""),H,M))}return t}function Ye(t,n,l){for(var c,m=n?h.filter(n,t):t,x=0;null!=(c=m[x]);x++)l||1!==c.nodeType||h.cleanData(ge(c)),c.parentNode&&(l&&Te(c)&&Ge(ge(c,"script")),c.parentNode.removeChild(c));return t}h.extend({htmlPrefilter:function(t){return t},clone:function(t,n,l){var c,m,x,T,F,H,M,q=t.cloneNode(!0),Q=Te(t);if(!(A.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||h.isXMLDoc(t)))for(T=ge(q),c=0,m=(x=ge(t)).length;c<m;c++)F=x[c],"input"===(M=(H=T[c]).nodeName.toLowerCase())&&S.test(F.type)?H.checked=F.checked:"input"!==M&&"textarea"!==M||(H.defaultValue=F.defaultValue);if(n)if(l)for(x=x||ge(t),T=T||ge(q),c=0,m=x.length;c<m;c++)we(x[c],T[c]);else we(t,q);return 0<(T=ge(q,"script")).length&&Ge(T,!Q&&ge(t,"script")),q},cleanData:function(t){for(var n,l,c,m=h.event.special,x=0;void 0!==(l=t[x]);x++)if(ai(l)){if(n=l[b.expando]){if(n.events)for(c in n.events)m[c]?h.event.remove(l,c):h.removeEvent(l,c,n.handle);l[b.expando]=void 0}l[U.expando]&&(l[U.expando]=void 0)}}}),h.fn.extend({detach:function(t){return Ye(this,t,!0)},remove:function(t){return Ye(this,t)},text:function(t){return Et(this,function(n){return void 0===n?h.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=n)})},null,t,arguments.length)},append:function(){return pe(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||se(this,t).appendChild(t)})},prepend:function(){return pe(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var n=se(this,t);n.insertBefore(t,n.firstChild)}})},before:function(){return pe(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return pe(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,n=0;null!=(t=this[n]);n++)1===t.nodeType&&(h.cleanData(ge(t,!1)),t.textContent="");return this},clone:function(t,n){return t=null!=t&&t,n=null==n?t:n,this.map(function(){return h.clone(this,t,n)})},html:function(t){return Et(this,function(n){var l=this[0]||{},c=0,m=this.length;if(void 0===n&&1===l.nodeType)return l.innerHTML;if("string"==typeof n&&!ce.test(n)&&!J[(P.exec(n)||["",""])[1].toLowerCase()]){n=h.htmlPrefilter(n);try{for(;c<m;c++)1===(l=this[c]||{}).nodeType&&(h.cleanData(ge(l,!1)),l.innerHTML=n);l=0}catch(x){}}l&&this.empty().append(n)},null,t,arguments.length)},replaceWith:function(){var t=[];return pe(this,arguments,function(n){var l=this.parentNode;h.inArray(this,t)<0&&(h.cleanData(ge(this)),l&&l.replaceChild(n,this))},t)}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){h.fn[t]=function(l){for(var c,m=[],x=h(l),T=x.length-1,F=0;F<=T;F++)c=F===T?this:this.clone(!0),h(x[F])[n](c),o.apply(m,c.get());return this.pushStack(m)}});var He=new RegExp("^("+ae+")(?!px)[a-z%]+$","i"),ze=/^--/,We=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=function(t,n,l){var c,m,x={};for(m in n)x[m]=t.style[m],t.style[m]=n[m];for(m in c=l.call(t),n)t.style[m]=x[m];return c},ct=new RegExp(Ne.join("|"),"i"),st="[\\x20\\t\\r\\n\\f]",$e=new RegExp("^"+st+"+|((?:^|[^\\\\])(?:\\\\.)*)"+st+"+$","g");function Ze(t,n,l){var c,m,x,T,F=ze.test(n),H=t.style;return(l=l||We(t))&&(T=l.getPropertyValue(n)||l[n],F&&(T=T.replace($e,"$1")),""!==T||Te(t)||(T=h.style(t,n)),!A.pixelBoxStyles()&&He.test(T)&&ct.test(n)&&(c=H.width,m=H.minWidth,x=H.maxWidth,H.minWidth=H.maxWidth=H.width=T,T=l.width,H.width=c,H.minWidth=m,H.maxWidth=x)),void 0!==T?T+"":T}function Fe(t,n){return{get:function(){if(!t())return(this.get=n).apply(this,arguments);delete this.get}}}!function(){function t(){if(M){H.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",M.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Le.appendChild(H).appendChild(M);var q=e.getComputedStyle(M);l="1%"!==q.top,F=12===n(q.marginLeft),M.style.right="60%",x=36===n(q.right),c=36===n(q.width),M.style.position="absolute",m=12===n(M.offsetWidth/3),Le.removeChild(H),M=null}}function n(q){return Math.round(parseFloat(q))}var l,c,m,x,T,F,H=D.createElement("div"),M=D.createElement("div");M.style&&(M.style.backgroundClip="content-box",M.cloneNode(!0).style.backgroundClip="",A.clearCloneStyle="content-box"===M.style.backgroundClip,h.extend(A,{boxSizingReliable:function(){return t(),c},pixelBoxStyles:function(){return t(),x},pixelPosition:function(){return t(),l},reliableMarginLeft:function(){return t(),F},scrollboxSize:function(){return t(),m},reliableTrDimensions:function(){var q,Q,W,G;return null==T&&(q=D.createElement("table"),Q=D.createElement("tr"),W=D.createElement("div"),q.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Q.style.cssText="border:1px solid",Q.style.height="1px",W.style.height="9px",W.style.display="block",Le.appendChild(q).appendChild(Q).appendChild(W),G=e.getComputedStyle(Q),T=parseInt(G.height,10)+parseInt(G.borderTopWidth,10)+parseInt(G.borderBottomWidth,10)===Q.offsetHeight,Le.removeChild(q)),T}}))}();var je=["Webkit","Moz","ms"],et=D.createElement("div").style,tt={};function Ke(t){return h.cssProps[t]||tt[t]||(t in et?t:tt[t]=function(l){for(var c=l[0].toUpperCase()+l.slice(1),m=je.length;m--;)if((l=je[m]+c)in et)return l}(t)||t)}var pt=/^(none|table(?!-c[ea]).+)/,It={position:"absolute",visibility:"hidden",display:"block"},Gt={letterSpacing:"0",fontWeight:"400"};function Vt(t,n,l){var c=Me.exec(n);return c?Math.max(0,c[2]-(l||0))+(c[3]||"px"):n}function Kt(t,n,l,c,m,x){var T="width"===n?1:0,F=0,H=0;if(l===(c?"border":"content"))return 0;for(;T<4;T+=2)"margin"===l&&(H+=h.css(t,l+Ne[T],!0,m)),c?("content"===l&&(H-=h.css(t,"padding"+Ne[T],!0,m)),"margin"!==l&&(H-=h.css(t,"border"+Ne[T]+"Width",!0,m))):(H+=h.css(t,"padding"+Ne[T],!0,m),"padding"!==l?H+=h.css(t,"border"+Ne[T]+"Width",!0,m):F+=h.css(t,"border"+Ne[T]+"Width",!0,m));return!c&&0<=x&&(H+=Math.max(0,Math.ceil(t["offset"+n[0].toUpperCase()+n.slice(1)]-x-H-F-.5))||0),H}function Nt(t,n,l){var c=We(t),m=(!A.boxSizingReliable()||l)&&"border-box"===h.css(t,"boxSizing",!1,c),x=m,T=Ze(t,n,c),F="offset"+n[0].toUpperCase()+n.slice(1);if(He.test(T)){if(!l)return T;T="auto"}return(!A.boxSizingReliable()&&m||!A.reliableTrDimensions()&&qe(t,"tr")||"auto"===T||!parseFloat(T)&&"inline"===h.css(t,"display",!1,c))&&t.getClientRects().length&&(m="border-box"===h.css(t,"boxSizing",!1,c),(x=F in t)&&(T=t[F])),(T=parseFloat(T)||0)+Kt(t,n,l||(m?"border":"content"),x,c,T)+"px"}function ht(t,n,l,c,m){return new ht.prototype.init(t,n,l,c,m)}h.extend({cssHooks:{opacity:{get:function(t,n){if(n){var l=Ze(t,"opacity");return""===l?"1":l}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,n,l,c){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var m,x,T,F=wt(n),H=ze.test(n),M=t.style;if(H||(n=Ke(F)),T=h.cssHooks[n]||h.cssHooks[F],void 0===l)return T&&"get"in T&&void 0!==(m=T.get(t,!1,c))?m:M[n];"string"==(x=typeof l)&&(m=Me.exec(l))&&m[1]&&(l=xt(t,n,m),x="number"),null!=l&&l==l&&("number"!==x||H||(l+=m&&m[3]||(h.cssNumber[F]?"":"px")),A.clearCloneStyle||""!==l||0!==n.indexOf("background")||(M[n]="inherit"),T&&"set"in T&&void 0===(l=T.set(t,l,c))||(H?M.setProperty(n,l):M[n]=l))}},css:function(t,n,l,c){var m,x,T,F=wt(n);return ze.test(n)||(n=Ke(F)),(T=h.cssHooks[n]||h.cssHooks[F])&&"get"in T&&(m=T.get(t,!0,l)),void 0===m&&(m=Ze(t,n,c)),"normal"===m&&n in Gt&&(m=Gt[n]),""===l||l?(x=parseFloat(m),!0===l||isFinite(x)?x||0:m):m}}),h.each(["height","width"],function(t,n){h.cssHooks[n]={get:function(l,c,m){if(c)return!pt.test(h.css(l,"display"))||l.getClientRects().length&&l.getBoundingClientRect().width?Nt(l,n,m):Be(l,It,function(){return Nt(l,n,m)})},set:function(l,c,m){var x,T=We(l),F=!A.scrollboxSize()&&"absolute"===T.position,H=(F||m)&&"border-box"===h.css(l,"boxSizing",!1,T),M=m?Kt(l,n,m,H,T):0;return H&&F&&(M-=Math.ceil(l["offset"+n[0].toUpperCase()+n.slice(1)]-parseFloat(T[n])-Kt(l,n,"border",!1,T)-.5)),M&&(x=Me.exec(c))&&"px"!==(x[3]||"px")&&(l.style[n]=c,c=h.css(l,n)),Vt(0,c,M)}}}),h.cssHooks.marginLeft=Fe(A.reliableMarginLeft,function(t,n){if(n)return(parseFloat(Ze(t,"marginLeft"))||t.getBoundingClientRect().left-Be(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),h.each({margin:"",padding:"",border:"Width"},function(t,n){h.cssHooks[t+n]={expand:function(l){for(var c=0,m={},x="string"==typeof l?l.split(" "):[l];c<4;c++)m[t+Ne[c]+n]=x[c]||x[c-2]||x[0];return m}},"margin"!==t&&(h.cssHooks[t+n].set=Vt)}),h.fn.extend({css:function(t,n){return Et(this,function(l,c,m){var x,T,F={},H=0;if(Array.isArray(c)){for(x=We(l),T=c.length;H<T;H++)F[c[H]]=h.css(l,c[H],!1,x);return F}return void 0!==m?h.style(l,c,m):h.css(l,c)},t,n,1<arguments.length)}}),((h.Tween=ht).prototype={constructor:ht,init:function(t,n,l,c,m,x){this.elem=t,this.prop=l,this.easing=m||h.easing._default,this.options=n,this.start=this.now=this.cur(),this.end=c,this.unit=x||(h.cssNumber[l]?"":"px")},cur:function(){var t=ht.propHooks[this.prop];return t&&t.get?t.get(this):ht.propHooks._default.get(this)},run:function(t){var n,l=ht.propHooks[this.prop];return this.pos=n=this.options.duration?h.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*n+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),l&&l.set?l.set(this):ht.propHooks._default.set(this),this}}).init.prototype=ht.prototype,(ht.propHooks={_default:{get:function(t){var n;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(n=h.css(t.elem,t.prop,""))&&"auto"!==n?n:0},set:function(t){h.fx.step[t.prop]?h.fx.step[t.prop](t):1!==t.elem.nodeType||!h.cssHooks[t.prop]&&null==t.elem.style[Ke(t.prop)]?t.elem[t.prop]=t.now:h.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ht.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},h.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},h.fx=ht.prototype.init,h.fx.step={};var Ut,li,hi,wi,Jt=/^(?:toggle|show|hide)$/,Qt=/queueHooks$/;function bi(){li&&(!1===D.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(bi):e.setTimeout(bi,h.fx.interval),h.fx.tick())}function Ci(){return e.setTimeout(function(){Ut=void 0}),Ut=Date.now()}function xi(t,n){var l,c=0,m={height:t};for(n=n?1:0;c<4;c+=2-n)m["margin"+(l=Ne[c])]=m["padding"+l]=t;return n&&(m.opacity=m.width=t),m}function Ii(t,n,l){for(var c,m=(Zt.tweeners[n]||[]).concat(Zt.tweeners["*"]),x=0,T=m.length;x<T;x++)if(c=m[x].call(l,n,t))return c}function Zt(t,n,l){var c,m,x=0,T=Zt.prefilters.length,F=h.Deferred().always(function(){delete H.elem}),H=function(){if(m)return!1;for(var Q=Ut||Ci(),W=Math.max(0,M.startTime+M.duration-Q),G=1-(W/M.duration||0),me=0,Se=M.tweens.length;me<Se;me++)M.tweens[me].run(G);return F.notifyWith(t,[M,G,W]),G<1&&Se?W:(Se||F.notifyWith(t,[M,1,0]),F.resolveWith(t,[M]),!1)},M=F.promise({elem:t,props:h.extend({},n),opts:h.extend(!0,{specialEasing:{},easing:h.easing._default},l),originalProperties:n,originalOptions:l,startTime:Ut||Ci(),duration:l.duration,tweens:[],createTween:function(Q,W){var G=h.Tween(t,M.opts,Q,W,M.opts.specialEasing[Q]||M.opts.easing);return M.tweens.push(G),G},stop:function(Q){var W=0,G=Q?M.tweens.length:0;if(m)return this;for(m=!0;W<G;W++)M.tweens[W].run(1);return Q?(F.notifyWith(t,[M,1,0]),F.resolveWith(t,[M,Q])):F.rejectWith(t,[M,Q]),this}}),q=M.props;for(function(Q,W){var G,me,Se,ve,gt;for(G in Q)if(Se=W[me=wt(G)],ve=Q[G],Array.isArray(ve)&&(Se=ve[1],ve=Q[G]=ve[0]),G!==me&&(Q[me]=ve,delete Q[G]),(gt=h.cssHooks[me])&&"expand"in gt)for(G in ve=gt.expand(ve),delete Q[me],ve)G in Q||(Q[G]=ve[G],W[G]=Se);else W[me]=Se}(q,M.opts.specialEasing);x<T;x++)if(c=Zt.prefilters[x].call(M,t,q,M.opts))return C(c.stop)&&(h._queueHooks(M.elem,M.opts.queue).stop=c.stop.bind(c)),c;return h.map(q,Ii,M),C(M.opts.start)&&M.opts.start.call(t,M),M.progress(M.opts.progress).done(M.opts.done,M.opts.complete).fail(M.opts.fail).always(M.opts.always),h.fx.timer(h.extend(H,{elem:t,anim:M,queue:M.opts.queue})),M}h.Animation=h.extend(Zt,{tweeners:{"*":[function(t,n){var l=this.createTween(t,n);return xt(l.elem,t,Me.exec(n),l),l}]},tweener:function(t,n){C(t)?(n=t,t=["*"]):t=t.match(rt);for(var l,c=0,m=t.length;c<m;c++)(Zt.tweeners[l=t[c]]=Zt.tweeners[l]||[]).unshift(n)},prefilters:[function(t,n,l){var c,m,x,T,F,H,M,q,Q="width"in n||"height"in n,W=this,G={},me=t.style,Se=t.nodeType&&Ie(t),ve=b.get(t,"fxshow");for(c in l.queue||(null==(T=h._queueHooks(t,"fx")).unqueued&&(T.unqueued=0,F=T.empty.fire,T.empty.fire=function(){T.unqueued||F()}),T.unqueued++,W.always(function(){W.always(function(){T.unqueued--,h.queue(t,"fx").length||T.empty.fire()})})),n)if(Jt.test(m=n[c])){if(delete n[c],x=x||"toggle"===m,m===(Se?"hide":"show")){if("show"!==m||!ve||void 0===ve[c])continue;Se=!0}G[c]=ve&&ve[c]||h.style(t,c)}if((H=!h.isEmptyObject(n))||!h.isEmptyObject(G))for(c in Q&&1===t.nodeType&&(l.overflow=[me.overflow,me.overflowX,me.overflowY],null==(M=ve&&ve.display)&&(M=b.get(t,"display")),"none"===(q=h.css(t,"display"))&&(M?q=M:(pi([t],!0),M=t.style.display||M,q=h.css(t,"display"),pi([t]))),("inline"===q||"inline-block"===q&&null!=M)&&"none"===h.css(t,"float")&&(H||(W.done(function(){me.display=M}),null==M&&(M="none"===(q=me.display)?"":q)),me.display="inline-block")),l.overflow&&(me.overflow="hidden",W.always(function(){me.overflow=l.overflow[0],me.overflowX=l.overflow[1],me.overflowY=l.overflow[2]})),H=!1,G)H||(ve?"hidden"in ve&&(Se=ve.hidden):ve=b.access(t,"fxshow",{display:M}),x&&(ve.hidden=!Se),Se&&pi([t],!0),W.done(function(){for(c in Se||pi([t]),b.remove(t,"fxshow"),G)h.style(t,c,G[c])})),H=Ii(Se?ve[c]:0,c,W),c in ve||(ve[c]=H.start,Se&&(H.end=H.start,H.start=0))}],prefilter:function(t,n){n?Zt.prefilters.unshift(t):Zt.prefilters.push(t)}}),h.speed=function(t,n,l){var c=t&&"object"==typeof t?h.extend({},t):{complete:l||!l&&n||C(t)&&t,duration:t,easing:l&&n||n&&!C(n)&&n};return h.fx.off?c.duration=0:"number"!=typeof c.duration&&(c.duration=c.duration in h.fx.speeds?h.fx.speeds[c.duration]:h.fx.speeds._default),null!=c.queue&&!0!==c.queue||(c.queue="fx"),c.old=c.complete,c.complete=function(){C(c.old)&&c.old.call(this),c.queue&&h.dequeue(this,c.queue)},c},h.fn.extend({fadeTo:function(t,n,l,c){return this.filter(Ie).css("opacity",0).show().end().animate({opacity:n},t,l,c)},animate:function(t,n,l,c){var m=h.isEmptyObject(t),x=h.speed(n,l,c),T=function(){var F=Zt(this,h.extend({},t),x);(m||b.get(this,"finish"))&&F.stop(!0)};return T.finish=T,m||!1===x.queue?this.each(T):this.queue(x.queue,T)},stop:function(t,n,l){var c=function(m){var x=m.stop;delete m.stop,x(l)};return"string"!=typeof t&&(l=n,n=t,t=void 0),n&&this.queue(t||"fx",[]),this.each(function(){var m=!0,x=null!=t&&t+"queueHooks",T=h.timers,F=b.get(this);if(x)F[x]&&F[x].stop&&c(F[x]);else for(x in F)F[x]&&F[x].stop&&Qt.test(x)&&c(F[x]);for(x=T.length;x--;)T[x].elem!==this||null!=t&&T[x].queue!==t||(T[x].anim.stop(l),m=!1,T.splice(x,1));!m&&l||h.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var n,l=b.get(this),c=l[t+"queue"],m=l[t+"queueHooks"],x=h.timers,T=c?c.length:0;for(l.finish=!0,h.queue(this,t,[]),m&&m.stop&&m.stop.call(this,!0),n=x.length;n--;)x[n].elem===this&&x[n].queue===t&&(x[n].anim.stop(!0),x.splice(n,1));for(n=0;n<T;n++)c[n]&&c[n].finish&&c[n].finish.call(this);delete l.finish})}}),h.each(["toggle","show","hide"],function(t,n){var l=h.fn[n];h.fn[n]=function(c,m,x){return null==c||"boolean"==typeof c?l.apply(this,arguments):this.animate(xi(n,!0),c,m,x)}}),h.each({slideDown:xi("show"),slideUp:xi("hide"),slideToggle:xi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){h.fn[t]=function(l,c,m){return this.animate(n,l,c,m)}}),h.timers=[],h.fx.tick=function(){var t,n=0,l=h.timers;for(Ut=Date.now();n<l.length;n++)(t=l[n])()||l[n]!==t||l.splice(n--,1);l.length||h.fx.stop(),Ut=void 0},h.fx.timer=function(t){h.timers.push(t),h.fx.start()},h.fx.interval=13,h.fx.start=function(){li||(li=!0,bi())},h.fx.stop=function(){li=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(t,n){return t=h.fx&&h.fx.speeds[t]||t,this.queue(n=n||"fx",function(l,c){var m=e.setTimeout(l,t);c.stop=function(){e.clearTimeout(m)}})},hi=D.createElement("input"),wi=D.createElement("select").appendChild(D.createElement("option")),hi.type="checkbox",A.checkOn=""!==hi.value,A.optSelected=wi.selected,(hi=D.createElement("input")).value="t",hi.type="radio",A.radioValue="t"===hi.value;var Ri,_i=h.expr.attrHandle;h.fn.extend({attr:function(t,n){return Et(this,h.attr,t,n,1<arguments.length)},removeAttr:function(t){return this.each(function(){h.removeAttr(this,t)})}}),h.extend({attr:function(t,n,l){var c,m,x=t.nodeType;if(3!==x&&8!==x&&2!==x)return void 0===t.getAttribute?h.prop(t,n,l):(1===x&&h.isXMLDoc(t)||(m=h.attrHooks[n.toLowerCase()]||(h.expr.match.bool.test(n)?Ri:void 0)),void 0!==l?null===l?void h.removeAttr(t,n):m&&"set"in m&&void 0!==(c=m.set(t,l,n))?c:(t.setAttribute(n,l+""),l):m&&"get"in m&&null!==(c=m.get(t,n))?c:null==(c=h.find.attr(t,n))?void 0:c)},attrHooks:{type:{set:function(t,n){if(!A.radioValue&&"radio"===n&&qe(t,"input")){var l=t.value;return t.setAttribute("type",n),l&&(t.value=l),n}}}},removeAttr:function(t,n){var l,c=0,m=n&&n.match(rt);if(m&&1===t.nodeType)for(;l=m[c++];)t.removeAttribute(l)}}),Ri={set:function(t,n,l){return!1===n?h.removeAttr(t,l):t.setAttribute(l,l),l}},h.each(h.expr.match.bool.source.match(/\w+/g),function(t,n){var l=_i[n]||h.find.attr;_i[n]=function(c,m,x){var T,F,H=m.toLowerCase();return x||(F=_i[H],_i[H]=T,T=null!=l(c,m,x)?H:null,_i[H]=F),T}});var ln=/^(?:input|select|textarea|button)$/i,Bi=/^(?:a|area)$/i;function Ti(t){return(t.match(rt)||[]).join(" ")}function gi(t){return t.getAttribute&&t.getAttribute("class")||""}function Mi(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(rt)||[]}h.fn.extend({prop:function(t,n){return Et(this,h.prop,t,n,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[h.propFix[t]||t]})}}),h.extend({prop:function(t,n,l){var c,m,x=t.nodeType;if(3!==x&&8!==x&&2!==x)return 1===x&&h.isXMLDoc(t)||(m=h.propHooks[n=h.propFix[n]||n]),void 0!==l?m&&"set"in m&&void 0!==(c=m.set(t,l,n))?c:t[n]=l:m&&"get"in m&&null!==(c=m.get(t,n))?c:t[n]},propHooks:{tabIndex:{get:function(t){var n=h.find.attr(t,"tabindex");return n?parseInt(n,10):ln.test(t.nodeName)||Bi.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),A.optSelected||(h.propHooks.selected={get:function(t){return null},set:function(t){}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this}),h.fn.extend({addClass:function(t){var n,l,c,m,x,T;return C(t)?this.each(function(F){h(this).addClass(t.call(this,F,gi(this)))}):(n=Mi(t)).length?this.each(function(){if(c=gi(this),l=1===this.nodeType&&" "+Ti(c)+" "){for(x=0;x<n.length;x++)l.indexOf(" "+(m=n[x])+" ")<0&&(l+=m+" ");T=Ti(l),c!==T&&this.setAttribute("class",T)}}):this},removeClass:function(t){var n,l,c,m,x,T;return C(t)?this.each(function(F){h(this).removeClass(t.call(this,F,gi(this)))}):arguments.length?(n=Mi(t)).length?this.each(function(){if(c=gi(this),l=1===this.nodeType&&" "+Ti(c)+" "){for(x=0;x<n.length;x++)for(m=n[x];-1<l.indexOf(" "+m+" ");)l=l.replace(" "+m+" "," ");T=Ti(l),c!==T&&this.setAttribute("class",T)}}):this:this.attr("class","")},toggleClass:function(t,n){var l,c,m,x,T=typeof t,F="string"===T||Array.isArray(t);return C(t)?this.each(function(H){h(this).toggleClass(t.call(this,H,gi(this),n),n)}):"boolean"==typeof n&&F?n?this.addClass(t):this.removeClass(t):(l=Mi(t),this.each(function(){if(F)for(x=h(this),m=0;m<l.length;m++)x.hasClass(c=l[m])?x.removeClass(c):x.addClass(c);else void 0!==t&&"boolean"!==T||((c=gi(this))&&b.set(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||!1===t?"":b.get(this,"__className__")||""))}))},hasClass:function(t){var n,l,c=0;for(n=" "+t+" ";l=this[c++];)if(1===l.nodeType&&-1<(" "+Ti(gi(l))+" ").indexOf(n))return!0;return!1}});var Vi=/\r/g;h.fn.extend({val:function(t){var n,l,c,m=this[0];return arguments.length?(c=C(t),this.each(function(x){var T;1===this.nodeType&&(null==(T=c?t.call(this,x,h(this).val()):t)?T="":"number"==typeof T?T+="":Array.isArray(T)&&(T=h.map(T,function(F){return null==F?"":F+""})),(n=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,T,"value")||(this.value=T))})):m?(n=h.valHooks[m.type]||h.valHooks[m.nodeName.toLowerCase()])&&"get"in n&&void 0!==(l=n.get(m,"value"))?l:"string"==typeof(l=m.value)?l.replace(Vi,""):null==l?"":l:void 0}}),h.extend({valHooks:{option:{get:function(t){var n=h.find.attr(t,"value");return null!=n?n:Ti(h.text(t))}},select:{get:function(t){var n,l,c,m=t.options,x=t.selectedIndex,T="select-one"===t.type,F=T?null:[],H=T?x+1:m.length;for(c=x<0?H:T?x:0;c<H;c++)if(((l=m[c]).selected||c===x)&&!l.disabled&&(!l.parentNode.disabled||!qe(l.parentNode,"optgroup"))){if(n=h(l).val(),T)return n;F.push(n)}return F},set:function(t,n){for(var l,c,m=t.options,x=h.makeArray(n),T=m.length;T--;)((c=m[T]).selected=-1<h.inArray(h.valHooks.option.get(c),x))&&(l=!0);return l||(t.selectedIndex=-1),x}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(t,n){if(Array.isArray(n))return t.checked=-1<h.inArray(h(t).val(),n)}},A.checkOn||(h.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),A.focusin="onfocusin"in e;var Ni=/^(?:focusinfocus|focusoutblur)$/,Zi=function(t){t.stopPropagation()};h.extend(h.event,{trigger:function(t,n,l,c){var m,x,T,F,H,M,q,Q,W=[l||D],G=w.call(t,"type")?t.type:t,me=w.call(t,"namespace")?t.namespace.split("."):[];if(x=Q=T=l=l||D,3!==l.nodeType&&8!==l.nodeType&&!Ni.test(G+h.event.triggered)&&(-1<G.indexOf(".")&&(G=(me=G.split(".")).shift(),me.sort()),H=G.indexOf(":")<0&&"on"+G,(t=t[h.expando]?t:new h.Event(G,"object"==typeof t&&t)).isTrigger=c?2:3,t.namespace=me.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+me.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=l),n=null==n?[t]:h.makeArray(n,[t]),q=h.event.special[G]||{},c||!q.trigger||!1!==q.trigger.apply(l,n))){if(!c&&!q.noBubble&&!_(l)){for(Ni.test((F=q.delegateType||G)+G)||(x=x.parentNode);x;x=x.parentNode)W.push(x),T=x;T===(l.ownerDocument||D)&&W.push(T.defaultView||T.parentWindow||e)}for(m=0;(x=W[m++])&&!t.isPropagationStopped();)Q=x,t.type=1<m?F:q.bindType||G,(M=(b.get(x,"events")||Object.create(null))[t.type]&&b.get(x,"handle"))&&M.apply(x,n),(M=H&&x[H])&&M.apply&&ai(x)&&(t.result=M.apply(x,n),!1===t.result&&t.preventDefault());return t.type=G,c||t.isDefaultPrevented()||q._default&&!1!==q._default.apply(W.pop(),n)||!ai(l)||H&&C(l[G])&&!_(l)&&((T=l[H])&&(l[H]=null),h.event.triggered=G,t.isPropagationStopped()&&Q.addEventListener(G,Zi),l[G](),t.isPropagationStopped()&&Q.removeEventListener(G,Zi),h.event.triggered=void 0,T&&(l[H]=T)),t.result}},simulate:function(t,n,l){var c=h.extend(new h.Event,l,{type:t,isSimulated:!0});h.event.trigger(c,null,n)}}),h.fn.extend({trigger:function(t,n){return this.each(function(){h.event.trigger(t,n,this)})},triggerHandler:function(t,n){var l=this[0];if(l)return h.event.trigger(t,n,l,!0)}}),A.focusin||h.each({focus:"focusin",blur:"focusout"},function(t,n){var l=function(c){h.event.simulate(n,c.target,h.event.fix(c))};h.event.special[n]={setup:function(){var c=this.ownerDocument||this.document||this,m=b.access(c,n);m||c.addEventListener(t,l,!0),b.access(c,n,(m||0)+1)},teardown:function(){var c=this.ownerDocument||this.document||this,m=b.access(c,n)-1;m?b.access(c,n,m):(c.removeEventListener(t,l,!0),b.remove(c,n))}}});var Di=e.location,mi={guid:Date.now()},Pi=/\?/;h.parseXML=function(t){var n,l;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(c){}return l=n&&n.getElementsByTagName("parsererror")[0],n&&!l||h.error("Invalid XML: "+(l?h.map(l.childNodes,function(c){return c.textContent}).join("\n"):t)),n};var Xi=/\[\]$/,zi=/\r?\n/g,ji=/^(?:submit|button|image|reset|file)$/i,Yi=/^(?:input|select|textarea|keygen)/i;function Li(t,n,l,c){var m;if(Array.isArray(n))h.each(n,function(x,T){l||Xi.test(t)?c(t,T):Li(t+"["+("object"==typeof T&&null!=T?x:"")+"]",T,l,c)});else if(l||"object"!==Y(n))c(t,n);else for(m in n)Li(t+"["+m+"]",n[m],l,c)}h.param=function(t,n){var l,c=[],m=function(x,T){var F=C(T)?T():T;c[c.length]=encodeURIComponent(x)+"="+encodeURIComponent(null==F?"":F)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!h.isPlainObject(t))h.each(t,function(){m(this.name,this.value)});else for(l in t)Li(l,t[l],n,m);return c.join("&")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=h.prop(this,"elements");return t?h.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!h(this).is(":disabled")&&Yi.test(this.nodeName)&&!ji.test(t)&&(this.checked||!S.test(t))}).map(function(t,n){var l=h(this).val();return null==l?null:Array.isArray(l)?h.map(l,function(c){return{name:n.name,value:c.replace(zi,"\r\n")}}):{name:n.name,value:l.replace(zi,"\r\n")}}).get()}});var Ki=/%20/g,Ji=/#.*$/,un=/([?&])_=[^&]*/,hn=/^(.*?):[ \t]*([^\r\n]*)$/gm,Wi=/^(?:GET|HEAD)$/,Qi=/^\/\//,Tn={},cn={},En="*/".concat("*"),dn=D.createElement("a");function Sn(t){return function(n,l){"string"!=typeof n&&(l=n,n="*");var c,m=0,x=n.toLowerCase().match(rt)||[];if(C(l))for(;c=x[m++];)"+"===c[0]?(c=c.slice(1)||"*",(t[c]=t[c]||[]).unshift(l)):(t[c]=t[c]||[]).push(l)}}function bn(t,n,l,c){var m={},x=t===cn;function T(F){var H;return m[F]=!0,h.each(t[F]||[],function(M,q){var Q=q(n,l,c);return"string"!=typeof Q||x||m[Q]?x?!(H=Q):void 0:(n.dataTypes.unshift(Q),T(Q),!1)}),H}return T(n.dataTypes[0])||!m["*"]&&T("*")}function fn(t,n){var l,c,m=h.ajaxSettings.flatOptions||{};for(l in n)void 0!==n[l]&&((m[l]?t:c||(c={}))[l]=n[l]);return c&&h.extend(!0,t,c),t}dn.href=Di.href,h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Di.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Di.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":En,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,n){return n?fn(fn(t,h.ajaxSettings),n):fn(h.ajaxSettings,t)},ajaxPrefilter:Sn(Tn),ajaxTransport:Sn(cn),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0);var l,c,m,x,T,F,H,M,q,Q,W=h.ajaxSetup({},n=n||{}),G=W.context||W,me=W.context&&(G.nodeType||G.jquery)?h(G):h.event,Se=h.Deferred(),ve=h.Callbacks("once memory"),gt=W.statusCode||{},Ct={},$t={},ot="canceled",De={readyState:0,getResponseHeader:function(Je){var mt;if(H){if(!x)for(x={};mt=hn.exec(m);)x[mt[1].toLowerCase()+" "]=(x[mt[1].toLowerCase()+" "]||[]).concat(mt[2]);mt=x[Je.toLowerCase()+" "]}return null==mt?null:mt.join(", ")},getAllResponseHeaders:function(){return H?m:null},setRequestHeader:function(Je,mt){return null==H&&(Je=$t[Je.toLowerCase()]=$t[Je.toLowerCase()]||Je,Ct[Je]=mt),this},overrideMimeType:function(Je){return null==H&&(W.mimeType=Je),this},statusCode:function(Je){var mt;if(Je)if(H)De.always(Je[De.status]);else for(mt in Je)gt[mt]=[gt[mt],Je[mt]];return this},abort:function(Je){var mt=Je||ot;return l&&l.abort(mt),Xt(0,mt),this}};if(Se.promise(De),W.url=((t||W.url||Di.href)+"").replace(Qi,Di.protocol+"//"),W.type=n.method||n.type||W.method||W.type,W.dataTypes=(W.dataType||"*").toLowerCase().match(rt)||[""],null==W.crossDomain){F=D.createElement("a");try{F.href=W.url,F.href=F.href,W.crossDomain=dn.protocol+"//"+dn.host!=F.protocol+"//"+F.host}catch(Je){W.crossDomain=!0}}if(W.data&&W.processData&&"string"!=typeof W.data&&(W.data=h.param(W.data,W.traditional)),bn(Tn,W,n,De),H)return De;for(q in(M=h.event&&W.global)&&0==h.active++&&h.event.trigger("ajaxStart"),W.type=W.type.toUpperCase(),W.hasContent=!Wi.test(W.type),c=W.url.replace(Ji,""),W.hasContent?W.data&&W.processData&&0===(W.contentType||"").indexOf("application/x-www-form-urlencoded")&&(W.data=W.data.replace(Ki,"+")):(Q=W.url.slice(c.length),W.data&&(W.processData||"string"==typeof W.data)&&(c+=(Pi.test(c)?"&":"?")+W.data,delete W.data),!1===W.cache&&(c=c.replace(un,"$1"),Q=(Pi.test(c)?"&":"?")+"_="+mi.guid+++Q),W.url=c+Q),W.ifModified&&(h.lastModified[c]&&De.setRequestHeader("If-Modified-Since",h.lastModified[c]),h.etag[c]&&De.setRequestHeader("If-None-Match",h.etag[c])),(W.data&&W.hasContent&&!1!==W.contentType||n.contentType)&&De.setRequestHeader("Content-Type",W.contentType),De.setRequestHeader("Accept",W.dataTypes[0]&&W.accepts[W.dataTypes[0]]?W.accepts[W.dataTypes[0]]+("*"!==W.dataTypes[0]?", "+En+"; q=0.01":""):W.accepts["*"]),W.headers)De.setRequestHeader(q,W.headers[q]);if(W.beforeSend&&(!1===W.beforeSend.call(G,De,W)||H))return De.abort();if(ot="abort",ve.add(W.complete),De.done(W.success),De.fail(W.error),l=bn(cn,W,n,De)){if(De.readyState=1,M&&me.trigger("ajaxSend",[De,W]),H)return De;W.async&&0<W.timeout&&(T=e.setTimeout(function(){De.abort("timeout")},W.timeout));try{H=!1,l.send(Ct,Xt)}catch(Je){if(H)throw Je;Xt(-1,Je)}}else Xt(-1,"No Transport");function Xt(Je,mt,qi,$i){var ei,Oi,Hi,Yt,Fi,ui=mt;H||(H=!0,T&&e.clearTimeout(T),l=void 0,m=$i||"",De.readyState=0<Je?4:0,ei=200<=Je&&Je<300||304===Je,qi&&(Yt=function(vt,ti,ii){for(var vi,Ae,it,Rt,ni=vt.contents,St=vt.dataTypes;"*"===St[0];)St.shift(),void 0===vi&&(vi=vt.mimeType||ti.getResponseHeader("Content-Type"));if(vi)for(Ae in ni)if(ni[Ae]&&ni[Ae].test(vi)){St.unshift(Ae);break}if(St[0]in ii)it=St[0];else{for(Ae in ii){if(!St[0]||vt.converters[Ae+" "+St[0]]){it=Ae;break}Rt||(Rt=Ae)}it=it||Rt}if(it)return it!==St[0]&&St.unshift(it),ii[it]}(W,De,qi)),!ei&&-1<h.inArray("script",W.dataTypes)&&h.inArray("json",W.dataTypes)<0&&(W.converters["text script"]=function(){}),Yt=function(vt,ti,ii,vi){var Ae,it,Rt,ni,St,ri={},ki=vt.dataTypes.slice();if(ki[1])for(Rt in vt.converters)ri[Rt.toLowerCase()]=vt.converters[Rt];for(it=ki.shift();it;)if(vt.responseFields[it]&&(ii[vt.responseFields[it]]=ti),!St&&vi&&vt.dataFilter&&(ti=vt.dataFilter(ti,vt.dataType)),St=it,it=ki.shift())if("*"===it)it=St;else if("*"!==St&&St!==it){if(!(Rt=ri[St+" "+it]||ri["* "+it]))for(Ae in ri)if((ni=Ae.split(" "))[1]===it&&(Rt=ri[St+" "+ni[0]]||ri["* "+ni[0]])){!0===Rt?Rt=ri[Ae]:!0!==ri[Ae]&&(it=ni[0],ki.unshift(ni[1]));break}if(!0!==Rt)if(Rt&&vt.throws)ti=Rt(ti);else try{ti=Rt(ti)}catch(en){return{state:"parsererror",error:Rt?en:"No conversion from "+St+" to "+it}}}return{state:"success",data:ti}}(W,Yt,De,ei),ei?(W.ifModified&&((Fi=De.getResponseHeader("Last-Modified"))&&(h.lastModified[c]=Fi),(Fi=De.getResponseHeader("etag"))&&(h.etag[c]=Fi)),204===Je||"HEAD"===W.type?ui="nocontent":304===Je?ui="notmodified":(ui=Yt.state,Oi=Yt.data,ei=!(Hi=Yt.error))):(Hi=ui,!Je&&ui||(ui="error",Je<0&&(Je=0))),De.status=Je,De.statusText=(mt||ui)+"",ei?Se.resolveWith(G,[Oi,ui,De]):Se.rejectWith(G,[De,ui,Hi]),De.statusCode(gt),gt=void 0,M&&me.trigger(ei?"ajaxSuccess":"ajaxError",[De,W,ei?Oi:Hi]),ve.fireWith(G,[De,ui]),M&&(me.trigger("ajaxComplete",[De,W]),--h.active||h.event.trigger("ajaxStop")))}return De},getJSON:function(t,n,l){return h.get(t,n,l,"json")},getScript:function(t,n){return h.get(t,void 0,n,"script")}}),h.each(["get","post"],function(t,n){h[n]=function(l,c,m,x){return C(c)&&(x=x||m,m=c,c=void 0),h.ajax(h.extend({url:l,type:n,dataType:x,data:c,success:m},h.isPlainObject(l)&&l))}}),h.ajaxPrefilter(function(t){var n;for(n in t.headers)"content-type"===n.toLowerCase()&&(t.contentType=t.headers[n]||"")}),h._evalUrl=function(t,n,l){return h.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(c){h.globalEval(c,n,l)}})},h.fn.extend({wrapAll:function(t){var n;return this[0]&&(C(t)&&(t=t.call(this[0])),n=h(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&n.insertBefore(this[0]),n.map(function(){for(var l=this;l.firstElementChild;)l=l.firstElementChild;return l}).append(this)),this},wrapInner:function(t){return C(t)?this.each(function(n){h(this).wrapInner(t.call(this,n))}):this.each(function(){var n=h(this),l=n.contents();l.length?l.wrapAll(t):n.append(t)})},wrap:function(t){var n=C(t);return this.each(function(l){h(this).wrapAll(n?t.call(this,l):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){h(this).replaceWith(this.childNodes)}),this}}),h.expr.pseudos.hidden=function(t){return!h.expr.pseudos.visible(t)},h.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},h.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var kn={0:200,1223:204},Ui=h.ajaxSettings.xhr();A.cors=!!Ui&&"withCredentials"in Ui,A.ajax=Ui=!!Ui,h.ajaxTransport(function(t){var n,l;if(A.cors||Ui&&!t.crossDomain)return{send:function(c,m){var x,T=t.xhr();if(T.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(x in t.xhrFields)T[x]=t.xhrFields[x];for(x in t.mimeType&&T.overrideMimeType&&T.overrideMimeType(t.mimeType),t.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest"),c)T.setRequestHeader(x,c[x]);n=function(F){return function(){n&&(n=l=T.onload=T.onerror=T.onabort=T.ontimeout=T.onreadystatechange=null,"abort"===F?T.abort():"error"===F?"number"!=typeof T.status?m(0,"error"):m(T.status,T.statusText):m(kn[T.status]||T.status,T.statusText,"text"!==(T.responseType||"text")||"string"!=typeof T.responseText?{binary:T.response}:{text:T.responseText},T.getAllResponseHeaders()))}},T.onload=n(),l=T.onerror=T.ontimeout=n("error"),void 0!==T.onabort?T.onabort=l:T.onreadystatechange=function(){4===T.readyState&&e.setTimeout(function(){n&&l()})},n=n("abort");try{T.send(t.hasContent&&t.data||null)}catch(F){if(n)throw F}},abort:function(){n&&n()}}}),h.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return h.globalEval(t),t}}}),h.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),h.ajaxTransport("script",function(t){var n,l;if(t.crossDomain||t.scriptAttrs)return{send:function(c,m){n=h("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",l=function(x){n.remove(),l=null,x&&m("error"===x.type?404:200,x.type)}),D.head.appendChild(n[0])},abort:function(){l&&l()}}});var Pn,Cn=[],pn=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Cn.pop()||h.expando+"_"+mi.guid++;return this[t]=!0,t}}),h.ajaxPrefilter("json jsonp",function(t,n,l){var c,m,x,T=!1!==t.jsonp&&(pn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&pn.test(t.data)&&"data");if(T||"jsonp"===t.dataTypes[0])return c=t.jsonpCallback=C(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,T?t[T]=t[T].replace(pn,"$1"+c):!1!==t.jsonp&&(t.url+=(Pi.test(t.url)?"&":"?")+t.jsonp+"="+c),t.converters["script json"]=function(){return x||h.error(c+" was not called"),x[0]},t.dataTypes[0]="json",m=e[c],e[c]=function(){x=arguments},l.always(function(){void 0===m?h(e).removeProp(c):e[c]=m,t[c]&&(t.jsonpCallback=n.jsonpCallback,Cn.push(c)),x&&C(m)&&m(x[0]),x=m=void 0}),"script"}),A.createHTMLDocument=((Pn=D.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Pn.childNodes.length),h.parseHTML=function(t,n,l){return"string"!=typeof t?[]:("boolean"==typeof n&&(l=n,n=!1),n||(A.createHTMLDocument?((c=(n=D.implementation.createHTMLDocument("")).createElement("base")).href=D.location.href,n.head.appendChild(c)):n=D),x=!l&&[],(m=nt.exec(t))?[n.createElement(m[1])]:(m=Ot([t],n,x),x&&x.length&&h(x).remove(),h.merge([],m.childNodes)));var c,m,x},h.fn.load=function(t,n,l){var c,m,x,T=this,F=t.indexOf(" ");return-1<F&&(c=Ti(t.slice(F)),t=t.slice(0,F)),C(n)?(l=n,n=void 0):n&&"object"==typeof n&&(m="POST"),0<T.length&&h.ajax({url:t,type:m||"GET",dataType:"html",data:n}).done(function(H){x=arguments,T.html(c?h("<div>").append(h.parseHTML(H)).find(c):H)}).always(l&&function(H,M){T.each(function(){l.apply(this,x||[H.responseText,M,H])})}),this},h.expr.pseudos.animated=function(t){return h.grep(h.timers,function(n){return t===n.elem}).length},h.offset={setOffset:function(t,n,l){var c,m,x,T,F,H,M=h.css(t,"position"),q=h(t),Q={};"static"===M&&(t.style.position="relative"),F=q.offset(),x=h.css(t,"top"),H=h.css(t,"left"),("absolute"===M||"fixed"===M)&&-1<(x+H).indexOf("auto")?(T=(c=q.position()).top,m=c.left):(T=parseFloat(x)||0,m=parseFloat(H)||0),C(n)&&(n=n.call(t,l,h.extend({},F))),null!=n.top&&(Q.top=n.top-F.top+T),null!=n.left&&(Q.left=n.left-F.left+m),"using"in n?n.using.call(t,Q):q.css(Q)}},h.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(m){h.offset.setOffset(this,t,m)});var n,l,c=this[0];return c?c.getClientRects().length?{top:(n=c.getBoundingClientRect()).top+(l=c.ownerDocument.defaultView).pageYOffset,left:n.left+l.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,n,l,c=this[0],m={top:0,left:0};if("fixed"===h.css(c,"position"))n=c.getBoundingClientRect();else{for(n=this.offset(),l=c.ownerDocument,t=c.offsetParent||l.documentElement;t&&(t===l.body||t===l.documentElement)&&"static"===h.css(t,"position");)t=t.parentNode;t&&t!==c&&1===t.nodeType&&((m=h(t).offset()).top+=h.css(t,"borderTopWidth",!0),m.left+=h.css(t,"borderLeftWidth",!0))}return{top:n.top-m.top-h.css(c,"marginTop",!0),left:n.left-m.left-h.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===h.css(t,"position");)t=t.offsetParent;return t||Le})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var l="pageYOffset"===n;h.fn[t]=function(c){return Et(this,function(m,x,T){var F;if(_(m)?F=m:9===m.nodeType&&(F=m.defaultView),void 0===T)return F?F[n]:m[x];F?F.scrollTo(l?F.pageXOffset:T,l?T:F.pageYOffset):m[x]=T},t,c,arguments.length)}}),h.each(["top","left"],function(t,n){h.cssHooks[n]=Fe(A.pixelPosition,function(l,c){if(c)return c=Ze(l,n),He.test(c)?h(l).position()[n]+"px":c})}),h.each({Height:"height",Width:"width"},function(t,n){h.each({padding:"inner"+t,content:n,"":"outer"+t},function(l,c){h.fn[c]=function(m,x){var T=arguments.length&&(l||"boolean"!=typeof m),F=l||(!0===m||!0===x?"margin":"border");return Et(this,function(H,M,q){var Q;return _(H)?0===c.indexOf("outer")?H["inner"+t]:H.document.documentElement["client"+t]:9===H.nodeType?(Q=H.documentElement,Math.max(H.body["scroll"+t],Q["scroll"+t],H.body["offset"+t],Q["offset"+t],Q["client"+t])):void 0===q?h.css(H,M,F):h.style(H,M,q,F)},n,T?m:void 0,T)}})}),h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,n){h.fn[n]=function(l){return this.on(n,l)}}),h.fn.extend({bind:function(t,n,l){return this.on(t,null,n,l)},unbind:function(t,n){return this.off(t,null,n)},delegate:function(t,n,l,c){return this.on(n,t,l,c)},undelegate:function(t,n,l){return 1===arguments.length?this.off(t,"**"):this.off(n,t||"**",l)},hover:function(t,n){return this.mouseenter(t).mouseleave(n||t)}}),h.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){h.fn[n]=function(l,c){return 0<arguments.length?this.on(n,null,l,c):this.trigger(n)}});var In=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;h.proxy=function(t,n){var l,c,m;if("string"==typeof n&&(l=t[n],n=t,t=l),C(t))return c=d.call(arguments,2),(m=function(){return t.apply(n||this,c.concat(d.call(arguments)))}).guid=t.guid=t.guid||h.guid++,m},h.holdReady=function(t){t?h.readyWait++:h.ready(!0)},h.isArray=Array.isArray,h.parseJSON=JSON.parse,h.nodeName=qe,h.isFunction=C,h.isWindow=_,h.camelCase=wt,h.type=Y,h.now=Date.now,h.isNumeric=function(t){var n=h.type(t);return("number"===n||"string"===n)&&!isNaN(t-parseFloat(t))},h.trim=function(t){return null==t?"":(t+"").replace(In,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return h});var Bn=e.jQuery,Mn=e.$;return h.noConflict=function(t){return e.$===h&&(e.$=Mn),t&&e.jQuery===h&&(e.jQuery=Bn),h},void 0===i&&(e.jQuery=e.$=h),h}),function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((e="undefined"!=typeof globalThis?globalThis:e||self).Popper={})}(this,function(e){"use strict";function i(k){if(null==k)return window;if("[object Window]"!==k.toString()){var I=k.ownerDocument;return I&&I.defaultView||window}return k}function s(k){return k instanceof i(k).Element||k instanceof Element}function u(k){return k instanceof i(k).HTMLElement||k instanceof HTMLElement}function d(k){return"undefined"!=typeof ShadowRoot&&(k instanceof i(k).ShadowRoot||k instanceof ShadowRoot)}var r=Math.max,o=Math.min,a=Math.round;function p(){var k=navigator.userAgentData;return null!=k&&k.brands?k.brands.map(function(I){return I.brand+"/"+I.version}).join(" "):navigator.userAgent}function y(){return!/^((?!chrome|android).)*safari/i.test(p())}function w(k,I,j){void 0===I&&(I=!1),void 0===j&&(j=!1);var X=k.getBoundingClientRect(),ce=1,ee=1;I&&u(k)&&(ce=k.offsetWidth>0&&a(X.width)/k.offsetWidth||1,ee=k.offsetHeight>0&&a(X.height)/k.offsetHeight||1);var de=(s(k)?i(k):window).visualViewport,se=!y()&&j,he=(X.left+(se&&de?de.offsetLeft:0))/ce,Ee=(X.top+(se&&de?de.offsetTop:0))/ee,we=X.width/ce,pe=X.height/ee;return{width:we,height:pe,top:Ee,right:he+we,bottom:Ee+pe,left:he,x:he,y:Ee}}function O(k){var I=i(k);return{scrollLeft:I.pageXOffset,scrollTop:I.pageYOffset}}function R(k){return k?(k.nodeName||"").toLowerCase():null}function A(k){return((s(k)?k.ownerDocument:k.document)||window.document).documentElement}function C(k){return w(A(k)).left+O(k).scrollLeft}function _(k){return i(k).getComputedStyle(k)}function D(k){var I=_(k);return/auto|scroll|overlay|hidden/.test(I.overflow+I.overflowY+I.overflowX)}function N(k,I,j){void 0===j&&(j=!1);var X,ce,pe,Ye,He,ze,ee=u(I),de=u(I)&&(Ye=(pe=I).getBoundingClientRect(),He=a(Ye.width)/pe.offsetWidth||1,ze=a(Ye.height)/pe.offsetHeight||1,1!==He||1!==ze),se=A(I),he=w(k,de,j),Ee={scrollLeft:0,scrollTop:0},we={x:0,y:0};return(ee||!ee&&!j)&&(("body"!==R(I)||D(se))&&(Ee=(X=I)!==i(X)&&u(X)?{scrollLeft:(ce=X).scrollLeft,scrollTop:ce.scrollTop}:O(X)),u(I)?((we=w(I,!0)).x+=I.clientLeft,we.y+=I.clientTop):se&&(we.x=C(se))),{x:he.left+Ee.scrollLeft-we.x,y:he.top+Ee.scrollTop-we.y,width:he.width,height:he.height}}function Z(k){var I=w(k),j=k.offsetWidth,X=k.offsetHeight;return Math.abs(I.width-j)<=1&&(j=I.width),Math.abs(I.height-X)<=1&&(X=I.height),{x:k.offsetLeft,y:k.offsetTop,width:j,height:X}}function Y(k){return"html"===R(k)?k:k.assignedSlot||k.parentNode||(d(k)?k.host:null)||A(k)}function re(k){return["html","body","#document"].indexOf(R(k))>=0?k.ownerDocument.body:u(k)&&D(k)?k:re(Y(k))}function h(k,I){var j;void 0===I&&(I=[]);var X=re(k),ce=X===(null==(j=k.ownerDocument)?void 0:j.body),ee=i(X),de=ce?[ee].concat(ee.visualViewport||[],D(X)?X:[]):X,se=I.concat(de);return ce?se:se.concat(h(Y(de)))}function ie(k){return["table","td","th"].indexOf(R(k))>=0}function ye(k){return u(k)&&"fixed"!==_(k).position?k.offsetParent:null}function Oe(k){for(var I=i(k),j=ye(k);j&&ie(j)&&"static"===_(j).position;)j=ye(j);return j&&("html"===R(j)||"body"===R(j)&&"static"===_(j).position)?I:j||function(X){var ce=/firefox/i.test(p());if(/Trident/i.test(p())&&u(X)&&"fixed"===_(X).position)return null;var ee=Y(X);for(d(ee)&&(ee=ee.host);u(ee)&&["html","body"].indexOf(R(ee))<0;){var de=_(ee);if("none"!==de.transform||"none"!==de.perspective||"paint"===de.contain||-1!==["transform","perspective"].indexOf(de.willChange)||ce&&"filter"===de.willChange||ce&&de.filter&&"none"!==de.filter)return ee;ee=ee.parentNode}return null}(k)||I}var _e="top",Ue="bottom",qe="right",nt="left",Bt="auto",ft=[_e,Ue,qe,nt],Ve="start",ut="end",Dt="viewport",xe="popper",rt=ft.reduce(function(k,I){return k.concat([I+"-"+Ve,I+"-"+ut])},[]),jt=[].concat(ft,[Bt]).reduce(function(k,I){return k.concat([I,I+"-"+Ve,I+"-"+ut])},[]),Pt=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Lt(k){var I=new Map,j=new Set,X=[];function ce(ee){j.add(ee.name),[].concat(ee.requires||[],ee.requiresIfExists||[]).forEach(function(de){if(!j.has(de)){var se=I.get(de);se&&ce(se)}}),X.push(ee)}return k.forEach(function(ee){I.set(ee.name,ee)}),k.forEach(function(ee){j.has(ee.name)||ce(ee)}),X}function yt(k){return k.split("-")[0]}function Mt(k,I){var j=I.getRootNode&&I.getRootNode();if(k.contains(I))return!0;if(j&&d(j)){var X=I;do{if(X&&k.isSameNode(X))return!0;X=X.parentNode||X.host}while(X)}return!1}function Ht(k){return Object.assign({},k,{left:k.x,top:k.y,right:k.x+k.width,bottom:k.y+k.height})}function Et(k,I,j){return I===Dt?Ht(function(X,ce){var ee=i(X),de=A(X),se=ee.visualViewport,he=de.clientWidth,Ee=de.clientHeight,we=0,pe=0;if(se){he=se.width,Ee=se.height;var Ye=y();(Ye||!Ye&&"fixed"===ce)&&(we=se.offsetLeft,pe=se.offsetTop)}return{width:he,height:Ee,x:we+C(X),y:pe}}(k,j)):s(I)?((ee=w(X=I,!1,"fixed"===j)).top=ee.top+X.clientTop,ee.left=ee.left+X.clientLeft,ee.bottom=ee.top+X.clientHeight,ee.right=ee.left+X.clientWidth,ee.width=X.clientWidth,ee.height=X.clientHeight,ee.x=ee.left,ee.y=ee.top,ee):Ht(function(X){var ce,ee=A(X),de=O(X),se=null==(ce=X.ownerDocument)?void 0:ce.body,he=r(ee.scrollWidth,ee.clientWidth,se?se.scrollWidth:0,se?se.clientWidth:0),Ee=r(ee.scrollHeight,ee.clientHeight,se?se.scrollHeight:0,se?se.clientHeight:0),we=-de.scrollLeft+C(X),pe=-de.scrollTop;return"rtl"===_(se||ee).direction&&(we+=r(ee.clientWidth,se?se.clientWidth:0)-he),{width:he,height:Ee,x:we,y:pe}}(A(k)));var X,ee}function Ft(k){return k.split("-")[1]}function si(k){return["top","bottom"].indexOf(k)>=0?"x":"y"}function wt(k){var I,j=k.reference,X=k.element,ce=k.placement,ee=ce?yt(ce):null,de=ce?Ft(ce):null,se=j.x+j.width/2-X.width/2,he=j.y+j.height/2-X.height/2;switch(ee){case _e:I={x:se,y:j.y-X.height};break;case Ue:I={x:se,y:j.y+j.height};break;case qe:I={x:j.x+j.width,y:he};break;case nt:I={x:j.x-X.width,y:he};break;default:I={x:j.x,y:j.y}}var Ee=ee?si(ee):null;if(null!=Ee){var we="y"===Ee?"height":"width";switch(de){case Ve:I[Ee]=I[Ee]-(j[we]/2-X[we]/2);break;case ut:I[Ee]=I[Ee]+(j[we]/2-X[we]/2)}}return I}function ai(k){return Object.assign({},{top:0,right:0,bottom:0,left:0},k)}function f(k,I){return I.reduce(function(j,X){return j[X]=k,j},{})}function b(k,I){void 0===I&&(I={});var X=I.placement,ce=void 0===X?k.placement:X,ee=I.strategy,de=void 0===ee?k.strategy:ee,se=I.boundary,he=void 0===se?"clippingParents":se,Ee=I.rootBoundary,we=void 0===Ee?Dt:Ee,pe=I.elementContext,Ye=void 0===pe?xe:pe,He=I.altBoundary,ze=void 0!==He&&He,We=I.padding,Be=void 0===We?0:We,ct=ai("number"!=typeof Be?Be:f(Be,ft)),$e=k.rects.popper,Ze=k.elements[ze?Ye===xe?"reference":xe:Ye],Fe=function oi(k,I,j,X){var he,Ee,we,ce="clippingParents"===I?(Ee=h(Y(he=k)),s(we=["absolute","fixed"].indexOf(_(he).position)>=0&&u(he)?Oe(he):he)?Ee.filter(function(pe){return s(pe)&&Mt(pe,we)&&"body"!==R(pe)}):[]):[].concat(I),ee=[].concat(ce,[j]),se=ee.reduce(function(he,Ee){var we=Et(k,Ee,X);return he.top=r(we.top,he.top),he.right=o(we.right,he.right),he.bottom=o(we.bottom,he.bottom),he.left=r(we.left,he.left),he},Et(k,ee[0],X));return se.width=se.right-se.left,se.height=se.bottom-se.top,se.x=se.left,se.y=se.top,se}(s(Ze)?Ze:Ze.contextElement||A(k.elements.popper),he,we,de),je=w(k.elements.reference),et=wt({reference:je,element:$e,strategy:"absolute",placement:ce}),tt=Ht(Object.assign({},$e,et)),Ke=Ye===xe?tt:je,pt={top:Fe.top-Ke.top+ct.top,bottom:Ke.bottom-Fe.bottom+ct.bottom,left:Fe.left-Ke.left+ct.left,right:Ke.right-Fe.right+ct.right},It=k.modifiersData.offset;if(Ye===xe&&It){var Gt=It[ce];Object.keys(pt).forEach(function(Vt){var Kt=[qe,Ue].indexOf(Vt)>=0?1:-1,Nt=[_e,Ue].indexOf(Vt)>=0?"y":"x";pt[Vt]+=Gt[Nt]*Kt})}return pt}var U={placement:"bottom",modifiers:[],strategy:"absolute"};function te(){for(var k=arguments.length,I=new Array(k),j=0;j<k;j++)I[j]=arguments[j];return!I.some(function(X){return!(X&&"function"==typeof X.getBoundingClientRect)})}function oe(k){void 0===k&&(k={});var j=k.defaultModifiers,X=void 0===j?[]:j,ce=k.defaultOptions,ee=void 0===ce?U:ce;return function(de,se,he){void 0===he&&(he=ee);var Ee,we,pe={placement:"bottom",orderedModifiers:[],options:Object.assign({},U,ee),modifiersData:{},elements:{reference:de,popper:se},attributes:{},styles:{}},Ye=[],He=!1,ze={state:pe,setOptions:function(Be){var ct="function"==typeof Be?Be(pe.options):Be;We(),pe.options=Object.assign({},ee,pe.options,ct),pe.scrollParents={reference:s(de)?h(de):de.contextElement?h(de.contextElement):[],popper:h(se)};var st,$e,Fe,je,Ze=(st=[].concat(X,pe.options.modifiers),$e=st.reduce(function(Fe,je){var et=Fe[je.name];return Fe[je.name]=et?Object.assign({},et,je,{options:Object.assign({},et.options,je.options),data:Object.assign({},et.data,je.data)}):je,Fe},{}),Fe=Object.keys($e).map(function(Fe){return $e[Fe]}),je=Lt(Fe),Pt.reduce(function(et,tt){return et.concat(je.filter(function(Ke){return Ke.phase===tt}))},[]));return pe.orderedModifiers=Ze.filter(function(Fe){return Fe.enabled}),pe.orderedModifiers.forEach(function(Fe){var et=Fe.options,Ke=Fe.effect;if("function"==typeof Ke){var pt=Ke({state:pe,name:Fe.name,instance:ze,options:void 0===et?{}:et});Ye.push(pt||function(){})}}),ze.update()},forceUpdate:function(){if(!He){var Be=pe.elements,ct=Be.reference,st=Be.popper;if(te(ct,st)){pe.rects={reference:N(ct,Oe(st),"fixed"===pe.options.strategy),popper:Z(st)},pe.reset=!1,pe.placement=pe.options.placement,pe.orderedModifiers.forEach(function(Ke){return pe.modifiersData[Ke.name]=Object.assign({},Ke.data)});for(var $e=0;$e<pe.orderedModifiers.length;$e++)if(!0!==pe.reset){var Ze=pe.orderedModifiers[$e],Fe=Ze.fn,je=Ze.options;"function"==typeof Fe&&(pe=Fe({state:pe,options:void 0===je?{}:je,name:Ze.name,instance:ze})||pe)}else pe.reset=!1,$e=-1}}},update:(Ee=function(){return new Promise(function(Be){ze.forceUpdate(),Be(pe)})},function(){return we||(we=new Promise(function(Be){Promise.resolve().then(function(){we=void 0,Be(Ee())})})),we}),destroy:function(){We(),He=!0}};if(!te(de,se))return ze;function We(){Ye.forEach(function(Be){return Be()}),Ye=[]}return ze.setOptions(he).then(function(Be){!He&&he.onFirstUpdate&&he.onFirstUpdate(Be)}),ze}}var ue={passive:!0},ae={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(k){var I=k.state,j=k.instance,X=k.options,ce=X.scroll,ee=void 0===ce||ce,de=X.resize,se=void 0===de||de,he=i(I.elements.popper),Ee=[].concat(I.scrollParents.reference,I.scrollParents.popper);return ee&&Ee.forEach(function(we){we.addEventListener("scroll",j.update,ue)}),se&&he.addEventListener("resize",j.update,ue),function(){ee&&Ee.forEach(function(we){we.removeEventListener("scroll",j.update,ue)}),se&&he.removeEventListener("resize",j.update,ue)}},data:{}},Me={name:"popperOffsets",enabled:!0,phase:"read",fn:function(k){var I=k.state;I.modifiersData[k.name]=wt({reference:I.rects.reference,element:I.rects.popper,strategy:"absolute",placement:I.placement})},data:{}},Ne={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Le(k){var I,j=k.popper,X=k.popperRect,ce=k.placement,ee=k.variation,de=k.offsets,se=k.position,he=k.gpuAcceleration,Ee=k.adaptive,we=k.roundOffsets,pe=k.isFixed,Ye=de.x,He=void 0===Ye?0:Ye,ze=de.y,We=void 0===ze?0:ze,Be="function"==typeof we?we({x:He,y:We}):{x:He,y:We};He=Be.x,We=Be.y;var ct=de.hasOwnProperty("x"),st=de.hasOwnProperty("y"),$e=nt,Ze=_e,Fe=window;if(Ee){var je=Oe(j),et="clientHeight",tt="clientWidth";je===i(j)&&"static"!==_(je=A(j)).position&&"absolute"===se&&(et="scrollHeight",tt="scrollWidth"),(ce===_e||(ce===nt||ce===qe)&&ee===ut)&&(Ze=Ue,We-=(pe&&je===Fe&&Fe.visualViewport?Fe.visualViewport.height:je[et])-X.height,We*=he?1:-1),(ce===nt||(ce===_e||ce===Ue)&&ee===ut)&&($e=qe,He-=(pe&&je===Fe&&Fe.visualViewport?Fe.visualViewport.width:je[tt])-X.width,He*=he?1:-1)}var Ke,Gt,Kt,Nt,pt=Object.assign({position:se},Ee&&Ne),It=!0===we?(Kt=(Gt={x:He,y:We}).y,Nt=window.devicePixelRatio||1,{x:a(Gt.x*Nt)/Nt||0,y:a(Kt*Nt)/Nt||0}):{x:He,y:We};return He=It.x,We=It.y,Object.assign({},pt,he?((Ke={})[Ze]=st?"0":"",Ke[$e]=ct?"0":"",Ke.transform=(Fe.devicePixelRatio||1)<=1?"translate("+He+"px, "+We+"px)":"translate3d("+He+"px, "+We+"px, 0)",Ke):((I={})[Ze]=st?We+"px":"",I[$e]=ct?He+"px":"",I.transform="",I))}var Te={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(k){var I=k.state,j=k.options,X=j.gpuAcceleration,ce=void 0===X||X,ee=j.adaptive,de=void 0===ee||ee,se=j.roundOffsets,he=void 0===se||se,Ee={placement:yt(I.placement),variation:Ft(I.placement),popper:I.elements.popper,popperRect:I.rects.popper,gpuAcceleration:ce,isFixed:"fixed"===I.options.strategy};null!=I.modifiersData.popperOffsets&&(I.styles.popper=Object.assign({},I.styles.popper,Le(Object.assign({},Ee,{offsets:I.modifiersData.popperOffsets,position:I.options.strategy,adaptive:de,roundOffsets:he})))),null!=I.modifiersData.arrow&&(I.styles.arrow=Object.assign({},I.styles.arrow,Le(Object.assign({},Ee,{offsets:I.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:he})))),I.attributes.popper=Object.assign({},I.attributes.popper,{"data-popper-placement":I.placement})},data:{}},Qe={name:"applyStyles",enabled:!0,phase:"write",fn:function(k){var I=k.state;Object.keys(I.elements).forEach(function(j){var X=I.styles[j]||{},ce=I.attributes[j]||{},ee=I.elements[j];u(ee)&&R(ee)&&(Object.assign(ee.style,X),Object.keys(ce).forEach(function(de){var se=ce[de];!1===se?ee.removeAttribute(de):ee.setAttribute(de,!0===se?"":se)}))})},effect:function(k){var I=k.state,j={popper:{position:I.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(I.elements.popper.style,j.popper),I.styles=j,I.elements.arrow&&Object.assign(I.elements.arrow.style,j.arrow),function(){Object.keys(I.elements).forEach(function(X){var ce=I.elements[X],ee=I.attributes[X]||{},de=Object.keys(I.styles.hasOwnProperty(X)?I.styles[X]:j[X]).reduce(function(se,he){return se[he]="",se},{});u(ce)&&R(ce)&&(Object.assign(ce.style,de),Object.keys(ee).forEach(function(se){ce.removeAttribute(se)}))})}},requires:["computeStyles"]},Ie={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(k){var I=k.state,X=k.name,ce=k.options.offset,ee=void 0===ce?[0,0]:ce,de=jt.reduce(function(we,pe){return we[pe]=(He=I.rects,ze=ee,We=yt(Ye=pe),Be=[nt,_e].indexOf(We)>=0?-1:1,st=(st=(ct="function"==typeof ze?ze(Object.assign({},He,{placement:Ye})):ze)[0])||0,$e=(($e=ct[1])||0)*Be,[nt,qe].indexOf(We)>=0?{x:$e,y:st}:{x:st,y:$e}),we;var Ye,He,ze,We,Be,ct,st,$e},{}),se=de[I.placement],Ee=se.y;null!=I.modifiersData.popperOffsets&&(I.modifiersData.popperOffsets.x+=se.x,I.modifiersData.popperOffsets.y+=Ee),I.modifiersData[X]=de}},xt={left:"right",right:"left",bottom:"top",top:"bottom"};function kt(k){return k.replace(/left|right|bottom|top/g,function(I){return xt[I]})}var pi={start:"end",end:"start"};function v(k){return k.replace(/start|end/g,function(I){return pi[I]})}var S={name:"flip",enabled:!0,phase:"main",fn:function(k){var I=k.state,j=k.options,X=k.name;if(!I.modifiersData[X]._skip){for(var ce=j.mainAxis,ee=void 0===ce||ce,de=j.altAxis,se=void 0===de||de,he=j.fallbackPlacements,Ee=j.padding,we=j.boundary,pe=j.rootBoundary,Ye=j.altBoundary,He=j.flipVariations,ze=void 0===He||He,We=j.allowedAutoPlacements,Be=I.options.placement,ct=yt(Be),st=he||(ct!==Be&&ze?function(Jt){if(yt(Jt)===Bt)return[];var Qt=kt(Jt);return[v(Jt),Qt,v(Qt)]}(Be):[kt(Be)]),$e=[Be].concat(st).reduce(function(Jt,Qt){return Jt.concat(yt(Qt)===Bt?function g(k,I){void 0===I&&(I={});var ce=I.boundary,ee=I.rootBoundary,de=I.padding,se=I.flipVariations,he=I.allowedAutoPlacements,Ee=void 0===he?jt:he,we=Ft(I.placement),pe=we?se?rt:rt.filter(function(ze){return Ft(ze)===we}):ft,Ye=pe.filter(function(ze){return Ee.indexOf(ze)>=0});0===Ye.length&&(Ye=pe);var He=Ye.reduce(function(ze,We){return ze[We]=b(k,{placement:We,boundary:ce,rootBoundary:ee,padding:de})[yt(We)],ze},{});return Object.keys(He).sort(function(ze,We){return He[ze]-He[We]})}(I,{placement:Qt,boundary:we,rootBoundary:pe,padding:Ee,flipVariations:ze,allowedAutoPlacements:We}):Qt)},[]),Ze=I.rects.reference,Fe=I.rects.popper,je=new Map,et=!0,tt=$e[0],Ke=0;Ke<$e.length;Ke++){var pt=$e[Ke],It=yt(pt),Gt=Ft(pt)===Ve,Vt=[_e,Ue].indexOf(It)>=0,Kt=Vt?"width":"height",Nt=b(I,{placement:pt,boundary:we,rootBoundary:pe,altBoundary:Ye,padding:Ee}),ht=Vt?Gt?qe:nt:Gt?Ue:_e;Ze[Kt]>Fe[Kt]&&(ht=kt(ht));var Ut=kt(ht),li=[];if(ee&&li.push(Nt[It]<=0),se&&li.push(Nt[ht]<=0,Nt[Ut]<=0),li.every(function(Jt){return Jt})){tt=pt,et=!1;break}je.set(pt,li)}if(et)for(var hi=function(Jt){var Qt=$e.find(function(bi){var Ci=je.get(bi);if(Ci)return Ci.slice(0,Jt).every(function(xi){return xi})});if(Qt)return tt=Qt,"break"},wi=ze?3:1;wi>0&&"break"!==hi(wi);wi--);I.placement!==tt&&(I.modifiersData[X]._skip=!0,I.placement=tt,I.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function P(k,I,j){return r(k,o(I,j))}var V={name:"preventOverflow",enabled:!0,phase:"main",fn:function(k){var Wi,Qi,I=k.state,j=k.options,X=k.name,ce=j.mainAxis,ee=void 0===ce||ce,de=j.altAxis,se=void 0!==de&&de,Ye=j.tether,He=void 0===Ye||Ye,ze=j.tetherOffset,We=void 0===ze?0:ze,Be=b(I,{boundary:j.boundary,rootBoundary:j.rootBoundary,padding:j.padding,altBoundary:j.altBoundary}),ct=yt(I.placement),st=Ft(I.placement),$e=!st,Ze=si(ct),Fe="x"===Ze?"y":"x",je=I.modifiersData.popperOffsets,et=I.rects.reference,tt=I.rects.popper,Ke="function"==typeof We?We(Object.assign({},I.rects,{placement:I.placement})):We,pt="number"==typeof Ke?{mainAxis:Ke,altAxis:Ke}:Object.assign({mainAxis:0,altAxis:0},Ke),It=I.modifiersData.offset?I.modifiersData.offset[I.placement]:null,Gt={x:0,y:0};if(je){if(ee){var Vt,Kt="y"===Ze?_e:nt,Nt="y"===Ze?Ue:qe,ht="y"===Ze?"height":"width",Ut=je[Ze],li=Ut+Be[Kt],hi=Ut-Be[Nt],wi=He?-tt[ht]/2:0,Jt=st===Ve?et[ht]:tt[ht],Qt=st===Ve?-tt[ht]:-et[ht],bi=I.elements.arrow,Ci=He&&bi?Z(bi):{width:0,height:0},xi=I.modifiersData["arrow#persistent"]?I.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ii=xi[Kt],Zt=xi[Nt],Ri=P(0,et[ht],Ci[ht]),_i=$e?et[ht]/2-wi-Ri-Ii-pt.mainAxis:Jt-Ri-Ii-pt.mainAxis,ln=$e?-et[ht]/2+wi+Ri+Zt+pt.mainAxis:Qt+Ri+Zt+pt.mainAxis,Bi=I.elements.arrow&&Oe(I.elements.arrow),gi=null!=(Vt=null==It?void 0:It[Ze])?Vt:0,Mi=Ut+ln-gi,Vi=P(He?o(li,Ut+_i-gi-(Bi?"y"===Ze?Bi.clientTop||0:Bi.clientLeft||0:0)):li,Ut,He?r(hi,Mi):hi);je[Ze]=Vi,Gt[Ze]=Vi-Ut}if(se){var Ni,mi=je[Fe],Pi="y"===Fe?"height":"width",Xi=mi+Be["x"===Ze?_e:nt],zi=mi-Be["x"===Ze?Ue:qe],ji=-1!==[_e,nt].indexOf(ct),Yi=null!=(Ni=null==It?void 0:It[Fe])?Ni:0,Li=ji?Xi:mi-et[Pi]-tt[Pi]-Yi+pt.altAxis,Ki=ji?mi+et[Pi]+tt[Pi]-Yi-pt.altAxis:zi,Ji=He&&ji?(Qi=P(Li,mi,Wi=Ki))>Wi?Wi:Qi:P(He?Li:Xi,mi,He?Ki:zi);je[Fe]=Ji,Gt[Fe]=Ji-mi}I.modifiersData[X]=Gt}},requiresIfExists:["offset"]},J={name:"arrow",enabled:!0,phase:"main",fn:function(k){var I,tt,Ke,j=k.state,X=k.name,ce=k.options,ee=j.elements.arrow,de=j.modifiersData.popperOffsets,se=yt(j.placement),he=si(se),Ee=[nt,qe].indexOf(se)>=0?"height":"width";if(ee&&de){var we=(Ke=j,ai("number"!=typeof(tt="function"==typeof(tt=ce.padding)?tt(Object.assign({},Ke.rects,{placement:Ke.placement})):tt)?tt:f(tt,ft))),pe=Z(ee),Ye="y"===he?_e:nt,He="y"===he?Ue:qe,ze=j.rects.reference[Ee]+j.rects.reference[he]-de[he]-j.rects.popper[Ee],We=de[he]-j.rects.reference[he],Be=Oe(ee),ct=Be?"y"===he?Be.clientHeight||0:Be.clientWidth||0:0,Fe=ct/2-pe[Ee]/2+(ze/2-We/2),je=P(we[Ye],Fe,ct-pe[Ee]-we[He]);j.modifiersData[X]=((I={})[he]=je,I.centerOffset=je-Fe,I)}},effect:function(k){var I=k.state,j=k.options.element,X=void 0===j?"[data-popper-arrow]":j;null!=X&&("string"!=typeof X||(X=I.elements.popper.querySelector(X)))&&Mt(I.elements.popper,X)&&(I.elements.arrow=X)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ge(k,I,j){return void 0===j&&(j={x:0,y:0}),{top:k.top-I.height-j.y,right:k.right-I.width+j.x,bottom:k.bottom-I.height+j.y,left:k.left-I.width-j.x}}function Ge(k){return[_e,qe,Ue,nt].some(function(I){return k[I]>=0})}var be={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(k){var I=k.state,j=k.name,X=I.rects.reference,ce=I.rects.popper,ee=I.modifiersData.preventOverflow,de=b(I,{elementContext:"reference"}),se=b(I,{altBoundary:!0}),he=ge(de,X),Ee=ge(se,ce,ee),we=Ge(he),pe=Ge(Ee);I.modifiersData[j]={referenceClippingOffsets:he,popperEscapeOffsets:Ee,isReferenceHidden:we,hasPopperEscaped:pe},I.attributes.popper=Object.assign({},I.attributes.popper,{"data-popper-reference-hidden":we,"data-popper-escaped":pe})}},Ot=oe({defaultModifiers:[ae,Me,Te,Qe]}),dt=[ae,Me,Te,Qe,Ie,S,V,J,be],Wt=oe({defaultModifiers:dt});e.applyStyles=Qe,e.arrow=J,e.computeStyles=Te,e.createPopper=Wt,e.createPopperLite=Ot,e.defaultModifiers=dt,e.detectOverflow=b,e.eventListeners=ae,e.flip=S,e.hide=be,e.offset=Ie,e.popperGenerator=oe,e.popperOffsets=Me,e.preventOverflow=V,Object.defineProperty(e,"__esModule",{value:!0})}),function(e){e.version={versionStr:"3.1.0",major:parseInt("3",10),minor:parseInt("1",10),revision:parseInt("0",10)};var d,i={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},s=Object.prototype.toString,u=Object.prototype.hasOwnProperty;e.isFunction=function(d){return"function"===e.type(d)},e.isArray=Array.isArray||function(d){return"array"===e.type(d)},e.isWindow=function(d){return d&&"object"==typeof d&&"setInterval"in d},e.type=function(d){return null==d?String(d):i[s.call(d)]||"object"},e.isPlainObject=function(d){if(!d||"object"!==OpenSeadragon.type(d)||d.nodeType||e.isWindow(d)||d.constructor&&!u.call(d,"constructor")&&!u.call(d.constructor.prototype,"isPrototypeOf"))return!1;var r;for(var o in d)r=o;return void 0===r||u.call(d,r)},e.isEmptyObject=function(d){for(var r in d)return!1;return!0},e.freezeObject=function(d){return e.freezeObject=Object.freeze?Object.freeze:function(r){return r},e.freezeObject(d)},e.supportsCanvas=(d=document.createElement("canvas"),!(!e.isFunction(d.getContext)||!d.getContext("2d"))),e.isCanvasTainted=function(d){var r=!1;try{d.getContext("2d").getImageData(0,0,1,1)}catch(o){r=!0}return r},e.supportsAddEventListener=!(!document.documentElement.addEventListener||!document.addEventListener),e.supportsRemoveEventListener=!(!document.documentElement.removeEventListener||!document.removeEventListener),e.supportsEventListenerOptions=function(){var d=0;if(e.supportsAddEventListener)try{var r={get capture(){return d++,!1},get once(){return d++,!1},get passive(){return d++,!1}};window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch(o){d=0}return d>=3}(),e.getCurrentPixelDensityRatio=function(){if(e.supportsCanvas){var d=document.createElement("canvas").getContext("2d"),r=window.devicePixelRatio||1,o=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1;return Math.max(r,1)/o}return 1},e.pixelDensityRatio=e.getCurrentPixelDensityRatio()}(OpenSeadragon),function(e){e.extend=function(){var o,a,p,y,w,O,R=arguments[0]||{},A=arguments.length,C=!1,_=1;for("boolean"==typeof R&&(C=R,R=arguments[1]||{},_=2),"object"!=typeof R&&!OpenSeadragon.isFunction(R)&&(R={}),A===_&&(R=this,--_);_<A;_++)if(null!==(o=arguments[_])||void 0!==o)for(a in o)p=R[a],R!==(y=o[a])&&(C&&y&&(OpenSeadragon.isPlainObject(y)||(w=OpenSeadragon.isArray(y)))?(w?(w=!1,O=p&&OpenSeadragon.isArray(p)?p:[]):O=p&&OpenSeadragon.isPlainObject(p)?p:{},R[a]=OpenSeadragon.extend(C,O,y)):void 0!==y&&(R[a]=y));return R},e.extend(e,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:function(){if("object"!=typeof navigator)return!1;var o=navigator.userAgent;return"string"==typeof o&&(-1!==o.indexOf("iPhone")||-1!==o.indexOf("iPad")||-1!==o.indexOf("iPod"))}(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},SIGNAL:"----seadragon----",delegate:function(o,a){return function(){var p=arguments;return void 0===p&&(p=[]),a.apply(o,p)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(o){return e._viewers.get(this.getElement(o))},getElement:function(o){return"string"==typeof o&&(o=document.getElementById(o)),o},getElementPosition:function(o){var p,y,a=new e.Point;for(y=r(o=e.getElement(o),p="fixed"===e.getElementStyle(o).position);y;)a.x+=o.offsetLeft,a.y+=o.offsetTop,p&&(a=a.plus(e.getPageScroll())),y=r(o=y,p="fixed"===e.getElementStyle(o).position);return a},getElementOffset:function(o){var p,y,a=(o=e.getElement(o))&&o.ownerDocument,w={top:0,left:0};return a?(p=a.documentElement,void 0!==o.getBoundingClientRect&&(w=o.getBoundingClientRect()),new e.Point(w.left+((y=a===a.window?a:9===a.nodeType&&(a.defaultView||a.parentWindow)).pageXOffset||p.scrollLeft)-(p.clientLeft||0),w.top+(y.pageYOffset||p.scrollTop)-(p.clientTop||0))):new e.Point},getElementSize:function(o){return o=e.getElement(o),new e.Point(o.clientWidth,o.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(o){return(o=e.getElement(o)).currentStyle}:function(o){return o=e.getElement(o),window.getComputedStyle(o,"")},getCssPropertyWithVendorPrefix:function(o){var a={};return e.getCssPropertyWithVendorPrefix=function(p){if(void 0!==a[p])return a[p];var y=document.createElement("div").style,w=null;if(void 0!==y[p])w=p;else for(var O=["Webkit","Moz","MS","O","webkit","moz","ms","o"],R=e.capitalizeFirstLetter(p),A=0;A<O.length;A++){var C=O[A]+R;if(void 0!==y[C]){w=C;break}}return a[p]=w,w},e.getCssPropertyWithVendorPrefix(o)},capitalizeFirstLetter:function(o){return o.charAt(0).toUpperCase()+o.slice(1)},positiveModulo:function(o,a){var p=o%a;return p<0&&(p+=a),p},pointInElement:function(o,a){o=e.getElement(o);var p=e.getElementOffset(o),y=e.getElementSize(o);return a.x>=p.x&&a.x<p.x+y.x&&a.y<p.y+y.y&&a.y>=p.y},getMousePosition:function(o){if("number"==typeof o.pageX)e.getMousePosition=function(a){var p=new e.Point;return p.x=a.pageX,p.y=a.pageY,p};else{if("number"!=typeof o.clientX)throw new Error("Unknown event mouse position, no known technique.");e.getMousePosition=function(a){var p=new e.Point;return p.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,p.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop,p}}return e.getMousePosition(o)},getPageScroll:function(){var o=document.documentElement||{},a=document.body||{};if("number"==typeof window.pageXOffset)e.getPageScroll=function(){return new e.Point(window.pageXOffset,window.pageYOffset)};else if(a.scrollLeft||a.scrollTop)e.getPageScroll=function(){return new e.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!o.scrollLeft&&!o.scrollTop)return new e.Point(0,0);e.getPageScroll=function(){return new e.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return e.getPageScroll()},setPageScroll:function(o){if(void 0!==window.scrollTo)e.setPageScroll=function(y){window.scrollTo(y.x,y.y)};else{var a=e.getPageScroll();if(a.x===o.x&&a.y===o.y)return;document.body.scrollLeft=o.x,document.body.scrollTop=o.y;var p=e.getPageScroll();if(p.x!==a.x&&p.y!==a.y)return void(e.setPageScroll=function(y){document.body.scrollLeft=y.x,document.body.scrollTop=y.y});if(document.documentElement.scrollLeft=o.x,document.documentElement.scrollTop=o.y,(p=e.getPageScroll()).x!==a.x&&p.y!==a.y)return void(e.setPageScroll=function(y){document.documentElement.scrollLeft=y.x,document.documentElement.scrollTop=y.y});e.setPageScroll=function(y){}}e.setPageScroll(o)},getWindowSize:function(){var o=document.documentElement||{},a=document.body||{};if("number"==typeof window.innerWidth)e.getWindowSize=function(){return new e.Point(window.innerWidth,window.innerHeight)};else if(o.clientWidth||o.clientHeight)e.getWindowSize=function(){return new e.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!a.clientWidth&&!a.clientHeight)throw new Error("Unknown window size, no known technique.");e.getWindowSize=function(){return new e.Point(document.body.clientWidth,document.body.clientHeight)}}return e.getWindowSize()},makeCenteredNode:function(o){o=e.getElement(o);var a=[e.makeNeutralElement("div"),e.makeNeutralElement("div"),e.makeNeutralElement("div")];return e.extend(a[0].style,{display:"table",height:"100%",width:"100%"}),e.extend(a[1].style,{display:"table-row"}),e.extend(a[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),a[0].appendChild(a[1]),a[1].appendChild(a[2]),a[2].appendChild(o),a[0]},makeNeutralElement:function(o){var a=document.createElement(o),p=a.style;return p.background="transparent none",p.border="none",p.margin="0px",p.padding="0px",p.position="static",a},now:function(){return e.now=Date.now?Date.now:function(){return(new Date).getTime()},e.now()},makeTransparentImage:function(o){var a=e.makeNeutralElement("img");return a.src=o,a},setElementOpacity:function(o,a,p){var y;o=e.getElement(o),p&&!e.Browser.alpha&&(a=Math.round(a)),e.Browser.opacity?o.style.opacity=a<1?a:"":a<1?(y=Math.round(100*a),o.style.filter="alpha(opacity="+y+")"):o.style.filter=""},setElementTouchActionNone:function(o){void 0!==(o=e.getElement(o)).style.touchAction?o.style.touchAction="none":void 0!==o.style.msTouchAction&&(o.style.msTouchAction="none")},setElementPointerEvents:function(o,a){void 0!==(o=e.getElement(o)).style&&void 0!==o.style.pointerEvents&&(o.style.pointerEvents=a)},setElementPointerEventsNone:function(o){e.setElementPointerEvents(o,"none")},addClass:function(o,a){(o=e.getElement(o)).className?-1===(" "+o.className+" ").indexOf(" "+a+" ")&&(o.className+=" "+a):o.className=a},indexOf:function(o,a,p){return this.indexOf=Array.prototype.indexOf?function(y,w,O){return y.indexOf(w,O)}:function(y,w,O){var R,C,A=O||0;if(!y)throw new TypeError;if(0===(C=y.length)||A>=C)return-1;for(A<0&&(A=C-Math.abs(A)),R=A;R<C;R++)if(y[R]===w)return R;return-1},this.indexOf(o,a,p)},removeClass:function(o,a){var p,w,y=[];for(p=(o=e.getElement(o)).className.split(/\s+/),w=0;w<p.length;w++)p[w]&&p[w]!==a&&y.push(p[w]);o.className=y.join(" ")},normalizeEventListenerOptions:function(o){return void 0!==o?"boolean"==typeof o?e.supportsEventListenerOptions?{capture:o}:o:e.supportsEventListenerOptions?o:void 0!==o.capture&&o.capture:!!e.supportsEventListenerOptions&&{capture:!1}},addEvent:function(){if(e.supportsAddEventListener)return function(o,a,p,y){y=e.normalizeEventListenerOptions(y),(o=e.getElement(o)).addEventListener(a,p,y)};if(document.documentElement.attachEvent&&document.attachEvent)return function(o,a,p){(o=e.getElement(o)).attachEvent("on"+a,p)};throw new Error("No known event model.")}(),removeEvent:function(){if(e.supportsRemoveEventListener)return function(o,a,p,y){y=e.normalizeEventListenerOptions(y),(o=e.getElement(o)).removeEventListener(a,p,y)};if(document.documentElement.detachEvent&&document.detachEvent)return function(o,a,p){(o=e.getElement(o)).detachEvent("on"+a,p)};throw new Error("No known event model.")}(),cancelEvent:function(o){o.preventDefault()},eventIsCanceled:function(o){return o.defaultPrevented},stopEvent:function(o){o.stopPropagation()},createCallback:function(o,a){var y,p=[];for(y=2;y<arguments.length;y++)p.push(arguments[y]);return function(){var O,w=p.concat([]);for(O=0;O<arguments.length;O++)w.push(arguments[O]);return a.apply(o,w)}},getUrlParameter:function(o){return d[o]||null},getUrlProtocol:function(o){var a=o.match(/^([a-z]+:)\/\//i);return null===a?window.location.protocol:a[1].toLowerCase()},createAjaxRequest:function(o){var a;try{a=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(p){a=!1}if(a)e.createAjaxRequest=window.XMLHttpRequest?function(p){return p?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");e.createAjaxRequest=function(){return new XMLHttpRequest}}return e.createAjaxRequest(o)},makeAjaxRequest:function(o,a,p){var y,w,O,R;e.isPlainObject(o)&&(a=o.success,p=o.error,y=o.withCredentials,w=o.headers,O=o.responseType||null,R=o.postData||null,o=o.url);var A=e.getUrlProtocol(o),C=e.createAjaxRequest("file:"===A);if(!e.isFunction(a))throw new Error("makeAjaxRequest requires a success callback");C.onreadystatechange=function(){4===C.readyState&&(C.onreadystatechange=function(){},C.status>=200&&C.status<300||0===C.status&&"http:"!==A&&"https:"!==A?a(C):e.isFunction(p)?p(C):e.console.error("AJAX request returned %d: %s",C.status,o))};var _=R?"POST":"GET";try{if(C.open(_,o,!0),O&&(C.responseType=O),w)for(var D in w)Object.prototype.hasOwnProperty.call(w,D)&&w[D]&&C.setRequestHeader(D,w[D]);y&&(C.withCredentials=!0),C.send(R)}catch(N){e.console.error("%s while making AJAX request: %s",N.name,N.message),C.onreadystatechange=function(){},e.isFunction(p)&&p(C,N)}return C},jsonp:function(o){var a,p=o.url,y=document.head||document.getElementsByTagName("head")[0]||document.documentElement,w=o.callbackName||"openseadragon"+e.now(),O=window[w],A=o.param||"callback",C=o.callback;p=p.replace(/(=)\?(&|$)|\?\?/i,"$1"+w+"$2"),p+=(/\?/.test(p)?"&":"?")+A+"="+w,window[w]=function(_){if(O)window[w]=O;else try{delete window[w]}catch(D){}C&&e.isFunction(C)&&C(_)},a=document.createElement("script"),(void 0!==o.async||!1!==o.async)&&(a.async="async"),o.scriptCharset&&(a.charset=o.scriptCharset),a.src=p,a.onload=a.onreadystatechange=function(_,D){(D||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=a.onreadystatechange=null,y&&a.parentNode&&y.removeChild(a),a=void 0)},y.insertBefore(a,y.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(o){if(window.DOMParser)e.parseXml=function(a){return(new DOMParser).parseFromString(a,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");e.parseXml=function(a){var p=null;return(p=new ActiveXObject("Microsoft.XMLDOM")).async=!1,p.loadXML(a),p}}return e.parseXml(o)},parseJSON:function(o){return e.parseJSON=window.JSON.parse,e.parseJSON(o)},imageFormatSupported:function(o){return!!u[(o=o||"").toLowerCase()]},setImageFormatsSupported:function(o){e.extend(u,o)}});var s=function(o){};e.console=window.console||{log:s,debug:s,info:s,warn:s,error:s,assert:s},e.Browser={vendor:e.BROWSERS.UNKNOWN,version:0,alpha:!0};var u={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},d={};function r(o,a){return a&&o!==document.body?document.body:o.offsetParent}(function(){var o=navigator.appVersion,a=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(a.substring(a.indexOf("MSIE")+5,a.indexOf(";",a.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(a.indexOf("Edge")>=0?(e.Browser.vendor=e.BROWSERS.EDGE,e.Browser.version=parseFloat(a.substring(a.indexOf("Edge")+5))):a.indexOf("Edg")>=0?(e.Browser.vendor=e.BROWSERS.CHROMEEDGE,e.Browser.version=parseFloat(a.substring(a.indexOf("Edg")+4))):a.indexOf("Firefox")>=0?(e.Browser.vendor=e.BROWSERS.FIREFOX,e.Browser.version=parseFloat(a.substring(a.indexOf("Firefox")+8))):a.indexOf("Safari")>=0?(e.Browser.vendor=a.indexOf("Chrome")>=0?e.BROWSERS.CHROME:e.BROWSERS.SAFARI,e.Browser.version=parseFloat(a.substring(a.substring(0,a.indexOf("Safari")).lastIndexOf("/")+1,a.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(a)&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":e.Browser.vendor=e.BROWSERS.OPERA,e.Browser.version=parseFloat(o)}var O,R,A,w=window.location.search.substring(1).split("&");for(A=0;A<w.length;A++)if((R=(O=w[A]).indexOf("="))>0){var C=O.substring(0,R),_=O.substring(R+1);try{d[C]=decodeURIComponent(_)}catch(D){e.console.error("Ignoring malformed URL parameter: %s=%s",C,_)}}e.Browser.alpha=!(e.Browser.vendor===e.BROWSERS.CHROME&&e.Browser.version<2),e.Browser.opacity=!0,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<11&&e.console.error("Internet Explorer versions < 11 are not supported by OpenSeadragon")})(),function(o){var a=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame,p=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||o.msCancelAnimationFrame;if(a&&p)e.requestAnimationFrame=function(){return a.apply(o,arguments)},e.cancelAnimationFrame=function(){return p.apply(o,arguments)};else{var R,y=[],w=[],O=0;e.requestAnimationFrame=function(A){return y.push([++O,A]),R||(R=setInterval(function(){if(y.length){var C=e.now(),_=w;for(w=y,y=_;w.length;)w.shift()[1](C)}else clearInterval(R),R=void 0},20)),O},e.cancelAnimationFrame=function(A){var C,_;for(C=0,_=y.length;C<_;C+=1)if(y[C][0]===A)return void y.splice(C,1);for(C=0,_=w.length;C<_;C+=1)if(w[C][0]===A)return void w.splice(C,1)}}}(window)}(OpenSeadragon),function(e,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof module&&module.exports?module.exports=i():e.OpenSeadragon=i()}(this,function(){return OpenSeadragon}),function(e){var i={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.fullscreenElement},i.requestFullScreen=function(s){return s.requestFullscreen()},i.exitFullScreen=function(){document.exitFullscreen()},i.fullScreenEventName="fullscreenchange",i.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.msFullscreenElement},i.requestFullScreen=function(s){return s.msRequestFullscreen()},i.exitFullScreen=function(){document.msExitFullscreen()},i.fullScreenEventName="MSFullscreenChange",i.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.webkitFullscreenElement},i.requestFullScreen=function(s){return s.webkitRequestFullscreen()},i.exitFullScreen=function(){document.webkitExitFullscreen()},i.fullScreenEventName="webkitfullscreenchange",i.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},i.requestFullScreen=function(s){return s.webkitRequestFullScreen()},i.exitFullScreen=function(){document.webkitCancelFullScreen()},i.fullScreenEventName="webkitfullscreenchange",i.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.mozFullScreenElement},i.requestFullScreen=function(s){return s.mozRequestFullScreen()},i.exitFullScreen=function(){document.mozCancelFullScreen()},i.fullScreenEventName="mozfullscreenchange",i.fullScreenErrorEventName="mozfullscreenerror"),i.isFullScreen=function(){return null!==i.getFullScreenElement()},i.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),i.exitFullScreen()},e.extend(e,i)}(OpenSeadragon),function(e){e.EventSource=function(){this.events={}},e.EventSource.prototype={addOnceHandler:function(i,s,u,d){var r=this;d=d||1;var o=0,a=function(p){++o===d&&r.removeHandler(i,a),s(p)};this.addHandler(i,a,u)},addHandler:function(i,s,u){var d=this.events[i];d||(this.events[i]=d=[]),s&&e.isFunction(s)&&(d[d.length]={handler:s,userData:u||null})},removeHandler:function(i,s){var r,u=this.events[i],d=[];if(u&&e.isArray(u)){for(r=0;r<u.length;r++)u[r].handler!==s&&d.push(u[r]);this.events[i]=d}},numberOfHandlers:function(i){var s=this.events[i];return s?s.length:0},removeAllHandlers:function(i){if(i)this.events[i]=[];else for(var s in this.events)this.events[s]=[]},getHandler:function(i){var s=this.events[i];return s&&s.length?(s=1===s.length?[s[0]]:Array.apply(null,s),function(u,d){var r,o=s.length;for(r=0;r<o;r++)s[r]&&(d.eventSource=u,d.userData=s[r].userData,s[r].handler(d))}):null},raiseEvent:function(i,s){var u=this.getHandler(i);u&&(s||(s={}),u(this,s))}}}(OpenSeadragon),function(e){var i=[],s={};e.MouseTracker=function(v){i.push(this);var g=arguments;e.isPlainObject(v)||(v={element:g[0],clickTimeThreshold:g[1],clickDistThreshold:g[2]}),this.hash=Math.random(),this.element=e.getElement(v.element),this.clickTimeThreshold=v.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=v.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=v.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=v.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=v.userData||null,this.stopDelay=v.stopDelay||50,this.preProcessEventHandler=v.preProcessEventHandler||null,this.contextMenuHandler=v.contextMenuHandler||null,this.enterHandler=v.enterHandler||null,this.leaveHandler=v.leaveHandler||null,this.exitHandler=v.exitHandler||null,this.overHandler=v.overHandler||null,this.outHandler=v.outHandler||null,this.pressHandler=v.pressHandler||null,this.nonPrimaryPressHandler=v.nonPrimaryPressHandler||null,this.releaseHandler=v.releaseHandler||null,this.nonPrimaryReleaseHandler=v.nonPrimaryReleaseHandler||null,this.moveHandler=v.moveHandler||null,this.scrollHandler=v.scrollHandler||null,this.clickHandler=v.clickHandler||null,this.dblClickHandler=v.dblClickHandler||null,this.dragHandler=v.dragHandler||null,this.dragEndHandler=v.dragEndHandler||null,this.pinchHandler=v.pinchHandler||null,this.stopHandler=v.stopHandler||null,this.keyDownHandler=v.keyDownHandler||null,this.keyUpHandler=v.keyUpHandler||null,this.keyHandler=v.keyHandler||null,this.focusHandler=v.focusHandler||null,this.blurHandler=v.blurHandler||null;var S=this;s[this.hash]={click:function(P){Z(S,P)},dblclick:function(P){Y(S,P)},keydown:function(P){re(S,P)},keyup:function(P){h(S,P)},keypress:function(P){ie(S,P)},focus:function(P){ye(S,P)},blur:function(P){Oe(S,P)},contextmenu:function(P){_e(S,P)},wheel:function(P){Ue(S,P)},mousewheel:function(P){qe(S,P)},DOMMouseScroll:function(P){qe(S,P)},MozMousePixelScroll:function(P){qe(S,P)},losecapture:function(P){Bt(S,P)},mouseenter:function(P){Lt(S,P)},mouseleave:function(P){yt(S,P)},mouseover:function(P){Mt(S,P)},mouseout:function(P){Ht(S,P)},mousedown:function(P){Et(S,P)},mouseup:function(P){oi(S,P)},mousemove:function(P){wt(S,P)},touchstart:function(P){ft(S,P)},touchend:function(P){Ve(S,P)},touchmove:function(P){ut(S,P)},touchcancel:function(P){Dt(S,P)},gesturestart:function(P){xe(0,P)},gesturechange:function(P){rt(0,P)},gotpointercapture:function(P){jt(S,P)},lostpointercapture:function(P){Pt(S,P)},pointerenter:function(P){Lt(S,P)},pointerleave:function(P){yt(S,P)},pointerover:function(P){Mt(S,P)},pointerout:function(P){Ht(S,P)},pointerdown:function(P){Et(S,P)},pointerup:function(P){oi(S,P)},pointermove:function(P){wt(S,P)},pointercancel:function(P){b(S,P)},pointerupcaptured:function(P){Ft(S,P)},pointermovecaptured:function(P){ai(S,P)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,e.MouseTracker.havePointerEvents&&e.setElementPointerEvents(this.element,"auto"),this.exitHandler&&e.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),v.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){var v;for(a(this),this.element=null,v=0;v<i.length;v++)if(i[v]===this){i.splice(v,1);break}s[this.hash]=null,delete s[this.hash]},isTracking:function(){return s[this.hash].tracking},setTracking:function(v){return v?function o(v){var S,P,g=s[v.hash];if(!g.tracking){for(P=0;P<e.MouseTracker.subscribeEvents.length;P++)e.addEvent(v.element,S=e.MouseTracker.subscribeEvents[P],g[S],S===e.MouseTracker.wheelEventName&&{passive:!1,capture:!1});r(v),g.tracking=!0}}(this):a(this),this},getActivePointersListByType:function(v){var S,V,g=s[this.hash],P=g.activePointersLists.length;for(S=0;S<P;S++)if(g.activePointersLists[S].type===v)return g.activePointersLists[S];return V=new e.MouseTracker.GesturePointList(v),g.activePointersLists.push(V),V},getActivePointerCount:function(){var g,v=s[this.hash],S=v.activePointersLists.length,P=0;for(g=0;g<S;g++)P+=v.activePointersLists[g].getLength();return P},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var v,g,S,P,V,u=function(){try{return window.self!==window.top}catch(v){return!0}}();function d(v){try{return v.addEventListener&&v.removeEventListener}catch(g){return!1}}function r(v){var S,P,V,J,ge,g=s[v.hash],Ge=g.activePointersLists.length;for(S=0;S<Ge;S++)if((V=g.activePointersLists[S]).getLength()>0){for(ge=[],J=V.asArray(),P=0;P<J.length;P++)ge.push(J[P]);for(P=0;P<ge.length;P++)te(v,V,ge[P])}for(S=0;S<Ge;S++)g.activePointersLists.pop();g.sentDragEvent=!1}function a(v){var S,P,g=s[v.hash];if(g.tracking){for(P=0;P<e.MouseTracker.subscribeEvents.length;P++)e.removeEvent(v.element,S=e.MouseTracker.subscribeEvents[P],g[S],!1);r(v),g.tracking=!1}}function p(v,g){var S=s[v.hash];if("pointerevent"===g)return{upName:"pointerup",upHandler:S.pointerupcaptured,moveName:"pointermove",moveHandler:S.pointermovecaptured};if("mouse"===g)return{upName:"pointerup",upHandler:S.pointerupcaptured,moveName:"pointermove",moveHandler:S.pointermovecaptured};if("touch"===g)return{upName:"touchend",upHandler:S.touchendcaptured,moveName:"touchmove",moveHandler:S.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function w(v,g){var S,V;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents){if(!(V=v.getActivePointersListByType(g.type).getById(g.id))||!V.captured)return;try{v.element.releasePointerCapture(g.id)}catch(J){}}else v.element.releaseCapture();else S=p(v,e.MouseTracker.havePointerEvents?"pointerevent":g.type),u&&d(window.top)&&e.removeEvent(window.top,S.upName,S.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,S.moveName,S.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,S.upName,S.upHandler,!0);ae(v,g,!1)}function O(v){return e.MouseTracker.havePointerEvents?v.pointerId:e.MouseTracker.mousePointerId}function R(v){return e.MouseTracker.havePointerEvents?v.pointerType||(e.Browser.vendor===e.BROWSERS.IE?"mouse":""):"mouse"}function A(v){return!e.MouseTracker.havePointerEvents||v.isPrimary}function C(v){return e.getMousePosition(v)}function _(v,g){return D(C(v),g)}function D(v,g){var S=e.getElementOffset(g);return v.minus(S)}function N(v,g){return new e.Point((v.x+g.x)/2,(v.y+g.y)/2)}function Z(v,g){var S={originalEvent:g,eventType:"click",pointerType:"mouse",isEmulated:!1};ue(v,S),S.preventDefault&&!S.defaultPrevented&&e.cancelEvent(g),S.stopPropagation&&e.stopEvent(g)}function Y(v,g){var S={originalEvent:g,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};ue(v,S),S.preventDefault&&!S.defaultPrevented&&e.cancelEvent(g),S.stopPropagation&&e.stopEvent(g)}function re(v,g){var S=null,P={originalEvent:g,eventType:"keydown",pointerType:"",isEmulated:!1};ue(v,P),v.keyDownHandler&&!P.preventGesture&&!P.defaultPrevented&&v.keyDownHandler(S={eventSource:v,keyCode:g.keyCode?g.keyCode:g.charCode,ctrl:g.ctrlKey,shift:g.shiftKey,alt:g.altKey,meta:g.metaKey,originalEvent:g,preventDefault:P.preventDefault||P.defaultPrevented,userData:v.userData}),(S&&S.preventDefault||P.preventDefault&&!P.defaultPrevented)&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function h(v,g){var S=null,P={originalEvent:g,eventType:"keyup",pointerType:"",isEmulated:!1};ue(v,P),v.keyUpHandler&&!P.preventGesture&&!P.defaultPrevented&&v.keyUpHandler(S={eventSource:v,keyCode:g.keyCode?g.keyCode:g.charCode,ctrl:g.ctrlKey,shift:g.shiftKey,alt:g.altKey,meta:g.metaKey,originalEvent:g,preventDefault:P.preventDefault||P.defaultPrevented,userData:v.userData}),(S&&S.preventDefault||P.preventDefault&&!P.defaultPrevented)&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function ie(v,g){var S=null,P={originalEvent:g,eventType:"keypress",pointerType:"",isEmulated:!1};ue(v,P),v.keyHandler&&!P.preventGesture&&!P.defaultPrevented&&v.keyHandler(S={eventSource:v,keyCode:g.keyCode?g.keyCode:g.charCode,ctrl:g.ctrlKey,shift:g.shiftKey,alt:g.altKey,meta:g.metaKey,originalEvent:g,preventDefault:P.preventDefault||P.defaultPrevented,userData:v.userData}),(S&&S.preventDefault||P.preventDefault&&!P.defaultPrevented)&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function ye(v,g){var S={originalEvent:g,eventType:"focus",pointerType:"",isEmulated:!1};ue(v,S),v.focusHandler&&!S.preventGesture&&v.focusHandler({eventSource:v,originalEvent:g,userData:v.userData})}function Oe(v,g){var S={originalEvent:g,eventType:"blur",pointerType:"",isEmulated:!1};ue(v,S),v.blurHandler&&!S.preventGesture&&v.blurHandler({eventSource:v,originalEvent:g,userData:v.userData})}function _e(v,g){var S=null,P={originalEvent:g,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};ue(v,P),v.contextMenuHandler&&!P.preventGesture&&!P.defaultPrevented&&(S={eventSource:v,position:D(C(g),v.element),originalEvent:P.originalEvent,preventDefault:P.preventDefault||P.defaultPrevented,userData:v.userData},v.contextMenuHandler(S)),(S&&S.preventDefault||P.preventDefault&&!P.defaultPrevented)&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function Ue(v,g){nt(v,g,g)}function qe(v,g){var S={target:g.target||g.srcElement,type:"wheel",shiftKey:g.shiftKey||!1,clientX:g.clientX,clientY:g.clientY,pageX:g.pageX?g.pageX:g.clientX,pageY:g.pageY?g.pageY:g.clientY,deltaMode:"MozMousePixelScroll"===g.type?0:1,deltaX:0,deltaZ:0};S.deltaY="mousewheel"===e.MouseTracker.wheelEventName?-g.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:g.detail,nt(v,S,g)}function nt(v,g,S){var P,V,J=null;P=g.deltaY<0?1:-1,ue(v,V={originalEvent:g,eventType:"wheel",pointerType:"mouse",isEmulated:g!==S}),v.scrollHandler&&!V.preventGesture&&!V.defaultPrevented&&(J={eventSource:v,pointerType:"mouse",position:_(g,v.element),scroll:P,shift:g.shiftKey,isTouchEvent:!1,originalEvent:S,preventDefault:V.preventDefault||V.defaultPrevented,userData:v.userData},v.scrollHandler(J)),V.stopPropagation&&e.stopEvent(S),(J&&J.preventDefault||V.preventDefault&&!V.defaultPrevented)&&e.cancelEvent(S)}function Bt(v,g){var S={id:e.MouseTracker.mousePointerId,type:"mouse"},P={originalEvent:g,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};ue(v,P),g.target===v.element&&ae(v,S,!1),P.stopPropagation&&e.stopEvent(g)}function ft(v,g){var S,P,J,V=g.changedTouches.length,ge=v.getActivePointersListByType("touch");S=e.now(),ge.getLength()>g.touches.length-V&&e.console.warn("Tracked touch contact count doesn't match event.touches.length");var Ge={originalEvent:g,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(ue(v,Ge),P=0;P<V;P++)Me(v,Ge,J={id:g.changedTouches[P].identifier,type:"touch",isPrimary:0===ge.getLength(),currentPos:C(g.changedTouches[P]),currentTime:S}),Qe(v,Ge,J,0),ae(v,J,!0);Ge.preventDefault&&!Ge.defaultPrevented&&e.cancelEvent(g),Ge.stopPropagation&&e.stopEvent(g)}function Ve(v,g){var S,P,J,V=g.changedTouches.length;S=e.now();var ge={originalEvent:g,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(ue(v,ge),P=0;P<V;P++)Ie(v,ge,J={id:g.changedTouches[P].identifier,type:"touch",currentPos:C(g.changedTouches[P]),currentTime:S},0),ae(v,J,!1),Ne(v,ge,J);ge.preventDefault&&!ge.defaultPrevented&&e.cancelEvent(g),ge.stopPropagation&&e.stopEvent(g)}function ut(v,g){var S,P,V=g.changedTouches.length;S=e.now();var ge={originalEvent:g,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(ue(v,ge),P=0;P<V;P++)xt(v,ge,{id:g.changedTouches[P].identifier,type:"touch",currentPos:C(g.changedTouches[P]),currentTime:S});ge.preventDefault&&!ge.defaultPrevented&&e.cancelEvent(g),ge.stopPropagation&&e.stopEvent(g)}function Dt(v,g){var P,S=g.changedTouches.length,J={originalEvent:g,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(ue(v,J),P=0;P<S;P++)kt(v,0,{id:g.changedTouches[P].identifier,type:"touch"});J.stopPropagation&&e.stopEvent(g)}function xe(v,g){return e.eventIsCanceled(g)||g.preventDefault(),!1}function rt(v,g){return e.eventIsCanceled(g)||g.preventDefault(),!1}function jt(v,g){var S={originalEvent:g,eventType:"gotpointercapture",pointerType:R(g),isEmulated:!1};ue(v,S),g.target===v.element&&ae(v,{id:g.pointerId,type:R(g)},!0),S.stopPropagation&&e.stopEvent(g)}function Pt(v,g){var S={originalEvent:g,eventType:"lostpointercapture",pointerType:R(g),isEmulated:!1};ue(v,S),g.target===v.element&&ae(v,{id:g.pointerId,type:R(g)},!1),S.stopPropagation&&e.stopEvent(g)}function Lt(v,g){var S={id:O(g),type:R(g),isPrimary:A(g),currentPos:C(g),currentTime:e.now()},P={originalEvent:g,eventType:"pointerenter",pointerType:S.type,isEmulated:!1};ue(v,P),Me(v,P,S)}function yt(v,g){var S={id:O(g),type:R(g),isPrimary:A(g),currentPos:C(g),currentTime:e.now()},P={originalEvent:g,eventType:"pointerleave",pointerType:S.type,isEmulated:!1};ue(v,P),Ne(v,P,S)}function Mt(v,g){var S={id:O(g),type:R(g),isPrimary:A(g),currentPos:C(g),currentTime:e.now()},P={originalEvent:g,eventType:"pointerover",pointerType:S.type,isEmulated:!1};ue(v,P),function Le(v,g,S){var P,V;(V=(P=v.getActivePointersListByType(S.type)).getById(S.id))?S=V:(S.captured=!1,S.insideElementPressed=!1),v.overHandler&&v.overHandler({eventSource:v,pointerType:S.type,position:D(S.currentPos,v.element),buttons:P.buttons,pointers:v.getActivePointerCount(),insideElementPressed:S.insideElementPressed,buttonDownAny:0!==P.buttons,isTouchEvent:"touch"===S.type,originalEvent:g.originalEvent,userData:v.userData})}(v,P,S),P.preventDefault&&!P.defaultPrevented&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function Ht(v,g){var S={id:O(g),type:R(g),isPrimary:A(g),currentPos:C(g),currentTime:e.now()},P={originalEvent:g,eventType:"pointerout",pointerType:S.type,isEmulated:!1};ue(v,P),function Te(v,g,S){var P,V;(V=(P=v.getActivePointersListByType(S.type)).getById(S.id))?S=V:(S.captured=!1,S.insideElementPressed=!1),v.outHandler&&v.outHandler({eventSource:v,pointerType:S.type,position:S.currentPos&&D(S.currentPos,v.element),buttons:P.buttons,pointers:v.getActivePointerCount(),insideElementPressed:S.insideElementPressed,buttonDownAny:0!==P.buttons,isTouchEvent:"touch"===S.type,originalEvent:g.originalEvent,userData:v.userData})}(v,P,S),P.preventDefault&&!P.defaultPrevented&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function Et(v,g){var S={id:O(g),type:R(g),isPrimary:A(g),currentPos:C(g),currentTime:e.now()},P=e.MouseTracker.havePointerEvents&&"touch"===S.type&&e.Browser.vendor!==e.BROWSERS.IE,V={originalEvent:g,eventType:"pointerdown",pointerType:S.type,isEmulated:!1};ue(v,V),Qe(v,V,S,g.button),V.preventDefault&&!V.defaultPrevented&&e.cancelEvent(g),V.stopPropagation&&e.stopEvent(g),V.shouldCapture&&(P?ae(v,S,!0):function y(v,g){var S;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents)try{v.element.setPointerCapture(g.id)}catch(P){return void e.console.warn("setPointerCapture() called on invalid pointer ID")}else v.element.setCapture(!0);else S=p(v,e.MouseTracker.havePointerEvents?"pointerevent":g.type),u&&d(window.top)&&e.addEvent(window.top,S.upName,S.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,S.upName,S.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,S.moveName,S.moveHandler,!0);ae(v,g,!0)}(v,S))}function oi(v,g){si(v,g)}function Ft(v,g){v.getActivePointersListByType(R(g)).getById(g.pointerId)&&si(v,g),e.stopEvent(g)}function si(v,g){var S,P={originalEvent:g,eventType:"pointerup",pointerType:(S={id:O(g),type:R(g),isPrimary:A(g),currentPos:C(g),currentTime:e.now()}).type,isEmulated:!1};ue(v,P),Ie(v,P,S,g.button),P.preventDefault&&!P.defaultPrevented&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g),P.shouldReleaseCapture&&(g.target===v.element?w(v,S):ae(v,S,!1))}function wt(v,g){f(v,g)}function ai(v,g){v.getActivePointersListByType(R(g)).getById(g.pointerId)&&f(v,g),e.stopEvent(g)}function f(v,g){var S={id:O(g),type:R(g),isPrimary:A(g),currentPos:C(g),currentTime:e.now()},P={originalEvent:g,eventType:"pointermove",pointerType:S.type,isEmulated:!1};ue(v,P),xt(v,P,S),P.preventDefault&&!P.defaultPrevented&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function b(v,g){var S={id:g.pointerId,type:R(g)},P={originalEvent:g,eventType:"pointercancel",pointerType:S.type,isEmulated:!1};ue(v,P),kt(v,0,S),P.stopPropagation&&e.stopEvent(g)}function U(v,g){return g.speed=0,g.direction=0,g.contactPos=g.currentPos,g.contactTime=g.currentTime,g.lastPos=g.currentPos,g.lastTime=g.currentTime,v.add(g)}function te(v,g,S){var P,V=g.getById(S.id);return V?(V.captured&&(e.console.warn("stopTrackingPointer() called on captured pointer"),w(v,V)),g.removeContact(),P=g.removeById(S.id)):P=g.getLength(),P}function ue(v,g){g.eventSource=v,g.eventPhase=g.originalEvent&&void 0!==g.originalEvent.eventPhase?g.originalEvent.eventPhase:0,g.defaultPrevented=e.eventIsCanceled(g.originalEvent),g.shouldCapture=!1,g.shouldReleaseCapture=!1,g.userData=v.userData,function oe(v,g){switch(g.eventType){case"pointermove":case"pointerdown":case"pointerup":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!v.hasGestureHandlers,g.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!1,g.stopPropagation=!1;break;case"wheel":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!v.hasScrollHandler,g.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":g.isStoppable=!0,g.isCancelable=!1,g.preventDefault=!1,g.preventGesture=!1,g.stopPropagation=!1;break;case"click":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!!v.clickHandler,g.preventGesture=!1,g.stopPropagation=!1;break;case"dblclick":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!!v.dblClickHandler,g.preventGesture=!1,g.stopPropagation=!1;break;default:g.isStoppable=!1,g.isCancelable=!1,g.preventDefault=!1,g.preventGesture=!1,g.stopPropagation=!1}}(v,g),v.preProcessEventHandler&&v.preProcessEventHandler(g)}function ae(v,g,S){var P=v.getActivePointersListByType(g.type),V=P.getById(g.id);V?S&&!V.captured?(V.captured=!0,P.captureCount++):!S&&V.captured&&(V.captured=!1,P.captureCount--,P.captureCount<0&&(P.captureCount=0,e.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):e.console.warn("updatePointerCaptured() called on untracked pointer")}function Me(v,g,S){var V,P=v.getActivePointersListByType(S.type);(V=P.getById(S.id))?(V.insideElement=!0,V.lastPos=V.currentPos,V.lastTime=V.currentTime,V.currentPos=S.currentPos,V.currentTime=S.currentTime,S=V):(S.captured=!1,S.insideElementPressed=!1,S.insideElement=!0,U(P,S)),v.enterHandler&&v.enterHandler({eventSource:v,pointerType:S.type,position:D(S.currentPos,v.element),buttons:P.buttons,pointers:v.getActivePointerCount(),insideElementPressed:S.insideElementPressed,buttonDownAny:0!==P.buttons,isTouchEvent:"touch"===S.type,originalEvent:g.originalEvent,userData:v.userData})}function Ne(v,g,S){var V,J,P=v.getActivePointersListByType(S.type);(V=P.getById(S.id))?(V.captured?(V.insideElement=!1,V.lastPos=V.currentPos,V.lastTime=V.currentTime,V.currentPos=S.currentPos,V.currentTime=S.currentTime):te(v,P,V),S=V):(S.captured=!1,S.insideElementPressed=!1),(v.leaveHandler||v.exitHandler)&&(J={eventSource:v,pointerType:S.type,position:S.currentPos&&D(S.currentPos,v.element),buttons:P.buttons,pointers:v.getActivePointerCount(),insideElementPressed:S.insideElementPressed,buttonDownAny:0!==P.buttons,isTouchEvent:"touch"===S.type,originalEvent:g.originalEvent,userData:v.userData},v.leaveHandler&&v.leaveHandler(J),v.exitHandler&&v.exitHandler(J))}function Qe(v,g,S,P){var ge,V=s[v.hash],J=v.getActivePointersListByType(S.type);if(void 0!==g.originalEvent.buttons?J.buttons=g.originalEvent.buttons:0===P?J.buttons|=1:1===P?J.buttons|=4:2===P?J.buttons|=2:3===P?J.buttons|=8:4===P?J.buttons|=16:5===P&&(J.buttons|=32),0!==P)return g.shouldCapture=!1,g.shouldReleaseCapture=!1,void(v.nonPrimaryPressHandler&&!g.preventGesture&&!g.defaultPrevented&&(g.preventDefault=!0,v.nonPrimaryPressHandler({eventSource:v,pointerType:S.type,position:D(S.currentPos,v.element),button:P,buttons:J.buttons,isTouchEvent:"touch"===S.type,originalEvent:g.originalEvent,userData:v.userData})));(ge=J.getById(S.id))?(ge.insideElementPressed=!0,ge.insideElement=!0,ge.originalTarget=g.originalEvent.target,ge.contactPos=S.currentPos,ge.contactTime=S.currentTime,ge.lastPos=ge.currentPos,ge.lastTime=ge.currentTime,ge.currentPos=S.currentPos,ge.currentTime=S.currentTime,S=ge):(S.captured=!1,S.insideElementPressed=!0,S.insideElement=!0,S.originalTarget=g.originalEvent.target,U(J,S)),J.addContact(),g.preventGesture||g.defaultPrevented?(g.shouldCapture=!1,g.shouldReleaseCapture=!1):(g.shouldCapture=!0,g.shouldReleaseCapture=!1,g.preventDefault=!0,(v.dragHandler||v.dragEndHandler||v.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(v,S),1===J.contacts?v.pressHandler&&!g.preventGesture&&v.pressHandler({eventSource:v,pointerType:S.type,position:D(S.contactPos,v.element),buttons:J.buttons,isTouchEvent:"touch"===S.type,originalEvent:g.originalEvent,userData:v.userData}):2===J.contacts&&v.pinchHandler&&"touch"===S.type&&(V.pinchGPoints=J.asArray(),V.lastPinchDist=V.currentPinchDist=V.pinchGPoints[0].currentPos.distanceTo(V.pinchGPoints[1].currentPos),V.lastPinchCenter=V.currentPinchCenter=N(V.pinchGPoints[0].currentPos,V.pinchGPoints[1].currentPos)))}function Ie(v,g,S,P){var ge,Ge,be,dt,V=s[v.hash],J=v.getActivePointersListByType(S.type),Ot=!1;if(void 0!==g.originalEvent.buttons?J.buttons=g.originalEvent.buttons:0===P?J.buttons^=-2:1===P?J.buttons^=-5:2===P?J.buttons^=-3:3===P?J.buttons^=-9:4===P?J.buttons^=-17:5===P&&(J.buttons^=-33),g.shouldCapture=!1,0!==P)return g.shouldReleaseCapture=!1,void(v.nonPrimaryReleaseHandler&&!g.preventGesture&&!g.defaultPrevented&&(g.preventDefault=!0,v.nonPrimaryReleaseHandler({eventSource:v,pointerType:S.type,position:D(S.currentPos,v.element),button:P,buttons:J.buttons,isTouchEvent:"touch"===S.type,originalEvent:g.originalEvent,userData:v.userData})));(be=J.getById(S.id))?(J.removeContact(),be.captured&&(Ot=!0),be.lastPos=be.currentPos,be.lastTime=be.currentTime,be.currentPos=S.currentPos,be.currentTime=S.currentTime,be.insideElement||te(v,J,be),ge=be.currentPos,Ge=be.currentTime):(S.captured=!1,S.insideElementPressed=!1,S.insideElement=!0,U(J,S),be=S),!g.preventGesture&&!g.defaultPrevented&&(Ot?(g.shouldReleaseCapture=!0,g.preventDefault=!0,(v.dragHandler||v.dragEndHandler||v.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(v,be),0===J.contacts?(v.releaseHandler&&ge&&v.releaseHandler({eventSource:v,pointerType:be.type,position:D(ge,v.element),buttons:J.buttons,insideElementPressed:be.insideElementPressed,insideElementReleased:be.insideElement,isTouchEvent:"touch"===be.type,originalEvent:g.originalEvent,userData:v.userData}),v.dragEndHandler&&V.sentDragEvent&&v.dragEndHandler({eventSource:v,pointerType:be.type,position:D(be.currentPos,v.element),speed:be.speed,direction:be.direction,shift:g.originalEvent.shiftKey,isTouchEvent:"touch"===be.type,originalEvent:g.originalEvent,userData:v.userData}),V.sentDragEvent=!1,(v.clickHandler||v.dblClickHandler)&&be.insideElement&&(dt=Ge-be.contactTime<=v.clickTimeThreshold&&be.contactPos.distanceTo(ge)<=v.clickDistThreshold,v.clickHandler&&v.clickHandler({eventSource:v,pointerType:be.type,position:D(be.currentPos,v.element),quick:dt,shift:g.originalEvent.shiftKey,isTouchEvent:"touch"===be.type,originalEvent:g.originalEvent,originalTarget:be.originalTarget,userData:v.userData}),v.dblClickHandler&&dt&&(J.clicks++,1===J.clicks?(V.lastClickPos=ge,V.dblClickTimeOut=setTimeout(function(){J.clicks=0},v.dblClickTimeThreshold)):2===J.clicks&&(clearTimeout(V.dblClickTimeOut),J.clicks=0,V.lastClickPos.distanceTo(ge)<=v.dblClickDistThreshold&&v.dblClickHandler({eventSource:v,pointerType:be.type,position:D(be.currentPos,v.element),shift:g.originalEvent.shiftKey,isTouchEvent:"touch"===be.type,originalEvent:g.originalEvent,userData:v.userData}),V.lastClickPos=null)))):2===J.contacts&&v.pinchHandler&&"touch"===be.type&&(V.pinchGPoints=J.asArray(),V.lastPinchDist=V.currentPinchDist=V.pinchGPoints[0].currentPos.distanceTo(V.pinchGPoints[1].currentPos),V.lastPinchCenter=V.currentPinchCenter=N(V.pinchGPoints[0].currentPos,V.pinchGPoints[1].currentPos))):(g.shouldReleaseCapture=!1,v.releaseHandler&&ge&&(v.releaseHandler({eventSource:v,pointerType:be.type,position:D(ge,v.element),buttons:J.buttons,insideElementPressed:be.insideElementPressed,insideElementReleased:be.insideElement,isTouchEvent:"touch"===be.type,originalEvent:g.originalEvent,userData:v.userData}),g.preventDefault=!0)))}function xt(v,g,S){var J,ge,Ge,P=s[v.hash],V=v.getActivePointersListByType(S.type);void 0!==g.originalEvent.buttons&&(V.buttons=g.originalEvent.buttons),(J=V.getById(S.id))&&(J.lastPos=J.currentPos,J.lastTime=J.currentTime,J.currentPos=S.currentPos,J.currentTime=S.currentTime,g.shouldCapture=!1,g.shouldReleaseCapture=!1,v.stopHandler&&"mouse"===S.type&&(clearTimeout(v.stopTimeOut),v.stopTimeOut=setTimeout(function(){!function pi(v,g,S){v.stopHandler&&v.stopHandler({eventSource:v,pointerType:S,position:_(g,v.element),buttons:v.getActivePointersListByType(S).buttons,isTouchEvent:"touch"===S,originalEvent:g,userData:v.userData})}(v,g.originalEvent,S.type)},v.stopDelay)),0===V.contacts?v.moveHandler&&v.moveHandler({eventSource:v,pointerType:S.type,position:D(S.currentPos,v.element),buttons:V.buttons,isTouchEvent:"touch"===S.type,originalEvent:g.originalEvent,userData:v.userData}):1===V.contacts?(v.moveHandler&&(J=V.asArray()[0],v.moveHandler({eventSource:v,pointerType:J.type,position:D(J.currentPos,v.element),buttons:V.buttons,isTouchEvent:"touch"===J.type,originalEvent:g.originalEvent,userData:v.userData})),v.dragHandler&&!g.preventGesture&&!g.defaultPrevented&&(Ge=(J=V.asArray()[0]).currentPos.minus(J.lastPos),v.dragHandler({eventSource:v,pointerType:J.type,position:D(J.currentPos,v.element),buttons:V.buttons,delta:Ge,speed:J.speed,direction:J.direction,shift:g.originalEvent.shiftKey,isTouchEvent:"touch"===J.type,originalEvent:g.originalEvent,userData:v.userData}),g.preventDefault=!0,P.sentDragEvent=!0)):2===V.contacts&&(v.moveHandler&&(ge=V.asArray(),v.moveHandler({eventSource:v,pointerType:ge[0].type,position:D(N(ge[0].currentPos,ge[1].currentPos),v.element),buttons:V.buttons,isTouchEvent:"touch"===ge[0].type,originalEvent:g.originalEvent,userData:v.userData})),v.pinchHandler&&"touch"===S.type&&!g.preventGesture&&!g.defaultPrevented&&(Ge=P.pinchGPoints[0].currentPos.distanceTo(P.pinchGPoints[1].currentPos))!==P.currentPinchDist&&(P.lastPinchDist=P.currentPinchDist,P.currentPinchDist=Ge,P.lastPinchCenter=P.currentPinchCenter,P.currentPinchCenter=N(P.pinchGPoints[0].currentPos,P.pinchGPoints[1].currentPos),v.pinchHandler({eventSource:v,pointerType:"touch",gesturePoints:P.pinchGPoints,lastCenter:D(P.lastPinchCenter,v.element),center:D(P.currentPinchCenter,v.element),lastDistance:P.lastPinchDist,distance:P.currentPinchDist,shift:g.originalEvent.shiftKey,originalEvent:g.originalEvent,userData:v.userData}),g.preventDefault=!0)))}function kt(v,g,S){var V,P=v.getActivePointersListByType(S.type);(V=P.getById(S.id))&&te(v,P,V)}e.MouseTracker.gesturePointVelocityTracker=(v=[],g=0,S=0,P=function(Ge,be){return Ge.hash.toString()+be.type+be.id.toString()},V=function(){var Ge,Ot,dt,k,I,be=v.length,Wt=e.now();for(k=Wt-S,S=Wt,Ge=0;Ge<be;Ge++)(dt=(Ot=v[Ge]).gPoint).direction=Math.atan2(dt.currentPos.y-Ot.lastPos.y,dt.currentPos.x-Ot.lastPos.x),I=Ot.lastPos.distanceTo(dt.currentPos),Ot.lastPos=dt.currentPos,dt.speed=1e3*I/(k+1)*.75+.25*dt.speed},{addPoint:function(Ge,be){var Ot=P(Ge,be);v.push({guid:Ot,gPoint:be,lastPos:be.currentPos}),1===v.length&&(S=e.now(),g=window.setInterval(V,50))},removePoint:function(Ge,be){var dt,Ot=P(Ge,be),Wt=v.length;for(dt=0;dt<Wt;dt++)if(v[dt].guid===Ot){v.splice(dt,1),0==--Wt&&window.clearInterval(g);break}}}),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",e.MouseTracker.wheelEventName],"DOMMouseScroll"===e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.havePointerCapture=function(){var v=document.createElement("div");return e.isFunction(v.setPointerCapture)&&e.isFunction(v.releasePointerCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(e.MouseTracker.havePointerEvents=!1,e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.havePointerCapture=function(){var v=document.createElement("div");return e.isFunction(v.setCapture)&&e.isFunction(v.releaseCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),e.MouseTracker.GesturePointList=function(v){this._gPoints=[],this.type=v,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(v){return this._gPoints.push(v)},removeById:function(v){var g,S=this._gPoints.length;for(g=0;g<S;g++)if(this._gPoints[g].id===v){this._gPoints.splice(g,1);break}return this._gPoints.length},getByIndex:function(v){return v<this._gPoints.length?this._gPoints[v]:null},getById:function(v){var g,S=this._gPoints.length;for(g=0;g<S;g++)if(this._gPoints[g].id===v)return this._gPoints[g];return null},getPrimary:function(v){var g,S=this._gPoints.length;for(g=0;g<S;g++)if(this._gPoints[g].isPrimary)return this._gPoints[g];return null},addContact:function(){++this.contacts,this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(e.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}}}(OpenSeadragon),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(i,s,u){var d=i.parentNode;"number"==typeof s&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),s={anchor:s}),s.attachToViewer=void 0===s.attachToViewer||s.attachToViewer,this.autoFade=void 0===s.autoFade||s.autoFade,this.element=i,this.anchor=s.anchor,this.container=u,this.anchor===e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof s.top?s.top+"px":s.top,this.wrapper.style.left="number"==typeof s.left?s.left+"px":s.left,this.wrapper.style.height="number"==typeof s.height?s.height+"px":s.height,this.wrapper.style.width="number"==typeof s.width?s.width+"px":s.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),s.attachToViewer?this.anchor===e.ControlAnchor.TOP_RIGHT||this.anchor===e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):d.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==e.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!==this.wrapper.style.display},setVisible:function(i){this.wrapper.style.display=i?this.anchor===e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(i){e.setElementOpacity(this.element[e.SIGNAL]&&e.Browser.vendor===e.BROWSERS.IE?this.element:this.wrapper,i,!0)}}}(OpenSeadragon),function(e){function i(s,u){var r,d=s.controls;for(r=d.length-1;r>=0;r--)if(d[r].element===u)return r;return-1}e.ControlDock=function(s){var d,r,u=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},s),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),r=0;r<u.length;r++)this.controls[d=u[r]]=e.makeNeutralElement("div"),this.controls[d].style.position="absolute",d.match("left")&&(this.controls[d].style.left="0px"),d.match("right")&&(this.controls[d].style.right="0px"),d.match("top")&&(this.controls[d].style.top="0px"),d.match("bottom")&&(this.controls[d].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(s,u){var d=null;if(!(i(this,s=e.getElement(s))>=0)){switch(u.anchor){case e.ControlAnchor.TOP_RIGHT:d=this.controls.topright,s.style.position="relative",s.style.paddingRight="0px",s.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:d=this.controls.bottomright,s.style.position="relative",s.style.paddingRight="0px",s.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:d=this.controls.bottomleft,s.style.position="relative",s.style.paddingLeft="0px",s.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:d=this.controls.topleft,s.style.position="relative",s.style.paddingLeft="0px",s.style.paddingTop="0px";break;default:d=this.container,s.style.margin="0px",s.style.padding="0px"}this.controls.push(new e.Control(s,u,d)),s.style.display="inline-block"}},removeControl:function(s){var u=i(this,s=e.getElement(s));return u>=0&&(this.controls[u].destroy(),this.controls.splice(u,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var s;for(s=this.controls.length-1;s>=0;s--)if(this.controls[s].isVisible())return!0;return!1},setControlsEnabled:function(s){var u;for(u=this.controls.length-1;u>=0;u--)this.controls[u].setVisible(s);return this}}}(OpenSeadragon),OpenSeadragon.Placement=OpenSeadragon.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}}),function(e){var i={},s=1;function u(f){return f=e.getElement(f),new e.Point(0===f.clientWidth?1:f.clientWidth,0===f.clientHeight?1:f.clientHeight)}function r(f,b){if(b instanceof e.Overlay)return b;var U=null;if(b.element)U=e.getElement(b.element);else{var te=b.id?b.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(U=e.getElement(b.id))||((U=document.createElement("a")).href="#/overlay/"+te),U.id=te,e.addClass(U,b.className?b.className:"openseadragon-overlay")}var oe=b.location,ue=b.width,ae=b.height;if(!oe){var Me=b.x,Ne=b.y;if(void 0!==b.px){var Le=f.viewport.imageToViewportRectangle(new e.Rect(b.px,b.py,ue||0,ae||0));Me=Le.x,Ne=Le.y,ue=void 0!==ue?Le.width:void 0,ae=void 0!==ae?Le.height:void 0}oe=new e.Point(Me,Ne)}var Te=b.placement;return Te&&"string"===e.type(Te)&&(Te=e.Placement[b.placement.toUpperCase()]),new e.Overlay({element:U,location:oe,placement:Te,onDraw:b.onDraw,checkResize:b.checkResize,width:ue,height:ae,rotationMode:b.rotationMode})}function o(f,b){var U;for(U=f.length-1;U>=0;U--)if(f[U].element===b)return U;return-1}function a(f,b){return e.requestAnimationFrame(function(){b(f)})}function p(f){e.requestAnimationFrame(function(){!function w(f){var te,oe;if(f.controlsShouldFade){for(te=1-(e.now()-f.controlsFadeBeginTime)/f.controlsFadeLength,te=Math.min(1,te),te=Math.max(0,te),oe=f.controls.length-1;oe>=0;oe--)f.controls[oe].autoFade&&f.controls[oe].setOpacity(te);te>0&&p(f)}}(f)})}function y(f){!f.autoHideControls||(f.controlsShouldFade=!0,f.controlsFadeBeginTime=e.now()+f.controlsFadeDelay,window.setTimeout(function(){p(f)},f.controlsFadeDelay))}function O(f){var b;for(f.controlsShouldFade=!1,b=f.controls.length-1;b>=0;b--)f.controls[b].setOpacity(1)}function R(){O(this)}function A(){y(this)}function C(f){var b={tracker:f.eventSource,position:f.position,originalEvent:f.originalEvent,preventDefault:f.preventDefault};this.raiseEvent("canvas-contextmenu",b),f.preventDefault=b.preventDefault}function _(f){var b={originalEvent:f.originalEvent,preventDefaultAction:!1,preventVerticalPan:f.preventVerticalPan||!this.panVertical,preventHorizontalPan:f.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",b),b.preventDefaultAction||f.ctrl||f.alt||f.meta)f.preventDefault=!1;else switch(f.keyCode){case 38:b.preventVerticalPan||(f.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 40:b.preventVerticalPan||(f.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 37:b.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 39:b.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;default:f.preventDefault=!1}}function D(f){var b={originalEvent:f.originalEvent,preventDefaultAction:!1,preventVerticalPan:f.preventVerticalPan||!this.panVertical,preventHorizontalPan:f.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",b),b.preventDefaultAction||f.ctrl||f.alt||f.meta)f.preventDefault=!1;else switch(f.keyCode){case 43:case 61:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 45:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 119:case 87:b.preventVerticalPan||(f.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 115:case 83:b.preventVerticalPan||(f.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 97:b.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 100:b.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 114:this.viewport.setRotation(e.positiveModulo(this.viewport.flipped?this.viewport.degrees-this.rotationIncrement:this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 82:this.viewport.setRotation(e.positiveModulo(this.viewport.flipped?this.viewport.degrees+this.rotationIncrement:this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 102:this.viewport.toggleFlip(),f.preventDefault=!0;break;case 106:this.goToPreviousPage();break;case 107:this.goToNextPage();break;default:f.preventDefault=!1}}function N(f){var b;document.activeElement===this.canvas||this.canvas.focus(),this.viewport.flipped&&(f.position.x=this.viewport.getContainerSize().x-f.position.x);var te={tracker:f.eventSource,position:f.position,quick:f.quick,shift:f.shift,originalEvent:f.originalEvent,originalTarget:f.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",te),!te.preventDefaultAction&&this.viewport&&f.quick&&(b=this.gestureSettingsByDeviceType(f.pointerType)).clickToZoom&&(this.viewport.zoomBy(f.shift?1/this.zoomPerClick:this.zoomPerClick,b.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints())}function Z(f){var b,U={tracker:f.eventSource,position:f.position,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",U),!U.preventDefaultAction&&this.viewport&&(b=this.gestureSettingsByDeviceType(f.pointerType)).dblClickToZoom&&(this.viewport.zoomBy(f.shift?1/this.zoomPerClick:this.zoomPerClick,b.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints())}function Y(f){var b,U={tracker:f.eventSource,pointerType:f.pointerType,position:f.position,delta:f.delta,speed:f.speed,direction:f.direction,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",U),(b=this.gestureSettingsByDeviceType(f.pointerType)).dragToPan&&!U.preventDefaultAction&&this.viewport){if(this.panHorizontal||(f.delta.x=0),this.panVertical||(f.delta.y=0),this.viewport.flipped&&(f.delta.x=-f.delta.x),this.constrainDuringPan){var te=this.viewport.deltaPointsFromPixels(f.delta.negate());this.viewport.centerSpringX.target.value+=te.x,this.viewport.centerSpringY.target.value+=te.y;var oe=this.viewport.getBounds(),ue=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=te.x,this.viewport.centerSpringY.target.value-=te.y,oe.x!==ue.x&&(f.delta.x=0),oe.y!==ue.y&&(f.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(f.delta.negate()),b.flickEnabled&&!this.constrainDuringPan)}}function re(f){var b={tracker:f.eventSource,pointerType:f.pointerType,position:f.position,speed:f.speed,direction:f.direction,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",b),!b.preventDefaultAction&&this.viewport){var U=this.gestureSettingsByDeviceType(f.pointerType);if(U.flickEnabled&&f.speed>=U.flickMinSpeed){var te=0;this.panHorizontal&&(te=U.flickMomentum*f.speed*Math.cos(f.direction));var oe=0;this.panVertical&&(oe=U.flickMomentum*f.speed*Math.sin(f.direction));var ue=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),ae=this.viewport.pointFromPixel(new e.Point(ue.x-te,ue.y-oe));this.viewport.panTo(ae,!1)}this.viewport.applyConstraints()}}function h(f){this.raiseEvent("canvas-enter",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function ie(f){this.raiseEvent("canvas-exit",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function ye(f){this.raiseEvent("canvas-press",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,insideElementPressed:f.insideElementPressed,insideElementReleased:f.insideElementReleased,originalEvent:f.originalEvent})}function Oe(f){this.raiseEvent("canvas-release",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,insideElementPressed:f.insideElementPressed,insideElementReleased:f.insideElementReleased,originalEvent:f.originalEvent})}function _e(f){this.raiseEvent("canvas-nonprimary-press",{tracker:f.eventSource,position:f.position,pointerType:f.pointerType,button:f.button,buttons:f.buttons,originalEvent:f.originalEvent})}function Ue(f){this.raiseEvent("canvas-nonprimary-release",{tracker:f.eventSource,position:f.position,pointerType:f.pointerType,button:f.button,buttons:f.buttons,originalEvent:f.originalEvent})}function qe(f){var b,U,oe,ue={tracker:f.eventSource,pointerType:f.pointerType,gesturePoints:f.gesturePoints,lastCenter:f.lastCenter,center:f.center,lastDistance:f.lastDistance,distance:f.distance,shift:f.shift,originalEvent:f.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",ue),this.viewport&&((b=this.gestureSettingsByDeviceType(f.pointerType)).pinchToZoom&&(!ue.preventDefaultPanAction||!ue.preventDefaultZoomAction)&&(U=this.viewport.pointFromPixel(f.center,!0),b.zoomToRefPoint&&!ue.preventDefaultPanAction&&(oe=this.viewport.pointFromPixel(f.lastCenter,!0).minus(U),this.panHorizontal||(oe.x=0),this.panVertical||(oe.y=0),this.viewport.panBy(oe,!0)),ue.preventDefaultZoomAction||this.viewport.zoomBy(f.distance/f.lastDistance,U,!0),this.viewport.applyConstraints()),b.pinchRotate&&!ue.preventDefaultRotateAction)){var ae=Math.atan2(f.gesturePoints[0].currentPos.y-f.gesturePoints[1].currentPos.y,f.gesturePoints[0].currentPos.x-f.gesturePoints[1].currentPos.x),Me=Math.atan2(f.gesturePoints[0].lastPos.y-f.gesturePoints[1].lastPos.y,f.gesturePoints[0].lastPos.x-f.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(ae-Me)*(180/Math.PI))}}function nt(f){var b,U,te,oe;(oe=e.now())-this._lastScrollTime>this.minScrollDeltaTime?(this._lastScrollTime=oe,this.raiseEvent("canvas-scroll",b={tracker:f.eventSource,position:f.position,scroll:f.scroll,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1,preventDefault:!0}),!b.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(f.position.x=this.viewport.getContainerSize().x-f.position.x),(U=this.gestureSettingsByDeviceType(f.pointerType)).scrollToZoom&&(te=Math.pow(this.zoomPerScroll,f.scroll),this.viewport.zoomBy(te,U.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints())),f.preventDefault=b.preventDefault):f.preventDefault=!0}function Bt(f){i[this.hash].mouseInside=!0,O(this),this.raiseEvent("container-enter",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function ft(f){f.pointers<1&&(i[this.hash].mouseInside=!1,i[this.hash].animating||y(this)),this.raiseEvent("container-exit",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function Ve(f){(function ut(f){if(!f._opening&&i[f.hash]){if(f.autoResize){var b=u(f.container),U=i[f.hash].prevContainerSize;if(!b.equals(U)){var te=f.viewport;if(f.preserveImageSizeOnResize){var oe=U.x/b.x,ue=te.getZoom()*oe,ae=te.getCenter();te.resize(b,!1),te.zoomTo(ue,null,!0),te.panTo(ae,!0)}else{var Me=te.getBounds();te.resize(b,!0),te.fitBoundsWithConstraints(Me,!0)}i[f.hash].prevContainerSize=b,i[f.hash].forceRedraw=!0}}var Ne=f.viewport.update(),Le=f.world.update()||Ne;Ne&&f.raiseEvent("viewport-change"),f.referenceStrip&&(Le=f.referenceStrip.update(f.viewport)||Le);var Te=i[f.hash].animating;!Te&&Le&&(f.raiseEvent("animation-start"),O(f));var Qe=Te&&!Le;Qe&&(i[f.hash].animating=!1),(Le||Qe||i[f.hash].forceRedraw||f.world.needsDraw())&&(function Dt(f){f.imageLoader.clear(),f.drawer.clear(),f.world.draw(),f.raiseEvent("update-viewport",{})}(f),f._drawOverlays(),f.navigator&&f.navigator.update(f.viewport),i[f.hash].forceRedraw=!1,Le&&f.raiseEvent("animation")),Qe&&(f.raiseEvent("animation-finish"),i[f.hash].mouseInside||y(f)),i[f.hash].animating=Le}})(f),f._updateRequestId=!!f.isOpen()&&a(f,Ve)}function xe(f,b){return f?f+b:b}function rt(){i[this.hash].lastZoomTime=e.now(),i[this.hash].zoomFactor=this.zoomPerSecond,i[this.hash].zooming=!0,Lt(this)}function jt(){i[this.hash].lastZoomTime=e.now(),i[this.hash].zoomFactor=1/this.zoomPerSecond,i[this.hash].zooming=!0,Lt(this)}function Pt(){i[this.hash].zooming=!1}function Lt(f){e.requestAnimationFrame(e.delegate(f,yt))}function yt(){var f,U;i[this.hash].zooming&&this.viewport&&(f=e.now(),U=Math.pow(i[this.hash].zoomFactor,(f-i[this.hash].lastZoomTime)/1e3),this.viewport.zoomBy(U),this.viewport.applyConstraints(),i[this.hash].lastZoomTime=f,Lt(this))}function Mt(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function Ht(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function Et(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function oi(){this.viewport&&this.viewport.goHome()}function Ft(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function si(){if(this.viewport){var f=this.viewport.getRotation();f=e.positiveModulo(this.viewport.flipped?f+this.rotationIncrement:f-this.rotationIncrement,360),this.viewport.setRotation(f)}}function wt(){if(this.viewport){var f=this.viewport.getRotation();f=e.positiveModulo(this.viewport.flipped?f-this.rotationIncrement:f+this.rotationIncrement,360),this.viewport.setRotation(f)}}function ai(){this.viewport.toggleFlip()}e.Viewer=function(f){var te,oe,b=arguments,U=this;if(e.isPlainObject(f)||(f={id:b[0],xmlPath:b.length>1?b[1]:void 0,prefixUrl:b.length>2?b[2]:void 0,controls:b.length>3?b[3]:void 0,overlays:b.length>4?b[4]:void 0}),f.config&&(e.extend(!0,f,f.config),delete f.config),e.extend(!0,this,{id:f.id,hash:f.hash||s++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},e.DEFAULT_SETTINGS,f),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(void 0!==i[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),i[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",function(oe){var ue=e.getString("Errors.OpenFailed",oe.eventSource,oe.message);U._showMessage(ue)}),e.ControlDock.call(this,f),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",(oe=this.canvas.style).width="100%",oe.height="100%",oe.overflow="hidden",oe.position="absolute",oe.top="0px",oe.left="0px",e.setElementTouchActionNone(this.canvas),""!==f.tabIndex&&(this.canvas.tabIndex=void 0===f.tabIndex?0:f.tabIndex),this.container.className="openseadragon-container",function(oe){oe.width="100%",oe.height="100%",oe.position="relative",oe.overflow="hidden",oe.left="0px",oe.top="0px",oe.textAlign="left"}(this.container.style),e.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:e.delegate(this,C),keyDownHandler:e.delegate(this,_),keyHandler:e.delegate(this,D),clickHandler:e.delegate(this,N),dblClickHandler:e.delegate(this,Z),dragHandler:e.delegate(this,Y),dragEndHandler:e.delegate(this,re),enterHandler:e.delegate(this,h),leaveHandler:e.delegate(this,ie),pressHandler:e.delegate(this,ye),releaseHandler:e.delegate(this,Oe),nonPrimaryPressHandler:e.delegate(this,_e),nonPrimaryReleaseHandler:e.delegate(this,Ue),scrollHandler:e.delegate(this,nt),pinchHandler:e.delegate(this,qe)}),this.outerTracker=new e.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,Bt),leaveHandler:e.delegate(this,ft)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),i[this.hash].prevContainerSize=u(this.container),this.world=new e.World({viewer:this}),this.world.addHandler("add-item",function(oe){U.source=U.world.getItemAt(0).source,i[U.hash].forceRedraw=!0,U._updateRequestId||(U._updateRequestId=a(U,Ve))}),this.world.addHandler("remove-item",function(oe){U.source=U.world.getItemCount()?U.world.getItemAt(0).source:null,i[U.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(oe){U.viewport&&U.viewport._setContentBounds(U.world.getHomeBounds(),U.world.getContentFactor())}),this.world.addHandler("item-index-change",function(oe){U.source=U.world.getItemAt(0).source}),this.viewport=new e.Viewport({containerSize:i[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:f.timeout}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(te=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(te,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(te=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(te,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new e.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),te=0;te<this.customControls.length;te++)this.addControl(this.customControls[te].id,{anchor:this.customControls[te].anchor});e.requestAnimationFrame(function(){y(U)}),void 0!==this.imageSmoothingEnabled&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),e._viewers.set(this.element,this)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(f){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(f)},openTileSource:function(f){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(f)},get buttons(){return e.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(f,b){var U=this;if(this.close(),!f)return this;if(this.sequenceMode&&e.isArray(f))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0!==b&&!isNaN(b)&&(this.initialPage=b),this.tileSources=f,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(e.isArray(f)||(f=[f]),!f.length)return this;this._opening=!0;for(var ae,te=f.length,oe=0,ue=0,Me=function(){if(oe+ue===te)if(oe){(U._firstOpen||!U.preserveViewport)&&(U.viewport.goHome(!0),U.viewport.update()),U._firstOpen=!1;var Te=f[0];if(Te.tileSource&&(Te=Te.tileSource),U.overlays&&!U.preserveOverlays)for(var Qe=0;Qe<U.overlays.length;Qe++)U.currentOverlays[Qe]=r(U,U.overlays[Qe]);U._drawOverlays(),U._opening=!1,U.raiseEvent("open",{source:Te})}else U._opening=!1,U.raiseEvent("open-failed",ae)},Ne=function(Te){(!e.isPlainObject(Te)||!Te.tileSource)&&(Te={tileSource:Te}),void 0!==Te.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete Te.index),void 0===Te.collectionImmediately&&(Te.collectionImmediately=!0);var Qe=Te.success;Te.success=function(xt){if(oe++,Te.tileSource.overlays)for(var kt=0;kt<Te.tileSource.overlays.length;kt++)U.addOverlay(Te.tileSource.overlays[kt]);Qe&&Qe(xt),Me()};var Ie=Te.error;Te.error=function(xt){ue++,ae||(ae=xt),Ie&&Ie(xt),Me()},U.addTiledImage(Te)},Le=0;Le<f.length;Le++)Ne(f[Le]);return this},close:function(){return i[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),i[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(i[this.hash]){if(this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),i[this.navigator.hash]=null,delete i[this.navigator.hash],this.navigator=null),this.removeAllHandlers(),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),i[this.hash]=null,delete i[this.hash],this.canvas=null,this.container=null,e._viewers.delete(this.element),this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(f){return this.innerTracker.setTracking(f),this.outerTracker.setTracking(f),this.raiseEvent("mouse-enabled",{enabled:f}),this},areControlsEnabled:function(){var b,f=this.controls.length;for(b=0;b<this.controls.length;b++)f=f&&this.controls[b].isVisible();return f},setControlsEnabled:function(f){return f?O(this):y(this),this.raiseEvent("controls-enabled",{enabled:f}),this},setDebugMode:function(f){for(var b=0;b<this.world.getItemCount();b++)this.world.getItemAt(b).debugMode=f;this.debugMode=f,this.forceRedraw()},isFullPage:function(){return i[this.hash].fullPage},setFullPage:function(f){var ue,ae,b=document.body,U=b.style,te=document.documentElement.style,oe=this;if(f===this.isFullPage())return this;var Me={fullPage:f,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",Me),Me.preventDefaultAction)return this;if(f){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=U.margin,this.docMargin=te.margin,U.margin="0",te.margin="0",this.bodyPadding=U.padding,this.docPadding=te.padding,U.padding="0",te.padding="0",this.bodyWidth=U.width,this.docWidth=te.width,U.width="100%",te.width="100%",this.bodyHeight=U.height,this.docHeight=te.height,U.height="100%",te.height="100%",this.bodyDisplay=U.display,U.display="block",this.previousBody=[],i[this.hash].prevElementParent=this.element.parentNode,i[this.hash].prevNextSibling=this.element.nextSibling,i[this.hash].prevElementWidth=this.element.style.width,i[this.hash].prevElementHeight=this.element.style.height,ue=b.childNodes.length,ae=0;ae<ue;ae++)this.previousBody.push(b.childNodes[0]),b.removeChild(b.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,b.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),b.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),i[this.hash].fullPage=!0,e.delegate(this,Bt)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,U.margin=this.bodyMargin,te.margin=this.docMargin,U.padding=this.bodyPadding,te.padding=this.docPadding,U.width=this.bodyWidth,te.width=this.docWidth,U.height=this.bodyHeight,te.height=this.docHeight,U.display=this.bodyDisplay,b.removeChild(this.element),ue=this.previousBody.length,ae=0;ae<ue;ae++)b.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),i[this.hash].prevElementParent.insertBefore(this.element,i[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(b.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=i[this.hash].prevElementWidth,this.element.style.height=i[this.hash].prevElementHeight;var Ne=0,Le=function(){e.setPageScroll(oe.pageScroll);var Te=e.getPageScroll();++Ne<10&&(Te.x!==oe.pageScroll.x||Te.y!==oe.pageScroll.y)&&e.requestAnimationFrame(Le)};e.requestAnimationFrame(Le),i[this.hash].fullPage=!1,e.delegate(this,ft)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:f}),this},setFullScreen:function(f){var b=this;if(!e.supportsFullScreen)return this.setFullPage(f);if(e.isFullScreen()===f)return this;var U={fullScreen:f,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",U),U.preventDefaultAction)return this;if(f){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var te=function(){var oe=e.isFullScreen();oe||(e.removeEvent(document,e.fullScreenEventName,te),e.removeEvent(document,e.fullScreenErrorEventName,te),b.setFullPage(!1),b.isFullPage()&&(b.element.style.width=b.fullPageStyleWidth,b.element.style.height=b.fullPageStyleHeight)),b.navigator&&b.viewport&&setTimeout(function(){b.navigator.update(b.viewport)}),b.raiseEvent("full-screen",{fullScreen:oe})};e.addEvent(document,e.fullScreenEventName,te),e.addEvent(document,e.fullScreenErrorEventName,te),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!==this.container.style.visibility},isFullScreen:function(){return e.isFullScreen()&&this.isFullPage()},setVisible:function(f){return this.container.style.visibility=f?"":"hidden",this.raiseEvent("visible",{visible:f}),this},addTiledImage:function(f){e.console.assert(f,"[Viewer.addTiledImage] options is required"),e.console.assert(f.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!f.replace||f.index>-1&&f.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var b=this;f.replace&&(f.replaceItem=b.world.getItemAt(f.index)),this._hideMessage(),void 0===f.placeholderFillStyle&&(f.placeholderFillStyle=this.placeholderFillStyle),void 0===f.opacity&&(f.opacity=this.opacity),void 0===f.preload&&(f.preload=this.preload),void 0===f.compositeOperation&&(f.compositeOperation=this.compositeOperation),void 0===f.crossOriginPolicy&&(f.crossOriginPolicy=void 0!==f.tileSource.crossOriginPolicy?f.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===f.ajaxWithCredentials&&(f.ajaxWithCredentials=this.ajaxWithCredentials),void 0===f.loadTilesWithAjax&&(f.loadTilesWithAjax=this.loadTilesWithAjax),null==f.ajaxHeaders?f.ajaxHeaders=this.ajaxHeaders:e.isPlainObject(f.ajaxHeaders)&&e.isPlainObject(this.ajaxHeaders)&&(f.ajaxHeaders=e.extend({},this.ajaxHeaders,f.ajaxHeaders));var U={options:f};function te(ae){for(var Me=0;Me<b._loadQueue.length;Me++)if(b._loadQueue[Me]===U){b._loadQueue.splice(Me,1);break}0===b._loadQueue.length&&oe(U),b.raiseEvent("add-item-failed",ae),f.error&&f.error(ae)}function oe(ae){b.collectionMode&&(b.world.arrange({immediately:ae.options.collectionImmediately,rows:b.collectionRows,columns:b.collectionColumns,layout:b.collectionLayout,tileSize:b.collectionTileSize,tileMargin:b.collectionTileMargin}),b.world.setAutoRefigureSizes(!0))}function ue(){for(var ae,Me,Ne;b._loadQueue.length&&(ae=b._loadQueue[0]).tileSource;){if(b._loadQueue.splice(0,1),ae.options.replace){var Le=b.world.getIndexOfItem(ae.options.replaceItem);-1!==Le&&(ae.options.index=Le),b.world.removeItem(ae.options.replaceItem)}Me=new e.TiledImage({viewer:b,source:ae.tileSource,viewport:b.viewport,drawer:b.drawer,tileCache:b.tileCache,imageLoader:b.imageLoader,x:ae.options.x,y:ae.options.y,width:ae.options.width,height:ae.options.height,fitBounds:ae.options.fitBounds,fitBoundsPlacement:ae.options.fitBoundsPlacement,clip:ae.options.clip,placeholderFillStyle:ae.options.placeholderFillStyle,opacity:ae.options.opacity,preload:ae.options.preload,degrees:ae.options.degrees,flipped:ae.options.flipped,compositeOperation:ae.options.compositeOperation,springStiffness:b.springStiffness,animationTime:b.animationTime,minZoomImageRatio:b.minZoomImageRatio,wrapHorizontal:b.wrapHorizontal,wrapVertical:b.wrapVertical,immediateRender:b.immediateRender,blendTime:b.blendTime,alwaysBlend:b.alwaysBlend,minPixelRatio:b.minPixelRatio,smoothTileEdgesMinZoom:b.smoothTileEdgesMinZoom,iOSDevice:b.iOSDevice,crossOriginPolicy:ae.options.crossOriginPolicy,ajaxWithCredentials:ae.options.ajaxWithCredentials,loadTilesWithAjax:ae.options.loadTilesWithAjax,ajaxHeaders:ae.options.ajaxHeaders,debugMode:b.debugMode,subPixelRoundingForTransparency:b.subPixelRoundingForTransparency}),b.collectionMode&&b.world.setAutoRefigureSizes(!1),b.navigator&&(Ne=e.extend({},ae.options,{replace:!1,originalTiledImage:Me,tileSource:ae.tileSource}),b.navigator.addTiledImage(Ne)),b.world.addItem(Me,{index:ae.options.index}),0===b._loadQueue.length&&oe(ae),1===b.world.getItemCount()&&!b.preserveViewport&&b.viewport.goHome(!0),ae.options.success&&ae.options.success({item:Me})}}e.isArray(f.tileSource)?setTimeout(function(){te({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:f.tileSource,options:f})}):(this._loadQueue.push(U),function d(f,b,U,te,oe){var ue=f;if("string"===e.type(b))if(b.match(/^\s*<.*>\s*$/))b=e.parseXml(b);else if(b.match(/^\s*[{[].*[}\]]\s*$/))try{var ae=e.parseJSON(b);b=ae}catch(Ne){}function Me(Ne,Le){Ne.ready?te(Ne):(Ne.addHandler("ready",function(){te(Ne)}),Ne.addHandler("open-failed",function(Te){oe({message:Te.message,source:Le})}))}setTimeout(function(){if("string"===e.type(b))(b=new e.TileSource({url:b,crossOriginPolicy:void 0!==U.crossOriginPolicy?U.crossOriginPolicy:f.crossOriginPolicy,ajaxWithCredentials:f.ajaxWithCredentials,ajaxHeaders:U.ajaxHeaders?U.ajaxHeaders:f.ajaxHeaders,splitHashDataForPost:f.splitHashDataForPost,useCanvas:f.useCanvas,success:function(Qe){te(Qe.tileSource)}})).addHandler("open-failed",function(Qe){oe(Qe)});else if(e.isPlainObject(b)||b.nodeType)if(void 0===b.crossOriginPolicy&&(void 0!==U.crossOriginPolicy||void 0!==f.crossOriginPolicy)&&(b.crossOriginPolicy=void 0!==U.crossOriginPolicy?U.crossOriginPolicy:f.crossOriginPolicy),void 0===b.ajaxWithCredentials&&(b.ajaxWithCredentials=f.ajaxWithCredentials),void 0===b.useCanvas&&(b.useCanvas=f.useCanvas),e.isFunction(b.getTileUrl)){var Ne=new e.TileSource(b);Ne.getTileUrl=b.getTileUrl,te(Ne)}else{var Le=e.TileSource.determineType(ue,b);if(!Le)return void oe({message:"Unable to load TileSource",source:b});var Te=Le.prototype.configure.apply(ue,[b]);Me(new Le(Te),b)}else Me(b,b)})}(this,f.tileSource,f,function(ae){U.tileSource=ae,ue()},function(ae){ae.options=f,te(ae),ue()}))},addSimpleImage:function(f){e.console.assert(f,"[Viewer.addSimpleImage] options is required"),e.console.assert(f.url,"[Viewer.addSimpleImage] options.url is required");var b=e.extend({},f,{tileSource:{type:"image",url:f.url}});delete b.url,this.addTiledImage(b)},addLayer:function(f){var b=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var U=e.extend({},f,{success:function(te){b.raiseEvent("add-layer",{options:f,drawer:te.item})},error:function(te){b.raiseEvent("add-layer-failed",te)}});return this.addTiledImage(U),this},getLayerAtLevel:function(f){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(f)},getLevelOfLayer:function(f){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(f)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(f,b){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(f,b)},removeLayer:function(f){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(f)},forceRedraw:function(){return i[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var f=e.delegate(this,R),b=e.delegate(this,A),U=e.delegate(this,this.goToNextPage),te=e.delegate(this,this.goToPreviousPage),oe=this.navImages,ue=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(ue=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:xe(this.prefixUrl,oe.previous.REST),srcGroup:xe(this.prefixUrl,oe.previous.GROUP),srcHover:xe(this.prefixUrl,oe.previous.HOVER),srcDown:xe(this.prefixUrl,oe.previous.DOWN),onRelease:te,onFocus:f,onBlur:b}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:xe(this.prefixUrl,oe.next.REST),srcGroup:xe(this.prefixUrl,oe.next.GROUP),srcHover:xe(this.prefixUrl,oe.next.HOVER),srcDown:xe(this.prefixUrl,oe.next.DOWN),onRelease:U,onFocus:f,onBlur:b}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),ue&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var f=e.delegate(this,rt),b=e.delegate(this,Pt),U=e.delegate(this,Mt),te=e.delegate(this,jt),oe=e.delegate(this,Ht),ue=e.delegate(this,oi),ae=e.delegate(this,Ft),Me=e.delegate(this,si),Ne=e.delegate(this,wt),Le=e.delegate(this,ai),Te=e.delegate(this,R),Qe=e.delegate(this,A),Ie=this.navImages,xt=[],kt=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(kt=!1),this.showZoomControl&&(xt.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:xe(this.prefixUrl,Ie.zoomIn.REST),srcGroup:xe(this.prefixUrl,Ie.zoomIn.GROUP),srcHover:xe(this.prefixUrl,Ie.zoomIn.HOVER),srcDown:xe(this.prefixUrl,Ie.zoomIn.DOWN),onPress:f,onRelease:b,onClick:U,onEnter:f,onExit:b,onFocus:Te,onBlur:Qe})),xt.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:xe(this.prefixUrl,Ie.zoomOut.REST),srcGroup:xe(this.prefixUrl,Ie.zoomOut.GROUP),srcHover:xe(this.prefixUrl,Ie.zoomOut.HOVER),srcDown:xe(this.prefixUrl,Ie.zoomOut.DOWN),onPress:te,onRelease:b,onClick:oe,onEnter:te,onExit:b,onFocus:Te,onBlur:Qe}))),this.showHomeControl&&xt.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:xe(this.prefixUrl,Ie.home.REST),srcGroup:xe(this.prefixUrl,Ie.home.GROUP),srcHover:xe(this.prefixUrl,Ie.home.HOVER),srcDown:xe(this.prefixUrl,Ie.home.DOWN),onRelease:ue,onFocus:Te,onBlur:Qe})),this.showFullPageControl&&xt.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:xe(this.prefixUrl,Ie.fullpage.REST),srcGroup:xe(this.prefixUrl,Ie.fullpage.GROUP),srcHover:xe(this.prefixUrl,Ie.fullpage.HOVER),srcDown:xe(this.prefixUrl,Ie.fullpage.DOWN),onRelease:ae,onFocus:Te,onBlur:Qe})),this.showRotationControl&&(xt.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:xe(this.prefixUrl,Ie.rotateleft.REST),srcGroup:xe(this.prefixUrl,Ie.rotateleft.GROUP),srcHover:xe(this.prefixUrl,Ie.rotateleft.HOVER),srcDown:xe(this.prefixUrl,Ie.rotateleft.DOWN),onRelease:Me,onFocus:Te,onBlur:Qe})),xt.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:xe(this.prefixUrl,Ie.rotateright.REST),srcGroup:xe(this.prefixUrl,Ie.rotateright.GROUP),srcHover:xe(this.prefixUrl,Ie.rotateright.HOVER),srcDown:xe(this.prefixUrl,Ie.rotateright.DOWN),onRelease:Ne,onFocus:Te,onBlur:Qe}))),this.showFlipControl&&xt.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:xe(this.prefixUrl,Ie.flip.REST),srcGroup:xe(this.prefixUrl,Ie.flip.GROUP),srcHover:xe(this.prefixUrl,Ie.flip.HOVER),srcDown:xe(this.prefixUrl,Ie.flip.DOWN),onRelease:Le,onFocus:Te,onBlur:Qe})),kt?(this.buttonGroup=new e.ButtonGroup({buttons:xt,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",e.delegate(this,Et)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT})):this.customButtons=xt),this},currentPage:function(){return this._sequenceIndex},goToPage:function(f){return this.tileSources&&f>=0&&f<this.tileSources.length&&(this._sequenceIndex=f,this._updateSequenceButtons(f),this.open(this.tileSources[f]),this.referenceStrip&&this.referenceStrip.setFocus(f),this.raiseEvent("page",{page:f})),this},addOverlay:function(f,b,U,te){var oe;if(oe=e.isPlainObject(f)?f:{element:f,location:b,placement:U,onDraw:te},f=e.getElement(oe.element),o(this.currentOverlays,f)>=0)return this;var ue=r(this,oe);return this.currentOverlays.push(ue),ue.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:f,location:oe.location,placement:oe.placement}),this},updateOverlay:function(f,b,U){var te;return f=e.getElement(f),(te=o(this.currentOverlays,f))>=0&&(this.currentOverlays[te].update(b,U),i[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:f,location:b,placement:U})),this},removeOverlay:function(f){var b;return f=e.getElement(f),(b=o(this.currentOverlays,f))>=0&&(this.currentOverlays[b].destroy(),this.currentOverlays.splice(b,1),i[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:f})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return i[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(f){var b;return f=e.getElement(f),(b=o(this.currentOverlays,f))>=0?this.currentOverlays[b]:null},_updateSequenceButtons:function(f){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==f?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(f>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(f){this._hideMessage();var b=e.makeNeutralElement("div");b.appendChild(document.createTextNode(f)),this.messageDiv=e.makeCenteredNode(b),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var f=this.messageDiv;f&&(f.parentNode.removeChild(f),delete this.messageDiv)},gestureSettingsByDeviceType:function(f){switch(f){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var f,b=this.currentOverlays.length;for(f=0;f<b;f++)this.currentOverlays[f].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),e.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){e.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var f=e.pixelDensityRatio,b=e.getCurrentPixelDensityRatio();f!==b&&(e.pixelDensityRatio=b,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var f=this._sequenceIndex-1;this.navPrevNextWrap&&f<0&&(f+=this.tileSources.length),this.goToPage(f)},goToNextPage:function(){var f=this._sequenceIndex+1;this.navPrevNextWrap&&f>=this.tileSources.length&&(f=0),this.goToPage(f)},isAnimating:function(){return i[this.hash].animating}})}(OpenSeadragon),function(e){function i(a){var p={tracker:a.eventSource,position:a.position,quick:a.quick,shift:a.shift,originalEvent:a.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",p),!p.preventDefaultAction&&a.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(a.position.x=this.viewport.getContainerSize().x-a.position.x);var y=this.viewport.pointFromPixel(a.position);this.panVertical?this.panHorizontal||(y.x=this.viewer.viewport.getCenter(!0).x):y.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(y),this.viewer.viewport.applyConstraints()}}function s(a){var p={tracker:a.eventSource,position:a.position,delta:a.delta,speed:a.speed,direction:a.direction,shift:a.shift,originalEvent:a.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",p),!p.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(a.delta.x=0),this.panVertical||(a.delta.y=0),this.viewer.viewport.flipped&&(a.delta.x=-a.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(a.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function u(a){a.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function d(a){var p={tracker:a.eventSource,position:a.position,scroll:a.scroll,shift:a.shift,originalEvent:a.originalEvent,preventDefault:a.preventDefault};this.viewer.raiseEvent("navigator-scroll",p),a.preventDefault=p.preventDefault}function r(a,p){o(a,"rotate("+p+"deg)")}function o(a,p){a.style.webkitTransform=p,a.style.mozTransform=p,a.style.msTransform=p,a.style.oTransform=p,a.style.transform=p}e.Navigator=function(a){var w,O,C,_,p=a.viewer,y=this;function R(C){r(y.displayRegionContainer,C),r(y.displayRegion,-C),y.viewport.setRotation(C)}a.id?(this.element=document.getElementById(a.id),a.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(a.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),a.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:a.autoFade},a.position&&("BOTTOM_RIGHT"===a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"===a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"===a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"===a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"===a.position&&(a.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,a.controlOptions.top=a.top,a.controlOptions.left=a.left,a.controlOptions.height=a.height,a.controlOptions.width=a.width))),this.element.id=a.id,this.element.className+=" navigator",(a=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},a,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:a.autoResize,minZoomImageRatio:1,background:a.background,opacity:a.opacity,borderColor:a.borderColor,displayRegionColor:a.displayRegionColor})).minPixelRatio=this.minPixelRatio=p.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),a.controlOptions.anchor!==e.ControlAnchor.NONE&&(_=this.borderWidth,(C=this.element.style).margin="0px",C.border=_+"px solid "+a.borderColor,C.padding="0px",C.background=a.background,C.opacity=a.opacity,C.overflow="hidden"),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(C,_){C.position="relative",C.top="0px",C.left="0px",C.fontSize="0px",C.overflow="hidden",C.border=_+"px solid "+a.displayRegionColor,C.margin="0px",C.padding="0px",C.background="transparent",C.float="left",C.cssFloat="left",C.styleFloat="left",C.zIndex=999999999,C.cursor="default"}(this.displayRegion.style,this.borderWidth),e.setElementPointerEventsNone(this.displayRegion),e.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",e.setElementPointerEventsNone(this.displayRegionContainer),e.setElementTouchActionNone(this.displayRegionContainer),p.addControl(this.element,a.controlOptions),this._resizeWithViewer=a.controlOptions.anchor!==e.ControlAnchor.ABSOLUTE&&a.controlOptions.anchor!==e.ControlAnchor.NONE,a.width&&a.height?(this.setWidth(a.width),this.setHeight(a.height)):this._resizeWithViewer&&(w=e.getElementSize(p.element),this.element.style.height=Math.round(w.y*a.sizeRatio)+"px",this.element.style.width=Math.round(w.x*a.sizeRatio)+"px",this.oldViewerSize=w,O=e.getElementSize(this.element),this.elementArea=O.x*O.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[a]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),a.navigatorRotate&&(R(a.viewer.viewport?a.viewer.viewport.getRotation():a.viewer.degrees||0),a.viewer.addHandler("rotate",function(C){R(C.degrees)})),this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:e.delegate(this,s),clickHandler:e.delegate(this,i),releaseHandler:e.delegate(this,u),scrollHandler:e.delegate(this,d),preProcessEventHandler:function(C){"wheel"===C.eventType&&(C.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",e.setElementPointerEventsNone(this.canvas),e.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){y.viewport&&y.viewport.goHome(!0)}),p.world.addHandler("item-index-change",function(C){window.setTimeout(function(){var _=y.world.getItemAt(C.previousIndex);y.world.setItemIndex(_,C.newIndex)},1)}),p.world.addHandler("remove-item",function(C){var D=y._getMatchingItem(C.item);D&&y.world.removeItem(D)}),this.update(p.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var a=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);a.equals(this.oldContainerSize)||(this.viewport.resize(a,!0),this.viewport.goHome(!0),this.oldContainerSize=a,this.drawer.clear(),this.world.draw())}},setWidth:function(a){this.width=a,this.element.style.width="number"==typeof a?a+"px":a,this._resizeWithViewer=!1},setHeight:function(a){this.height=a,this.element.style.height="number"==typeof a?a+"px":a,this._resizeWithViewer=!1},setFlip:function(a){return this.viewport.setFlip(a),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(a){o(this.displayRegion,a),o(this.canvas,a),o(this.element,a)},update:function(a){var p,y,w,O,R,A;if(p=e.getElementSize(this.viewer.element),this._resizeWithViewer&&p.x&&p.y&&!p.equals(this.oldViewerSize)&&(this.oldViewerSize=p,this.maintainSizeRatio||!this.elementArea?(y=p.x*this.sizeRatio,w=p.y*this.sizeRatio):(y=Math.sqrt(this.elementArea*(p.x/p.y)),w=this.elementArea/y),this.element.style.width=Math.round(y)+"px",this.element.style.height=Math.round(w)+"px",this.elementArea||(this.elementArea=y*w),this.updateSize()),a&&this.viewport){O=a.getBoundsNoRotate(!0),R=this.viewport.pixelFromPointNoRotate(O.getTopLeft(),!1),A=this.viewport.pixelFromPointNoRotate(O.getBottomRight(),!1).minus(this.totalBorderWidths);var C=this.displayRegion.style;C.display=this.world.getItemCount()?"block":"none",C.top=Math.round(R.y)+"px",C.left=Math.round(R.x)+"px";var _=Math.abs(R.x-A.x),D=Math.abs(R.y-A.y);C.width=Math.round(Math.max(_,0))+"px",C.height=Math.round(Math.max(D,0))+"px"}},addTiledImage:function(a){var p=this,y=a.originalTiledImage;delete a.original;var w=e.extend({},a,{success:function(O){var R=O.item;function A(){p._matchBounds(R,y)}R._originalForNavigator=y,p._matchBounds(R,y,!0),p._matchOpacity(R,y),p._matchCompositeOperation(R,y),y.addHandler("bounds-change",A),y.addHandler("clip-change",A),y.addHandler("opacity-change",function C(){p._matchOpacity(R,y)}),y.addHandler("composite-operation-change",function _(){p._matchCompositeOperation(R,y)})}});return e.Viewer.prototype.addTiledImage.apply(this,[w])},destroy:function(){return e.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(a){for(var y,p=this.world.getItemCount(),w=0;w<p;w++)if((y=this.world.getItemAt(w))._originalForNavigator===a)return y;return null},_matchBounds:function(a,p,y){var w=p.getBoundsNoRotate();a.setPosition(w.getTopLeft(),y),a.setWidth(w.width,y),a.setRotation(p.getRotation(),y),a.setClip(p.getClip()),a.setFlip(p.getFlip())},_matchOpacity:function(a,p){a.setOpacity(p.opacity)},_matchCompositeOperation:function(a,p){a.setCompositeOperation(p.compositeOperation)}})}(OpenSeadragon),function(e){var i={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(s){var a,u=s.split("."),d=null,r=arguments,o=i;for(a=0;a<u.length-1;a++)o=o[u[a]]||{};return"string"!=typeof(d=o[u[a]])&&(e.console.error("Untranslated source string:",s),d=""),d.replace(/\{\d+\}/g,function(p){var y=parseInt(p.match(/\d+/),10)+1;return y<r.length?r[y]:""})},setString:function(s,u){var o,d=s.split("."),r=i;for(o=0;o<d.length-1;o++)r[d[o]]||(r[d[o]]={}),r=r[d[o]];r[d[o]]=u}})}(OpenSeadragon),function(e){e.Point=function(i,s){this.x="number"==typeof i?i:0,this.y="number"==typeof s?s:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(i){return new e.Point(this.x+i.x,this.y+i.y)},minus:function(i){return new e.Point(this.x-i.x,this.y-i.y)},times:function(i){return new e.Point(this.x*i,this.y*i)},divide:function(i){return new e.Point(this.x/i,this.y/i)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(i){return Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2))},squaredDistanceTo:function(i){return Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)},apply:function(i){return new e.Point(i(this.x),i(this.y))},equals:function(i){return i instanceof e.Point&&this.x===i.x&&this.y===i.y},rotate:function(i,s){var u,d;if(s=s||new e.Point(0,0),i%90==0)switch(e.positiveModulo(i,360)){case 0:u=1,d=0;break;case 90:u=0,d=1;break;case 180:u=-1,d=0;break;case 270:u=0,d=-1}else{var o=i*Math.PI/180;u=Math.cos(o),d=Math.sin(o)}return new e.Point(u*(this.x-s.x)-d*(this.y-s.y)+s.x,d*(this.x-s.x)+u*(this.y-s.y)+s.y)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),function(e){e.TileSource=function(s,u,d,r,o,a){var w,O,p=this,y=arguments;if(w=e.isPlainObject(s)?s:{width:y[0],height:y[1],tileSize:y[2],tileOverlap:y[3],minLevel:y[4],maxLevel:y[5]},e.EventSource.call(this),e.extend(!0,this,w),!this.success)for(O=0;O<arguments.length;O++)if(e.isFunction(arguments[O])){this.success=arguments[O];break}this.success&&this.addHandler("ready",function(R){p.success(R)}),"string"===e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=w.width&&w.height?w.width/w.height:1,this.dimensions=new e.Point(w.width,w.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=w.tileOverlap?w.tileOverlap:0,this.minLevel=w.minLevel?w.minLevel:0,this.maxLevel=null!=w.maxLevel?w.maxLevel:w.width&&w.height?Math.ceil(Math.log(Math.max(w.width,w.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(s){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(s){return this._tileWidth?this._tileWidth:this.getTileSize(s)},getTileHeight:function(s){return this._tileHeight?this._tileHeight:this.getTileSize(s)},setMaxLevel:function(s){this.maxLevel=s,this._memoizeLevelScale()},getLevelScale:function(s){return this._memoizeLevelScale(),this.getLevelScale(s)},_memoizeLevelScale:function(){var u,s={};for(u=0;u<=this.maxLevel;u++)s[u]=1/Math.pow(2,this.maxLevel-u);this.getLevelScale=function(d){return s[d]}},getNumTiles:function(s){var u=this.getLevelScale(s),d=Math.ceil(u*this.dimensions.x/this.getTileWidth(s)),r=Math.ceil(u*this.dimensions.y/this.getTileHeight(s));return new e.Point(d,r)},getPixelRatio:function(s){var u=this.dimensions.times(this.getLevelScale(s));return new e.Point(1/u.x*e.pixelDensityRatio,1/u.y*e.pixelDensityRatio)},getClosestLevel:function(){var s,u;for(s=this.minLevel+1;s<=this.maxLevel&&!((u=this.getNumTiles(s)).x>1||u.y>1);s++);return s-1},getTileAtPoint:function(s,u){e.console.assert(u.x>=0&&u.x<=1&&u.y>=0&&u.y<=1/this.aspectRatio,"[TileSource.getTileAtPoint] must be called with a valid point.");var r=this.dimensions.x*this.getLevelScale(s),a=u.y*r,p=Math.floor(u.x*r/this.getTileWidth(s)),y=Math.floor(a/this.getTileHeight(s));return u.x>=1&&(p=this.getNumTiles(s).x-1),u.y>=1/this.aspectRatio-1e-15&&(y=this.getNumTiles(s).y-1),new e.Point(p,y)},getTileBounds:function(s,u,d,r){var o=this.dimensions.times(this.getLevelScale(s)),a=this.getTileWidth(s),p=this.getTileHeight(s),y=0===u?0:a*u-this.tileOverlap,w=0===d?0:p*d-this.tileOverlap,O=a+(0===u?1:2)*this.tileOverlap,R=p+(0===d?1:2)*this.tileOverlap,A=1/o.x;return O=Math.min(O,o.x-y),R=Math.min(R,o.y-w),r?new e.Rect(0,0,O,R):new e.Rect(y*A,w*A,O*A,R*A)},getImageInfo:function(s){var d,r,o,a,p,y,w,u=this;s&&(w=(y=(p=s.split("/"))[p.length-1]).lastIndexOf("."))>-1&&(p[p.length-1]=y.slice(0,w));var O=null;if(this.splitHashDataForPost){var R=s.indexOf("#");-1!==R&&(O=s.substring(R+1),s=s.substr(0,R))}r=function(A){"string"==typeof A&&(A=e.parseXml(A));var C=e.TileSource.determineType(u,A,s);C?(void 0===(a=C.prototype.configure.apply(u,[A,s,O])).ajaxWithCredentials&&(a.ajaxWithCredentials=u.ajaxWithCredentials),o=new C(a),u.ready=!0,u.raiseEvent("ready",{tileSource:o})):u.raiseEvent("open-failed",{message:"Unable to load TileSource",source:s})},s.match(/\.js$/)?(d=s.split("/").pop().replace(".js",""),e.jsonp({url:s,async:!1,callbackName:d,callback:r})):e.makeAjaxRequest({url:s,postData:O,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(A){var C=function i(s){var o,u=s.responseText,d=s.status;if(!s)throw new Error(e.getString("Errors.Security"));if(200!==s.status&&0!==s.status)throw d=s.status,new Error(e.getString("Errors.Status",d,404===d?"Not Found":s.statusText));if(u.match(/\s*<.*/))try{o=s.responseXML&&s.responseXML.documentElement?s.responseXML:e.parseXml(u)}catch(a){o=s.responseText}else if(u.match(/\s*[{[].*/))try{o=e.parseJSON(u)}catch(a){o=u}else o=u;return o}(A);r(C)},error:function(A,C){var _;try{_="HTTP "+A.status+" attempting to load TileSource: "+s}catch(N){_=(void 0!==C&&C.toString?C.toString():"Unknown error")+" attempting to load TileSource: "+s}e.console.error(_),u.raiseEvent("open-failed",{message:_,source:s,postData:O})}})},supports:function(s,u){return!1},configure:function(s,u,d){throw new Error("Method not implemented.")},getTileUrl:function(s,u,d){throw new Error("Method not implemented.")},getTilePostData:function(s,u,d){return null},getTileAjaxHeaders:function(s,u,d){return{}},getTileHashKey:function(s,u,d,r,o,a){return o?r+"+"+JSON.stringify(o):r},tileExists:function(s,u,d){var r=this.getNumTiles(s);return s>=this.minLevel&&s<=this.maxLevel&&u>=0&&d>=0&&u<r.x&&d<r.y}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(s,u,d){var r;for(r in OpenSeadragon)if(r.match(/.+TileSource$/)&&e.isFunction(OpenSeadragon[r])&&e.isFunction(OpenSeadragon[r].prototype.supports)&&OpenSeadragon[r].prototype.supports.call(s,u,d))return OpenSeadragon[r];return e.console.error("No TileSource was able to open %s %s",d,u),null}}(OpenSeadragon),function(e){function s(u,d){var _,D,r=d.Image,o=r.Url,a=r.Format,p=r.Size,y=r.DisplayRect||[],w=parseInt(p.Width,10),O=parseInt(p.Height,10),R=parseInt(r.TileSize,10),A=parseInt(r.Overlap,10),C=[];for(D=0;D<y.length;D++)_=y[D].Rect,C.push(new e.DisplayRect(parseInt(_.X,10),parseInt(_.Y,10),parseInt(_.Width,10),parseInt(_.Height,10),parseInt(_.MinLevel,10),parseInt(_.MaxLevel,10)));return e.extend(!0,{width:w,height:O,tileSize:R,tileOverlap:A,minLevel:null,maxLevel:null,tilesUrl:o,fileFormat:a,displayRects:C},d)}e.DziTileSource=function(u,d,r,o,a,p,y,w,O){var R,A,C,_;if(_=e.isPlainObject(u)?u:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=_.tilesUrl,this.fileFormat=_.fileFormat,this.displayRects=_.displayRects,this.displayRects)for(R=this.displayRects.length-1;R>=0;R--)for(C=(A=this.displayRects[R]).minLevel;C<=A.maxLevel;C++)this._levelRects[C]||(this._levelRects[C]=[]),this._levelRects[C].push(A);e.TileSource.apply(this,[_])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(u,d){var r;return u.Image?r=u.Image.xmlns:u.documentElement&&("Image"===u.documentElement.localName||"Image"===u.documentElement.tagName)&&(r=u.documentElement.namespaceURI),-1!==(r=(r||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==r.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(u,d,r){var o;return o=e.isPlainObject(u)?s(0,u):function i(u,d){if(!d||!d.documentElement)throw new Error(e.getString("Errors.Xml"));var w,O,R,A,C,r=d.documentElement,o=r.localName||r.tagName,a=d.documentElement.namespaceURI,p=null,y=[];if("Image"===o)try{if(void 0===(A=r.getElementsByTagName("Size")[0])&&(A=r.getElementsByTagNameNS(a,"Size")[0]),p={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:r.getAttribute("Url"),Format:r.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(r.getAttribute("Overlap"),10),TileSize:parseInt(r.getAttribute("TileSize"),10),Size:{Height:parseInt(A.getAttribute("Height"),10),Width:parseInt(A.getAttribute("Width"),10)}}},!e.imageFormatSupported(p.Image.Format))throw new Error(e.getString("Errors.ImageFormat",p.Image.Format.toUpperCase()));for(void 0===(w=r.getElementsByTagName("DisplayRect"))&&(w=r.getElementsByTagNameNS(a,"DisplayRect")[0]),C=0;C<w.length;C++)void 0===(R=(O=w[C]).getElementsByTagName("Rect")[0])&&(R=O.getElementsByTagNameNS(a,"Rect")[0]),y.push({Rect:{X:parseInt(R.getAttribute("X"),10),Y:parseInt(R.getAttribute("Y"),10),Width:parseInt(R.getAttribute("Width"),10),Height:parseInt(R.getAttribute("Height"),10),MinLevel:parseInt(O.getAttribute("MinLevel"),10),MaxLevel:parseInt(O.getAttribute("MaxLevel"),10)}});return y.length&&(p.Image.DisplayRect=y),s(0,p)}catch(N){throw N instanceof Error?N:new Error(e.getString("Errors.Dzi"))}else{if("Collection"===o)throw new Error(e.getString("Errors.Dzc"));if("Error"===o){var _=r.getElementsByTagName("Message")[0];throw new Error(_.firstChild.nodeValue)}}throw new Error(e.getString("Errors.Dzi"))}(0,u),d&&!o.tilesUrl&&(o.tilesUrl=d.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),o.queryParams=-1!==d.search(/\.(dzi|xml|js)\?/)?d.match(/\?.*/):""),o},getTileUrl:function(u,d,r){return[this.tilesUrl,u,"/",d,"_",r,".",this.fileFormat,this.queryParams].join("")},tileExists:function(u,d,r){var a,p,y,w,O,R,A,o=this._levelRects[u];if(this.minLevel&&u<this.minLevel||this.maxLevel&&u>this.maxLevel)return!1;if(!o||!o.length)return!0;for(A=o.length-1;A>=0;A--)if(!(u<(a=o[A]).minLevel||u>a.maxLevel)&&(p=this.getLevelScale(u),O=(y=a.x*p)+a.width*p,R=(w=a.y*p)+a.height*p,y=Math.floor(y/this._tileWidth),w=Math.floor(w/this._tileWidth),O=Math.ceil(O/this._tileWidth),R=Math.ceil(R/this._tileWidth),y<=d&&d<O&&w<=r&&r<R))return!0;return!1}})}(OpenSeadragon),function(e){function i(r){var a=Array.isArray(r.profile)?r.profile[0]:r.profile,p=-1!==["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"].indexOf(a),y=!1;return 2===r.version&&r.profile.length>1&&r.profile[1].supports&&(y=-1!==r.profile[1].supports.indexOf("sizeByW")),3===r.version&&r.extraFeatures&&(y=-1!==r.extraFeatures.indexOf("sizeByWh")),!p||y}function s(r){for(var o=[],a=0;a<r.sizes.length;a++)o.push({url:r["@id"]+"/full/"+r.sizes[a].width+","+(3===r.version?r.sizes[a].height:"")+"/0/default."+r.tileFormat,width:r.sizes[a].width,height:r.sizes[a].height});return o.sort(function(p,y){return p.width-y.width})}function d(r,o,a){var p,y;if(3===r.nodeType&&a)(y=r.nodeValue.trim()).match(/^\d*$/)&&(y=Number(y)),o[a]?(e.isArray(o[a])||(o[a]=[o[a]]),o[a].push(y)):o[a]=y;else if(1===r.nodeType)for(p=0;p<r.childNodes.length;p++)d(r.childNodes[p],o,r.nodeName)}e.IIIFTileSource=function(r){if(e.extend(!0,this,r),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(r.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=r.version,this.tile_width&&this.tile_height)r.tileWidth=this.tile_width,r.tileHeight=this.tile_height;else if(this.tile_width)r.tileSize=this.tile_width;else if(this.tile_height)r.tileSize=this.tile_height;else if(this.tiles)if(1===this.tiles.length)r.tileWidth=this.tiles[0].width,r.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var o=0;o<this.tiles.length;o++)for(var a=0;a<this.tiles[o].scaleFactors.length;a++){var p=this.tiles[o].scaleFactors[a];this.scale_factors.push(p),r.tileSizePerScaleFactor[p]={width:this.tiles[o].width,height:this.tiles[o].height||this.tiles[o].width}}}else if(i(r)){for(var y=Math.min(this.height,this.width),w=[256,512,1024],O=[],R=0;R<w.length;R++)w[R]<=y&&O.push(w[R]);r.tileSize=O.length>0?Math.max.apply(null,O):y}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,r.levels=s(this),e.extend(!0,r,{width:r.levels[r.levels.length-1].width,height:r.levels[r.levels.length-1].height,tileSize:Math.max(r.height,r.width),tileOverlap:0,minLevel:0,maxLevel:r.levels.length-1}),this.levels=r.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!r.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var A=Math.max.apply(null,this.scale_factors);r.maxLevel=Math.round(Math.log(A)*Math.LOG2E)}else r.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));e.TileSource.apply(this,[r])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(r,o){return!!(r.protocol&&"http://iiif.io/api/image"===r.protocol||r["@context"]&&("http://library.stanford.edu/iiif/image-api/1.1/context.json"===r["@context"]||"http://iiif.io/api/image/1/context.json"===r["@context"])||r.profile&&0===r.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")||r.identifier&&r.width&&r.height)||!(!r.documentElement||"info"!==r.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!==r.documentElement.namespaceURI)},configure:function(r,o,a){if(e.isPlainObject(r)){if(r["@context"]){var y=r["@context"];if(Array.isArray(y))for(var w=0;w<y.length;w++)if("string"==typeof y[w]&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(y[w])||"http://library.stanford.edu/iiif/image-api/1.1/context.json"===y[w])){y=y[w];break}switch(y){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":r.version=1;break;case"http://iiif.io/api/image/2/context.json":r.version=2;break;case"http://iiif.io/api/image/3/context.json":r.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}else r["@context"]="http://iiif.io/api/image/1.0/context.json",r["@id"]=o.replace("/info.json",""),r.version=1;if(!r["@id"]&&r.id&&(r["@id"]=r.id),r.preferredFormats)for(var O=0;O<r.preferredFormats.length;O++)if(OpenSeadragon.imageFormatSupported(r.preferredFormats[O])){r.tileFormat=r.preferredFormats[O];break}return r}var p=function u(r){if(!r||!r.documentElement)throw new Error(e.getString("Errors.Xml"));var o=r.documentElement,p=null;if("info"===o.tagName)try{return d(o,p={}),p}catch(y){throw y instanceof Error?y:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}(r);return p["@context"]="http://iiif.io/api/image/1.0/context.json",p["@id"]=o.replace("/info.xml",""),p.version=1,p},getTileWidth:function(r){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,r);var o=Math.pow(2,this.maxLevel-r);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[o]?this.tileSizePerScaleFactor[o].width:this._tileWidth},getTileHeight:function(r){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,r);var o=Math.pow(2,this.maxLevel-r);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[o]?this.tileSizePerScaleFactor[o].height:this._tileHeight},getLevelScale:function(r){if(this.emulateLegacyImagePyramid){var o=NaN;return this.levels.length>0&&r>=this.minLevel&&r<=this.maxLevel&&(o=this.levels[r].width/this.levels[this.maxLevel].width),o}return e.TileSource.prototype.getLevelScale.call(this,r)},getNumTiles:function(r){return this.emulateLegacyImagePyramid?this.getLevelScale(r)?new e.Point(1,1):new e.Point(0,0):e.TileSource.prototype.getNumTiles.call(this,r)},getTileAtPoint:function(r,o){return this.emulateLegacyImagePyramid?new e.Point(0,0):e.TileSource.prototype.getTileAtPoint.call(this,r,o)},getTileUrl:function(r,o,a){if(this.emulateLegacyImagePyramid){var p=null;return this.levels.length>0&&r>=this.minLevel&&r<=this.maxLevel&&(p=this.levels[r].url),p}var A,C,_,D,N,Z,Y,re,h,ie,ye,Oe,_e,w=Math.pow(.5,this.maxLevel-r),O=Math.ceil(this.width*w),R=Math.ceil(this.height*w);return A=this.getTileWidth(r),C=this.getTileHeight(r),_=Math.ceil(A/w),D=Math.ceil(C/w),_e=1===this.version?"native."+this.tileFormat:"default."+this.tileFormat,O<A&&R<C?(ie=2===this.version&&O===this.width?"full":3===this.version&&O===this.width&&R===this.height?"max":3===this.version?O+","+R:O+",",N="full"):(Z=o*_,Y=a*D,re=Math.min(_,this.width-Z),h=Math.min(D,this.height-Y),N=0===o&&0===a&&re===this.width&&h===this.height?"full":[Z,Y,re,h].join(","),ye=Math.ceil(re*w),Oe=Math.ceil(h*w),ie=2===this.version&&ye===this.width?"full":3===this.version&&ye===this.width&&Oe===this.height?"max":3===this.version?ye+","+Oe:ye+","),[this["@id"],N,ie,"0",_e].join("/")},__testonly__:{canBeTiled:i,constructLevels:s}})}(OpenSeadragon),function(e){e.OsmTileSource=function(i,s,u,d,r){var o;(!(o=e.isPlainObject(i)?i:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]}).width||!o.height)&&(o.width=65572864,o.height=65572864),o.tileSize||(o.tileSize=256,o.tileOverlap=0),o.tilesUrl||(o.tilesUrl="http://tile.openstreetmap.org/"),o.minLevel=8,e.TileSource.apply(this,[o])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(i,s){return i.type&&"openstreetmaps"===i.type},configure:function(i,s,u){return i},getTileUrl:function(i,s,u){return this.tilesUrl+(i-8)+"/"+s+"/"+u+".png"}})}(OpenSeadragon),function(e){e.TmsTileSource=function(i,s,u,d,r){var o;o=e.isPlainObject(i)?i:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var y,a=256*Math.ceil(o.width/256),p=256*Math.ceil(o.height/256);y=a>p?a/256:p/256,o.maxLevel=Math.ceil(Math.log(y)/Math.log(2))-1,o.tileSize=256,o.width=a,o.height=p,e.TileSource.apply(this,[o])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(i,s){return i.type&&"tiledmapservice"===i.type},configure:function(i,s,u){return i},getTileUrl:function(i,s,u){var d=this.getNumTiles(i).y-1;return this.tilesUrl+i+"/"+s+"/"+(d-u)+".png"}})}(OpenSeadragon),function(e){e.ZoomifyTileSource=function(i){void 0===i.tileSize&&(i.tileSize=256),void 0===i.fileFormat&&(i.fileFormat="jpg",this.fileFormat=i.fileFormat);var s={x:i.width,y:i.height};for(i.imageSizes=[{x:i.width,y:i.height}],i.gridSize=[this._getGridSize(i.width,i.height,i.tileSize)];parseInt(s.x,10)>i.tileSize||parseInt(s.y,10)>i.tileSize;)s.x=Math.floor(s.x/2),s.y=Math.floor(s.y/2),i.imageSizes.push({x:s.x,y:s.y}),i.gridSize.push(this._getGridSize(s.x,s.y,i.tileSize));i.imageSizes.reverse(),i.gridSize.reverse(),i.minLevel=0,i.maxLevel=i.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[i])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(i,s,u){return{x:Math.ceil(i/u),y:Math.ceil(s/u)}},_calculateAbsoluteTileNumber:function(i,s,u){for(var d=0,r={},o=0;o<i;o++)d+=(r=this.gridSize[o]).x*r.y;return d+((r=this.gridSize[i]).x*u+s)},supports:function(i,s){return i.type&&"zoomifytileservice"===i.type},configure:function(i,s,u){return i},getTileUrl:function(i,s,u){var d,r=this._calculateAbsoluteTileNumber(i,s,u);return d=Math.floor(r/256),this.tilesUrl+"TileGroup"+d+"/"+i+"-"+s+"-"+u+"."+this.fileFormat}})}(OpenSeadragon),function(e){function u(d,r){return r.levels}e.LegacyTileSource=function(d){var r,o,a;e.isArray(d)&&(r={type:"legacy-image-pyramid",levels:d}),r.levels=function i(d){var o,a,r=[];for(a=0;a<d.length;a++)(o=d[a]).height&&o.width&&o.url?r.push({url:o.url,width:Number(o.width),height:Number(o.height)}):e.console.error("Unsupported image format: %s",o.url?o.url:"<no URL>");return r.sort(function(p,y){return p.height-y.height})}(r.levels),r.levels.length>0?(o=r.levels[r.levels.length-1].width,a=r.levels[r.levels.length-1].height):(o=0,a=0,e.console.error("No supported image formats found")),e.extend(!0,r,{width:o,height:a,tileSize:Math.max(a,o),tileOverlap:0,minLevel:0,maxLevel:r.levels.length>0?r.levels.length-1:0}),e.TileSource.apply(this,[r]),this.levels=r.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(d,r){return d.type&&"legacy-image-pyramid"===d.type||d.documentElement&&"legacy-image-pyramid"===d.documentElement.getAttribute("type")},configure:function(d,r,o){var a;return a=e.isPlainObject(d)?u(0,d):function s(d,r){if(!r||!r.documentElement)throw new Error(e.getString("Errors.Xml"));var w,O,o=r.documentElement,a=o.tagName,p=null,y=[];if("image"===a)try{for(p={type:o.getAttribute("type"),levels:[]},y=o.getElementsByTagName("level"),O=0;O<y.length;O++)p.levels.push({url:(w=y[O]).getAttribute("url"),width:parseInt(w.getAttribute("width"),10),height:parseInt(w.getAttribute("height"),10)});return u(0,p)}catch(R){throw R instanceof Error?R:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"===a)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"===a)throw new Error("Error: "+r)}throw new Error("Unknown element "+a)}(0,d),a},getLevelScale:function(d){var r=NaN;return this.levels.length>0&&d>=this.minLevel&&d<=this.maxLevel&&(r=this.levels[d].width/this.levels[this.maxLevel].width),r},getNumTiles:function(d){return this.getLevelScale(d)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(d,r,o){var a=null;return this.levels.length>0&&d>=this.minLevel&&d<=this.maxLevel&&(a=this.levels[d].url),a}})}(OpenSeadragon),function(e){e.ImageTileSource=function(i){i=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},i),e.TileSource.apply(this,[i])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(i,s){return i.type&&"image"===i.type},configure:function(i,s,u){return i},getImageInfo:function(i){var s=this._image=new Image,u=this;this.crossOriginPolicy&&(s.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(s.useCredentials=this.ajaxWithCredentials),e.addEvent(s,"load",function(){u.width=s.naturalWidth,u.height=s.naturalHeight,u.aspectRatio=u.width/u.height,u.dimensions=new e.Point(u.width,u.height),u._tileWidth=u.width,u._tileHeight=u.height,u.tileOverlap=0,u.minLevel=0,u.levels=u._buildLevels(),u.maxLevel=u.levels.length-1,u.ready=!0,u.raiseEvent("ready",{tileSource:u})}),e.addEvent(s,"error",function(){u.raiseEvent("open-failed",{message:"Error loading image at "+i,source:i})}),s.src=i},getLevelScale:function(i){var s=NaN;return i>=this.minLevel&&i<=this.maxLevel&&(s=this.levels[i].width/this.levels[this.maxLevel].width),s},getNumTiles:function(i){return this.getLevelScale(i)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(i,s,u){var d=null;return i>=this.minLevel&&i<=this.maxLevel&&(d=this.levels[i].url),d},getContext2D:function(i,s,u){var d=null;return i>=this.minLevel&&i<=this.maxLevel&&(d=this.levels[i].context2D),d},destroy:function(){this._freeupCanvasMemory()},_buildLevels:function(){var i=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,i;var s=this._image.naturalWidth,u=this._image.naturalHeight,d=document.createElement("canvas"),r=d.getContext("2d");if(d.width=s,d.height=u,r.drawImage(this._image,0,0,s,u),i[0].context2D=r,delete this._image,e.isCanvasTainted(d))return i;for(;s>=2&&u>=2;){s=Math.floor(s/2),u=Math.floor(u/2);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=s,o.height=u,a.drawImage(d,0,0,s,u),i.splice(0,0,{context2D:a,width:s,height:u}),d=o,r=a}return i},_freeupCanvasMemory:function(){for(var i=0;i<this.levels.length;i++)this.levels[i].context2D&&(this.levels[i].context2D.canvas.height=0,this.levels[i].context2D.canvas.width=0)}})}(OpenSeadragon),function(e){e.TileSourceCollection=function(i,s,u,d){e.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(e){function i(a){e.requestAnimationFrame(function(){!function s(a){var w;a.shouldFade&&(w=1-(e.now()-a.fadeBeginTime)/a.fadeLength,w=Math.min(1,w),w=Math.max(0,w),a.imgGroup&&e.setElementOpacity(a.imgGroup,w,!0),w>0&&i(a))}(a)})}function r(a,p){a.element.disabled||(p>=e.ButtonState.GROUP&&a.currentState===e.ButtonState.REST&&(function d(a){a.shouldFade=!1,a.imgGroup&&e.setElementOpacity(a.imgGroup,1,!0)}(a),a.currentState=e.ButtonState.GROUP),p>=e.ButtonState.HOVER&&a.currentState===e.ButtonState.GROUP&&(a.imgHover&&(a.imgHover.style.visibility=""),a.currentState=e.ButtonState.HOVER),p>=e.ButtonState.DOWN&&a.currentState===e.ButtonState.HOVER&&(a.imgDown&&(a.imgDown.style.visibility=""),a.currentState=e.ButtonState.DOWN))}function o(a,p){a.element.disabled||(p<=e.ButtonState.HOVER&&a.currentState===e.ButtonState.DOWN&&(a.imgDown&&(a.imgDown.style.visibility="hidden"),a.currentState=e.ButtonState.HOVER),p<=e.ButtonState.GROUP&&a.currentState===e.ButtonState.HOVER&&(a.imgHover&&(a.imgHover.style.visibility="hidden"),a.currentState=e.ButtonState.GROUP),p<=e.ButtonState.REST&&a.currentState===e.ButtonState.GROUP&&(function u(a){a.shouldFade=!0,a.fadeBeginTime=e.now()+a.fadeDelay,window.setTimeout(function(){i(a)},a.fadeDelay)}(a),a.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(a){var p=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},a),this.element=a.element||e.makeNeutralElement("div"),a.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,e.setElementPointerEventsNone(this.imgRest),e.setElementPointerEventsNone(this.imgGroup),e.setElementPointerEventsNone(this.imgHover),e.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor===e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(y){y.insideElementPressed?(r(p,e.ButtonState.DOWN),p.raiseEvent("enter",{originalEvent:y.originalEvent})):y.buttonDownAny||r(p,e.ButtonState.HOVER)},focusHandler:function(y){p.tracker.enterHandler(y),p.raiseEvent("focus",{originalEvent:y.originalEvent})},leaveHandler:function(y){o(p,e.ButtonState.GROUP),y.insideElementPressed&&p.raiseEvent("exit",{originalEvent:y.originalEvent})},blurHandler:function(y){p.tracker.leaveHandler(y),p.raiseEvent("blur",{originalEvent:y.originalEvent})},pressHandler:function(y){r(p,e.ButtonState.DOWN),p.raiseEvent("press",{originalEvent:y.originalEvent})},releaseHandler:function(y){y.insideElementPressed&&y.insideElementReleased?(o(p,e.ButtonState.HOVER),p.raiseEvent("release",{originalEvent:y.originalEvent})):y.insideElementPressed?o(p,e.ButtonState.GROUP):r(p,e.ButtonState.HOVER)},clickHandler:function(y){y.quick&&p.raiseEvent("click",{originalEvent:y.originalEvent})},keyHandler:function(y){13===y.keyCode?(p.raiseEvent("click",{originalEvent:y.originalEvent}),p.raiseEvent("release",{originalEvent:y.originalEvent}),y.preventDefault=!0):y.preventDefault=!1}}),o(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){r(this,e.ButtonState.GROUP)},notifyGroupExit:function(){o(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}})}(OpenSeadragon),function(e){e.ButtonGroup=function(i){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},i);var d,s=this.buttons.concat([]),u=this;if(this.element=i.element||e.makeNeutralElement("div"),!i.group)for(this.element.style.display="inline-block",d=0;d<s.length;d++)this.element.appendChild(s[d].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(r){var o;for(o=0;o<u.buttons.length;o++)u.buttons[o].notifyGroupEnter()},leaveHandler:function(r){var o;if(!r.insideElementPressed)for(o=0;o<u.buttons.length;o++)u.buttons[o].notifyGroupExit()}})},e.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var i=this.buttons.pop();this.element.removeChild(i.element),i.destroy()}this.tracker.destroy(),this.element=null}}}(OpenSeadragon),function(e){e.Rect=function(i,s,u,d,r){var o,a;this.x="number"==typeof i?i:0,this.y="number"==typeof s?s:0,this.width="number"==typeof u?u:0,this.height="number"==typeof d?d:0,this.degrees="number"==typeof r?r:0,this.degrees=e.positiveModulo(this.degrees,360),this.degrees>=270?(o=this.getTopRight(),this.x=o.x,this.y=o.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=270):this.degrees>=180?(o=this.getBottomRight(),this.x=o.x,this.y=o.y,this.degrees-=180):this.degrees>=90&&(o=this.getBottomLeft(),this.x=o.x,this.y=o.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=90)},e.Rect.fromSummits=function(i,s,u){var d=i.distanceTo(s),r=i.distanceTo(u),o=s.minus(i),a=Math.atan(o.y/o.x);return o.x<0?a+=Math.PI:o.y<0&&(a+=2*Math.PI),new e.Rect(i.x,i.y,d,r,a/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(i){return i instanceof e.Rect&&this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height&&this.degrees===i.degrees},times:function(i){return new e.Rect(this.x*i,this.y*i,this.width*i,this.height*i,this.degrees)},translate:function(i){return new e.Rect(this.x+i.x,this.y+i.y,this.width,this.height,this.degrees)},union:function(i){var s=this.getBoundingBox(),u=i.getBoundingBox(),d=Math.min(s.x,u.x),r=Math.min(s.y,u.y),o=Math.max(s.x+s.width,u.x+u.width),a=Math.max(s.y+s.height,u.y+u.height);return new e.Rect(d,r,o-d,a-r)},intersection:function(i){var s=1e-10,u=[],d=this.getTopLeft();i.containsPoint(d,s)&&u.push(d);var r=this.getTopRight();i.containsPoint(r,s)&&u.push(r);var o=this.getBottomLeft();i.containsPoint(o,s)&&u.push(o);var a=this.getBottomRight();i.containsPoint(a,s)&&u.push(a);var p=i.getTopLeft();this.containsPoint(p,s)&&u.push(p);var y=i.getTopRight();this.containsPoint(y,s)&&u.push(y);var w=i.getBottomLeft();this.containsPoint(w,s)&&u.push(w);var O=i.getBottomRight();this.containsPoint(O,s)&&u.push(O);for(var R=this._getSegments(),A=i._getSegments(),C=0;C<R.length;C++)for(var _=R[C],D=0;D<A.length;D++){var N=A[D],Z=Y(_[0],_[1],N[0],N[1]);Z&&u.push(Z)}function Y(Ue,qe,nt,Bt){var ft=qe.minus(Ue),Ve=Bt.minus(nt),ut=-Ve.x*ft.y+ft.x*Ve.y;if(0===ut)return null;var Dt=(ft.x*(Ue.y-nt.y)-ft.y*(Ue.x-nt.x))/ut,xe=(Ve.x*(Ue.y-nt.y)-Ve.y*(Ue.x-nt.x))/ut;return-s<=Dt&&Dt<=1-s&&-s<=xe&&xe<=1-s?new e.Point(Ue.x+xe*ft.x,Ue.y+xe*ft.y):null}if(0===u.length)return null;for(var re=u[0].x,h=u[0].x,ie=u[0].y,ye=u[0].y,Oe=1;Oe<u.length;Oe++){var _e=u[Oe];_e.x<re&&(re=_e.x),_e.x>h&&(h=_e.x),_e.y<ie&&(ie=_e.y),_e.y>ye&&(ye=_e.y)}return new e.Rect(re,ie,h-re,ye-ie)},_getSegments:function(){var i=this.getTopLeft(),s=this.getTopRight(),u=this.getBottomLeft(),d=this.getBottomRight();return[[i,s],[s,d],[d,u],[u,i]]},rotate:function(i,s){if(0===(i=e.positiveModulo(i,360)))return this.clone();s=s||this.getCenter();var u=this.getTopLeft().rotate(i,s),r=this.getTopRight().rotate(i,s).minus(u);r=r.apply(function(a){return Math.abs(a)<1e-15?0:a});var o=Math.atan(r.y/r.x);return r.x<0?o+=Math.PI:r.y<0&&(o+=2*Math.PI),new e.Rect(u.x,u.y,this.width,this.height,o/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var i=this.getTopLeft(),s=this.getTopRight(),u=this.getBottomLeft(),d=this.getBottomRight(),r=Math.min(i.x,s.x,u.x,d.x),o=Math.max(i.x,s.x,u.x,d.x),a=Math.min(i.y,s.y,u.y,d.y),p=Math.max(i.y,s.y,u.y,d.y);return new e.Rect(r,a,o-r,p-a)},getIntegerBoundingBox:function(){var i=this.getBoundingBox(),s=Math.floor(i.x),u=Math.floor(i.y),d=Math.ceil(i.width+i.x-s),r=Math.ceil(i.height+i.y-u);return new e.Rect(s,u,d,r)},containsPoint:function(i,s){s=s||0;var u=this.getTopLeft(),d=this.getTopRight(),r=this.getBottomLeft(),o=d.minus(u),a=r.minus(u);return(i.x-u.x)*o.x+(i.y-u.y)*o.y>=-s&&(i.x-d.x)*o.x+(i.y-d.y)*o.y<=s&&(i.x-u.x)*a.x+(i.y-u.y)*a.y>=-s&&(i.x-r.x)*a.x+(i.y-r.y)*a.y<=s},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(OpenSeadragon),function(e){var i={};function s(w){var O;w.quick&&(O="horizontal"===this.scroll?Math.floor(w.position.x/this.panelWidth):Math.floor(w.position.y/this.panelHeight),this.viewer.goToPage(O)),this.element.focus()}function u(w){if(this.dragging=!0,this.element){var O=Number(this.element.style.marginLeft.replace("px","")),R=Number(this.element.style.marginTop.replace("px","")),A=Number(this.element.style.width.replace("px","")),C=Number(this.element.style.height.replace("px","")),_=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?-w.delta.x>0?O>-(A-_.x)&&(this.element.style.marginLeft=O+2*w.delta.x+"px",r(this,_.x,O+2*w.delta.x)):-w.delta.x<0&&O<0&&(this.element.style.marginLeft=O+2*w.delta.x+"px",r(this,_.x,O+2*w.delta.x)):-w.delta.y>0?R>-(C-_.y)&&(this.element.style.marginTop=R+2*w.delta.y+"px",r(this,_.y,R+2*w.delta.y)):-w.delta.y<0&&R<0&&(this.element.style.marginTop=R+2*w.delta.y+"px",r(this,_.y,R+2*w.delta.y))}}function d(w){if(this.element){var O=Number(this.element.style.marginLeft.replace("px","")),R=Number(this.element.style.marginTop.replace("px","")),A=Number(this.element.style.width.replace("px","")),C=Number(this.element.style.height.replace("px","")),_=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?w.scroll>0?O>-(A-_.x)&&(this.element.style.marginLeft=O-60*w.scroll+"px",r(this,_.x,O-60*w.scroll)):w.scroll<0&&O<0&&(this.element.style.marginLeft=O-60*w.scroll+"px",r(this,_.x,O-60*w.scroll)):w.scroll<0?R>_.y-C&&(this.element.style.marginTop=R+60*w.scroll+"px",r(this,_.y,R+60*w.scroll)):w.scroll>0&&R<0&&(this.element.style.marginTop=R+60*w.scroll+"px",r(this,_.y,R+60*w.scroll)),w.preventDefault=!0}}function r(w,O,R){var A,C,_,D,N,Z;for(A="horizontal"===w.scroll?w.panelWidth:w.panelHeight,C=Math.ceil(O/A)+5,N=C=(C=(_=Math.ceil((Math.abs(R)+O)/A)+1)-C)<0?0:C;N<_&&N<w.panels.length;N++)if(!(Z=w.panels[N]).activePanel){var re=w.viewer.tileSources[N];D=new e.Viewer({id:Z.id,tileSources:[re.referenceStripThumbnailUrl?{type:"image",url:re.referenceStripThumbnailUrl}:re],element:Z,navigatorSizeRatio:w.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:w.viewer.loadTilesWithAjax,ajaxHeaders:w.viewer.ajaxHeaders,useCanvas:w.useCanvas}),e.setElementPointerEventsNone(D.canvas),e.setElementPointerEventsNone(D.container),D.innerTracker.setTracking(!1),D.outerTracker.setTracking(!1),w.miniViewers[Z.id]=D,Z.activePanel=!0}}function o(w){var O=w.eventSource.element;"horizontal"===this.scroll?O.style.marginBottom="0px":O.style.marginLeft="0px"}function a(w){var O=w.eventSource.element;"horizontal"===this.scroll?O.style.marginBottom="-"+e.getElementSize(O).y/2+"px":O.style.marginLeft="-"+e.getElementSize(O).x/2+"px"}function p(w){if(w.ctrl||w.alt||w.meta)w.preventDefault=!1;else switch(w.keyCode){case 38:case 39:d.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),w.preventDefault=!0;break;case 40:case 37:d.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),w.preventDefault=!0;break;default:w.preventDefault=!1}}function y(w){if(w.ctrl||w.alt||w.meta)w.preventDefault=!1;else switch(w.keyCode){case 61:case 48:case 119:case 87:case 100:d.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),w.preventDefault=!0;break;case 45:case 115:case 83:case 97:d.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),w.preventDefault=!0;break;default:w.preventDefault=!1}}e.ReferenceStrip=function(w){var C,_,D,R=w.viewer,A=e.getElementSize(R.element);for(w.id||(w.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=w.id,this.element.className="referencestrip"),w=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},w,{element:this.element}),e.extend(this,w),i[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,(_=this.element.style).marginTop="0px",_.marginRight="0px",_.marginBottom="0px",_.marginLeft="0px",_.left="0px",_.bottom="0px",_.border="0px",_.background="#000",_.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=R,this.tracker=new e.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:e.delegate(this,s),dragHandler:e.delegate(this,u),scrollHandler:e.delegate(this,d),enterHandler:e.delegate(this,o),leaveHandler:e.delegate(this,a),keyDownHandler:e.delegate(this,p),keyHandler:e.delegate(this,y),preProcessEventHandler:function(N){"wheel"===N.eventType&&(N.preventDefault=!0)}}),w.width&&w.height?(this.element.style.width=w.width+"px",this.element.style.height=w.height+"px",R.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"===w.scroll?(this.element.style.width=A.x*w.sizeRatio*R.tileSources.length+12*R.tileSources.length+"px",this.element.style.height=A.y*w.sizeRatio+"px",R.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=A.y*w.sizeRatio*R.tileSources.length+12*R.tileSources.length+"px",this.element.style.width=A.x*w.sizeRatio+"px",R.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=A.x*this.sizeRatio+8,this.panelHeight=A.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},D=0;D<R.tileSources.length;D++)(C=e.makeNeutralElement("div")).id=this.element.id+"-"+D,C.style.width=this.panelWidth+"px",C.style.height=this.panelHeight+"px",C.style.display="inline",C.style.float="left",C.style.cssFloat="left",C.style.styleFloat="left",C.style.padding="2px",e.setElementTouchActionNone(C),e.setElementPointerEventsNone(C),this.element.appendChild(C),C.activePanel=!1,this.panels.push(C);r(this,"vertical"===this.scroll?A.y:A.x,0),this.setFocus(0)},e.ReferenceStrip.prototype={setFocus:function(w){var N,O=this.element.querySelector("#"+this.element.id+"-"+w),R=e.getElementSize(this.viewer.canvas),A=Number(this.element.style.width.replace("px","")),C=Number(this.element.style.height.replace("px","")),_=-Number(this.element.style.marginLeft.replace("px","")),D=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==O&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=O,this.currentSelected.style.background="#999","horizontal"===this.scroll?(N=Number(w)*(this.panelWidth+3))>_+R.x-this.panelWidth?(N=Math.min(N,A-R.x),this.element.style.marginLeft=-N+"px",r(this,R.x,-N)):N<_&&(N=Math.max(0,N-R.x/2),this.element.style.marginLeft=-N+"px",r(this,R.x,-N)):(N=Number(w)*(this.panelHeight+3))>D+R.y-this.panelHeight?(N=Math.min(N,C-R.y),this.element.style.marginTop=-N+"px",r(this,R.y,-N)):N<D&&(N=Math.max(0,N-R.y/2),this.element.style.marginTop=-N+"px",r(this,R.y,-N)),this.currentPage=w,o.call(this,{eventSource:this.tracker}))},update:function(){return!!i[this.id].animating},destroy:function(){if(this.miniViewers)for(var w in this.miniViewers)this.miniViewers[w].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}}}(OpenSeadragon),function(e){e.DisplayRect=function(i,s,u,d,r,o){e.Rect.apply(this,[i,s,u,d]),this.minLevel=r,this.maxLevel=o},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(OpenSeadragon),function(e){e.Spring=function(s){var u=arguments;"object"!=typeof s&&(s={initial:u.length&&"number"==typeof u[0]?u[0]:void 0,springStiffness:u.length>1?u[1].springStiffness:5,animationTime:u.length>1?u[1].animationTime:1.5}),e.console.assert("number"==typeof s.springStiffness&&0!==s.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"==typeof s.animationTime&&s.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),s.exponential&&(this._exponential=!0,delete s.exponential),e.extend(!0,this,s),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(s){e.console.assert(!this._exponential||0!==s,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=s,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(s){e.console.assert(!this._exponential||0!==s,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=s,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(s){this.start.value+=s,this.target.value+=s,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(s){this._exponential=s,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){var s,u;this.current.time=e.now(),this._exponential?(s=this.start._logValue,u=this.target._logValue):(s=this.start.value,u=this.target.value);var d=this.current.time>=this.target.time?u:s+(u-s)*function i(s,u){return(1-Math.exp(s*-u))/(1-Math.exp(-s))}(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),r=this.current.value;return this.current.value=this._exponential?Math.exp(d):d,r!==this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(OpenSeadragon),function(e){function i(u){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null},u),this.image=null}i.prototype={errorMsg:null,start:function(){var u=this,d=this.abort;this.image=new Image,this.image.onload=function(){u.finish(!0)},this.image.onabort=this.image.onerror=function(){u.errorMsg="Image load aborted",u.finish(!1)},this.jobId=window.setTimeout(function(){u.errorMsg="Image load exceeded timeout ("+u.timeout+" ms)",u.finish(!1)},this.timeout),this.loadWithAjax?(this.request=e.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",postData:this.postData,success:function(r){var o;try{o=new window.Blob([r.response])}catch(w){var a=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===w.name&&a){var p=new a;p.append(r.response),o=p.getBlob()}}0===o.size&&(u.errorMsg="Empty image response.",u.finish(!1));var y=(window.URL||window.webkitURL).createObjectURL(o);u.image.src=y},error:function(r){u.errorMsg="Image load aborted - XHR error: Ajax returned "+r.status,u.finish(!1)}}),this.abort=function(){u.request.abort(),"function"==typeof d&&d()}):(!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(u){this.image.onload=this.image.onerror=this.image.onabort=null,u||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(u){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},u)},e.ImageLoader.prototype={addJob:function(u){var d=this,o={src:u.src,loadWithAjax:u.loadWithAjax,ajaxHeaders:u.loadWithAjax?u.ajaxHeaders:null,crossOriginPolicy:u.crossOriginPolicy,ajaxWithCredentials:u.ajaxWithCredentials,postData:u.postData,callback:function(p){!function s(u,d,r){u.jobsInProgress--,(!u.jobLimit||u.jobsInProgress<u.jobLimit)&&u.jobQueue.length>0&&(u.jobQueue.shift().start(),u.jobsInProgress++),r(d.image,d.errorMsg,d.request)}(d,p,u.callback)},abort:u.abort,timeout:this.timeout},a=new i(o);!this.jobLimit||this.jobsInProgress<this.jobLimit?(a.start(),this.jobsInProgress++):this.jobQueue.push(a)},clear:function(){for(var u=0;u<this.jobQueue.length;u++){var d=this.jobQueue[u];"function"==typeof d.abort&&d.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(e){e.Tile=function(i,s,u,d,r,o,a,p,y,w,O,R){this.level=i,this.x=s,this.y=u,this.bounds=d,this.sourceBounds=w,this.exists=r,this.url=o,this.postData=O,this.context2D=a,this.loadWithAjax=p,this.ajaxHeaders=y,void 0===R&&(e.console.error("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),R=e.TileSource.prototype.getTileHashKey(i,s,u,o,y,O)),this.cacheKey=R,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(i){this.cacheImageRecord?this.loaded?(this.element||(this.element=e.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!==i&&i.appendChild(this.element),this.imgElement.parentNode!==this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",this.flipped&&(this.style.transform="scaleX(-1)"),e.setElementOpacity(this.element,this.opacity)):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(i,s,u,d,r){var p,y,w,o=this.position.times(e.pixelDensityRatio),a=this.size.times(e.pixelDensityRatio);this.context2D||this.cacheImageRecord?(p=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&p?(i.save(),i.globalAlpha=this.opacity,"number"==typeof u&&1!==u&&(o=o.times(u),a=a.times(u)),d instanceof e.Point&&(o=o.plus(d)),1===i.globalAlpha&&this._hasTransparencyChannel()&&(r&&(o.x=Math.round(o.x),o.y=Math.round(o.y),a.x=Math.round(a.x),a.y=Math.round(a.y)),i.clearRect(o.x,o.y,a.x,a.y)),s({context:i,tile:this,rendered:p}),this.sourceBounds?(y=Math.min(this.sourceBounds.width,p.canvas.width),w=Math.min(this.sourceBounds.height,p.canvas.height)):(y=p.canvas.width,w=p.canvas.height),i.translate(o.x+a.x/2,0),this.flipped&&i.scale(-1,1),i.drawImage(p.canvas,0,0,y,w,-a.x/2,o.y,a.x,a.y),i.restore()):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var i;if(this.cacheImageRecord)i=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;i=this.context2D}return i.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(i,s,u){var d=Math.max(1,Math.ceil((u.x-s.x)/2)),r=Math.max(1,Math.ceil((u.y-s.y)/2));return new e.Point(d,r).minus(this.position.times(e.pixelDensityRatio).times(i||1).apply(function(o){return o%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(i,s,u){var d;d=e.isPlainObject(i)?i:{element:i,location:s,placement:u},this.element=d.element,this.style=d.element.style,this._init(d)},e.Overlay.prototype={_init:function(i){this.location=i.location,this.placement=void 0===i.placement?e.Placement.TOP_LEFT:i.placement,this.onDraw=i.onDraw,this.checkResize=void 0===i.checkResize||i.checkResize,this.width=void 0===i.width?null:i.width,this.height=void 0===i.height?null:i.height,this.rotationMode=i.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(i,s){var u=e.Placement.properties[this.placement];!u||(u.isHorizontallyCentered?i.x-=s.x/2:u.isRight&&(i.x-=s.x),u.isVerticallyCentered?i.y-=s.y/2:u.isBottom&&(i.y-=s.y))},destroy:function(){var i=this.element,s=this.style;i.parentNode&&(i.parentNode.removeChild(i),i.prevElementParent&&(s.display="none",document.body.appendChild(i))),this.onDraw=null,s.top="",s.left="",s.position="",null!==this.width&&(s.width=""),null!==this.height&&(s.height="");var u=e.getCssPropertyWithVendorPrefix("transformOrigin"),d=e.getCssPropertyWithVendorPrefix("transform");u&&d&&(s[u]="",s[d]="")},drawHTML:function(i,s){var u=this.element;u.parentNode!==i&&(u.prevElementParent=u.parentNode,u.prevNextSibling=u.nextSibling,i.appendChild(u),this.style.position="absolute",this.size=e.getElementSize(u));var d=this._getOverlayPositionAndSize(s),r=d.position,o=this.size=d.size,a=d.rotate;if(this.onDraw)this.onDraw(r,o,this.element);else{var p=this.style;p.left=r.x+"px",p.top=r.y+"px",null!==this.width&&(p.width=o.x+"px"),null!==this.height&&(p.height=o.y+"px");var y=e.getCssPropertyWithVendorPrefix("transformOrigin"),w=e.getCssPropertyWithVendorPrefix("transform");y&&w&&(a?(p[y]=this._getTransformOrigin(),p[w]="rotate("+a+"deg)"):(p[y]="",p[w]="")),p.display="block"}},_getOverlayPositionAndSize:function(i){var s=i.pixelFromPoint(this.location,!0),u=this._getSizeInPixels(i);this.adjust(s,u);var d=0;if(i.degrees&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var r=new e.Rect(s.x,s.y,u.x,u.y),o=this._getBoundingBox(r,i.degrees);s=o.getTopLeft(),u=o.getSize()}else d=i.degrees;return{position:s,size:u,rotate:d}},_getSizeInPixels:function(i){var s=this.size.x,u=this.size.y;if(null!==this.width||null!==this.height){var d=i.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);null!==this.width&&(s=d.x),null!==this.height&&(u=d.y)}if(this.checkResize&&(null===this.width||null===this.height)){var r=this.size=e.getElementSize(this.element);null===this.width&&(s=r.x),null===this.height&&(u=r.y)}return new e.Point(s,u)},_getBoundingBox:function(i,s){var u=this._getPlacementPoint(i);return i.rotate(s,u).getBoundingBox()},_getPlacementPoint:function(i){var s=new e.Point(i.x,i.y),u=e.Placement.properties[this.placement];return u&&(u.isHorizontallyCentered?s.x+=i.width/2:u.isRight&&(s.x+=i.width),u.isVerticallyCentered?s.y+=i.height/2:u.isBottom&&(s.y+=i.height)),s},_getTransformOrigin:function(){var i="",s=e.Placement.properties[this.placement];return s&&(s.isLeft?i="left":s.isRight&&(i="right"),s.isTop?i+=" top":s.isBottom&&(i+=" bottom")),i},update:function(i,s){var u=e.isPlainObject(i)?i:{location:i,placement:s};this._init({location:u.location||this.location,placement:void 0!==u.placement?u.placement:this.placement,onDraw:u.onDraw||this.onDraw,checkResize:u.checkResize||this.checkResize,width:void 0!==u.width?u.width:this.width,height:void 0!==u.height?u.height:this.height,rotationMode:u.rotationMode||this.rotationMode})},getBounds:function(i){e.console.assert(i,"A viewport must now be passed to Overlay.getBounds.");var s=this.width,u=this.height;if(null===s||null===u){var d=i.deltaPointsFromPixelsNoRotate(this.size,!0);null===s&&(s=d.x),null===u&&(u=d.y)}var r=this.location.clone();return this.adjust(r,new e.Point(s,u)),this._adjustBoundsForRotation(i,new e.Rect(r.x,r.y,s,u))},_adjustBoundsForRotation:function(i,s){if(!i||0===i.degrees||this.rotationMode===e.OverlayRotationMode.EXACT)return s;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return s;var u=this._getOverlayPositionAndSize(i);return i.viewerElementToViewportRectangle(new e.Rect(u.position.x,u.position.y,u.size.x,u.size.y))}return s.rotate(-i.degrees,this._getPlacementPoint(s))}}}(OpenSeadragon),function(e){e.Drawer=function(i){e.console.assert(i.viewer,"[Drawer] options.viewer is required");var s=arguments;if(e.isPlainObject(i)||(i={source:s[0],viewport:s[1],element:s[2]}),e.console.assert(i.viewport,"[Drawer] options.viewport is required"),e.console.assert(i.element,"[Drawer] options.element is required"),i.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=i.viewer,this.viewport=i.viewport,this.debugGridColor="string"==typeof i.debugGridColor?[i.debugGridColor]:i.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,i.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=e.getElement(i.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var u=this._calculateCanvasSize();this.canvas.width=u.x,this.canvas.height=u.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),e.setElementPointerEventsNone(this.canvas),e.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},e.Drawer.prototype={addOverlay:function(i,s,u,d){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(i,s,u,d),this},updateOverlay:function(i,s,u){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(i,s,u),this},removeOverlay:function(i){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(i),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(i){var s=this.viewport.pixelFromPointNoRotate(i,!0);return new e.Point(s.x*e.pixelDensityRatio,s.y*e.pixelDensityRatio)},clipWithPolygons:function(i,s){if(this.useCanvas){var u=this._getContext(s);u.beginPath(),i.forEach(function(d){d.forEach(function(r,o){u[0===o?"moveTo":"lineTo"](r.x,r.y)})}),u.clip()}},setOpacity:function(i){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var s=this.viewer.world,u=0;u<s.getItemCount();u++)s.getItemAt(u).setOpacity(i);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var i=this.viewer.world,s=0,u=0;u<i.getItemCount();u++){var d=i.getItemAt(u).getOpacity();d>s&&(s=d)}return s},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var i=this._calculateCanvasSize();if((this.canvas.width!==i.x||this.canvas.height!==i.y)&&(this.canvas.width=i.x,this.canvas.height=i.y,this._updateImageSmoothingEnabled(this.context),null!==this.sketchCanvas)){var s=this._calculateSketchCanvasSize();this.sketchCanvas.width=s.x,this.sketchCanvas.height=s.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(i,s){if(this.useCanvas){var u=this._getContext(i);if(s)u.clearRect(s.x,s.y,s.width,s.height);else{var d=u.canvas;u.clearRect(0,0,d.width,d.height)}}},viewportToDrawerRectangle:function(i){var s=this.viewport.pixelFromPointNoRotate(i.getTopLeft(),!0),u=this.viewport.deltaPixelsFromPointsNoRotate(i.getSize(),!0);return new e.Rect(s.x*e.pixelDensityRatio,s.y*e.pixelDensityRatio,u.x*e.pixelDensityRatio,u.y*e.pixelDensityRatio)},drawTile:function(i,s,u,d,r,o){if(e.console.assert(i,"[Drawer.drawTile] tile is required"),e.console.assert(s,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var a=this._getContext(u);i.drawCanvas(a,s,d=d||1,r,o)}else i.drawHTML(this.canvas)},_getContext:function(i){var s=this.context;if(i){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var u=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=u.x,this.sketchCanvas.height=u.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var d=this;this.viewer.addHandler("rotate",function r(){if(0!==d.viewport.getRotation()){d.viewer.removeHandler("rotate",r);var o=d._calculateSketchCanvasSize();d.sketchCanvas.width=o.x,d.sketchCanvas.height=o.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}s=this.sketchContext}return s},saveContext:function(i){!this.useCanvas||this._getContext(i).save()},restoreContext:function(i){!this.useCanvas||this._getContext(i).restore()},setClip:function(i,s){if(this.useCanvas){var u=this._getContext(s);u.beginPath(),u.rect(i.x,i.y,i.width,i.height),u.clip()}},drawRectangle:function(i,s,u){if(this.useCanvas){var d=this._getContext(u);d.save(),d.fillStyle=s,d.fillRect(i.x,i.y,i.width,i.height),d.restore()}},blendSketch:function(i,s,u,d){var r=i;if(e.isPlainObject(r)||(r={opacity:i,scale:s,translate:u,compositeOperation:d}),this.useCanvas&&this.sketchCanvas){i=r.opacity,d=r.compositeOperation;var o=r.bounds;if(this.context.save(),this.context.globalAlpha=i,d&&(this.context.globalCompositeOperation=d),o)o.x<0&&(o.width+=o.x,o.x=0),o.x+o.width>this.canvas.width&&(o.width=this.canvas.width-o.x),o.y<0&&(o.height+=o.y,o.y=0),o.y+o.height>this.canvas.height&&(o.height=this.canvas.height-o.y),this.context.drawImage(this.sketchCanvas,o.x,o.y,o.width,o.height,o.x,o.y,o.width,o.height);else{s=r.scale||1;var a=(u=r.translate)instanceof e.Point?u:new e.Point(0,0),p=0,y=0;if(u){var O=this.sketchCanvas.height-this.canvas.height;p=Math.round((this.sketchCanvas.width-this.canvas.width)/2),y=Math.round(O/2)}this.context.drawImage(this.sketchCanvas,a.x-p*s,a.y-y*s,(this.canvas.width+2*p)*s,(this.canvas.height+2*y)*s,-p,-y,this.canvas.width+2*p,this.canvas.height+2*y)}this.context.restore()}},drawDebugInfo:function(i,s,u,d){if(this.useCanvas){var r=this.viewer.world.getIndexOfItem(d)%this.debugGridColor.length,o=this.context;o.save(),o.lineWidth=2*e.pixelDensityRatio,o.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",o.strokeStyle=this.debugGridColor[r],o.fillStyle=this.debugGridColor[r],0!==this.viewport.degrees&&this._offsetForRotation({degrees:this.viewport.degrees}),d.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:d.getRotation(!0),point:d.viewport.pixelFromPointNoRotate(d._getRotationPoint(!0),!0)}),0===d.viewport.degrees&&d.getRotation(!0)%360==0&&d._drawer.viewer.viewport.getFlip()&&d._drawer._flip(),o.strokeRect(i.position.x*e.pixelDensityRatio,i.position.y*e.pixelDensityRatio,i.size.x*e.pixelDensityRatio,i.size.y*e.pixelDensityRatio);var a=(i.position.x+i.size.x/2)*e.pixelDensityRatio,p=(i.position.y+i.size.y/2)*e.pixelDensityRatio;o.translate(a,p),o.rotate(Math.PI/180*-this.viewport.degrees),o.translate(-a,-p),0===i.x&&0===i.y&&(o.fillText("Zoom: "+this.viewport.getZoom(),i.position.x*e.pixelDensityRatio,(i.position.y-30)*e.pixelDensityRatio),o.fillText("Pan: "+this.viewport.getBounds().toString(),i.position.x*e.pixelDensityRatio,(i.position.y-20)*e.pixelDensityRatio)),o.fillText("Level: "+i.level,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+20)*e.pixelDensityRatio),o.fillText("Column: "+i.x,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+30)*e.pixelDensityRatio),o.fillText("Row: "+i.y,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+40)*e.pixelDensityRatio),o.fillText("Order: "+u+" of "+s,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+50)*e.pixelDensityRatio),o.fillText("Size: "+i.size.toString(),(i.position.x+10)*e.pixelDensityRatio,(i.position.y+60)*e.pixelDensityRatio),o.fillText("Position: "+i.position.toString(),(i.position.x+10)*e.pixelDensityRatio,(i.position.y+70)*e.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),d.getRotation(!0)%360!=0&&this._restoreRotationChanges(),0===d.viewport.degrees&&d.getRotation(!0)%360==0&&d._drawer.viewer.viewport.getFlip()&&d._drawer._flip(),o.restore()}},debugRect:function(i){if(this.useCanvas){var s=this.context;s.save(),s.lineWidth=2*e.pixelDensityRatio,s.strokeStyle=this.debugGridColor[0],s.fillStyle=this.debugGridColor[0],s.strokeRect(i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio,i.width*e.pixelDensityRatio,i.height*e.pixelDensityRatio),s.restore()}},setImageSmoothingEnabled:function(i){this.useCanvas&&(this._imageSmoothingEnabled=i,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(i){i.msImageSmoothingEnabled=this._imageSmoothingEnabled,i.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(i){var s=this._getContext(i).canvas;return new e.Point(s.width,s.height)},getCanvasCenter:function(){return new e.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(i){var s=i.point?i.point.times(e.pixelDensityRatio):this.getCanvasCenter(),u=this._getContext(i.useSketch);u.save(),u.translate(s.x,s.y),this.viewer.viewport.flipped?(u.rotate(Math.PI/180*-i.degrees),u.scale(-1,1)):u.rotate(Math.PI/180*i.degrees),u.translate(-s.x,-s.y)},_flip:function(i){var s=(i=i||{}).point?i.point.times(e.pixelDensityRatio):this.getCanvasCenter(),u=this._getContext(i.useSketch);u.translate(s.x,0),u.scale(-1,1),u.translate(-s.x,0)},_restoreRotationChanges:function(i){this._getContext(i).restore()},_calculateCanvasSize:function(){var i=e.pixelDensityRatio,s=this.viewport.getContainerSize();return{x:Math.round(s.x*i),y:Math.round(s.y*i)}},_calculateSketchCanvasSize:function(){var i=this._calculateCanvasSize();if(0===this.viewport.getRotation())return i;var s=Math.ceil(Math.sqrt(i.x*i.x+i.y*i.y));return{x:s,y:s}}}}(OpenSeadragon),function(e){e.Viewport=function(i){var s=arguments;s.length&&s[0]instanceof e.Point&&(i={containerSize:s[0],contentSize:s[1],config:s[2]}),i.config&&(e.extend(!0,i,i.config),delete i.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},i.margins||{}),delete i.margins,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,degrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:e.DEFAULT_SETTINGS.silenceMultiImageWarnings},i),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={resetContentSize:function(i){return e.console.assert(i,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(i instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(i.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(i.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,i.y/i.x),i.x),this},setHomeBounds:function(i,s){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(i,s)},_setContentBounds:function(i,s){e.console.assert(i,"[Viewport._setContentBounds] bounds is required"),e.console.assert(i instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(i.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(i.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=i.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(s),this._contentBounds=i.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(s),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:s,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var i=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?i>=1?i:1:i>=1?1:i)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var i=this._contentBounds.getCenter(),s=1/this.getHomeZoom(),u=s/this.getAspectRatio();return new e.Rect(i.x-s/2,i.y-u/2,s,u)},goHome:function(i){return this.viewer&&this.viewer.raiseEvent("home",{immediately:i}),this.fitBounds(this.getHomeBounds(),i)},getMinZoom:function(){var i=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*i},getMaxZoom:function(){var i=this.maxZoomLevel;return i||(i=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,i/=this._contentBounds.width),Math.max(i,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(i){e.console.assert("object"===e.type(i),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},i),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(i){return this.getBoundsNoRotate(i).rotate(-this.getRotation())},getBoundsNoRotate:function(i){var s=this.getCenter(i),u=1/this.getZoom(i),d=u/this.getAspectRatio();return new e.Rect(s.x-u/2,s.y-d/2,u,d)},getBoundsWithMargins:function(i){return this.getBoundsNoRotateWithMargins(i).rotate(-this.getRotation(),this.getCenter(i))},getBoundsNoRotateWithMargins:function(i){var s=this.getBoundsNoRotate(i),u=this._containerInnerSize.x*this.getZoom(i);return s.x-=this._margins.left/u,s.y-=this._margins.top/u,s.width+=(this._margins.left+this._margins.right)/u,s.height+=(this._margins.top+this._margins.bottom)/u,s},getCenter:function(i){var d,r,o,a,p,O,s=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),u=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return i?s:this.zoomPoint?(d=this.pixelFromPoint(this.zoomPoint,!0),a=(o=1/(r=this.getZoom()))/this.getAspectRatio(),p=new e.Rect(s.x-o/2,s.y-a/2,o,a),O=this._pixelFromPoint(this.zoomPoint,p).minus(d).divide(this._containerInnerSize.x*r),u.plus(O)):u},getZoom:function(i){return i?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(i){return Math.max(Math.min(i,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(i){var s=new e.Rect(i.x,i.y,i.width,i.height);if(!this.wrapHorizontal){var u=this.visibilityRatio*s.width,o=this._contentBoundsNoRotate.x-(s.x+s.width)+u,a=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width-s.x-u;u>this._contentBoundsNoRotate.width?s.x+=(o+a)/2:a<0?s.x+=a:o>0&&(s.x+=o)}if(!this.wrapVertical){var p=this.visibilityRatio*s.height,O=this._contentBoundsNoRotate.y-(s.y+s.height)+p,R=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height-s.y-p;p>this._contentBoundsNoRotate.height?s.y+=(O+R)/2:R<0?s.y+=R:O>0&&(s.y+=O)}return s},_raiseConstraintsEvent:function(i){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:i})},applyConstraints:function(i){var s=this.getZoom(),u=this._applyZoomConstraints(s);s!==u&&this.zoomTo(u,this.zoomPoint,i);var d=this.getBoundsNoRotate(),r=this._applyBoundaryConstraints(d);return this._raiseConstraintsEvent(i),(d.x!==r.x||d.y!==r.y||i)&&this.fitBounds(r.rotate(-this.getRotation()),i),this},ensureVisible:function(i){return this.applyConstraints(i)},_fitBounds:function(i,s){var u=(s=s||{}).immediately||!1,d=s.constraints||!1,r=this.getAspectRatio(),o=i.getCenter(),a=new e.Rect(i.x,i.y,i.width,i.height,i.degrees+this.getRotation()).getBoundingBox();a.getAspectRatio()>=r?a.height=a.width/r:a.width=a.height*r,a.x=o.x-a.width/2,a.y=o.y-a.height/2;var p=1/a.width;if(d){var y=a.getAspectRatio(),w=this._applyZoomConstraints(p);p!==w&&(a.width=1/(p=w),a.x=o.x-a.width/2,a.height=a.width/y,a.y=o.y-a.height/2),o=(a=this._applyBoundaryConstraints(a)).getCenter(),this._raiseConstraintsEvent(u)}if(u)return this.panTo(o,!0),this.zoomTo(p,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var O=this.getBounds(),R=this.getZoom();if(0===R||Math.abs(p/R-1)<1e-8)return this.zoomTo(p,!0),this.panTo(o,u);var A=(a=a.rotate(-this.getRotation())).getTopLeft().times(p).minus(O.getTopLeft().times(R)).divide(p-R);return this.zoomTo(p,A,u)},fitBounds:function(i,s){return this._fitBounds(i,{immediately:s,constraints:!1})},fitBoundsWithConstraints:function(i,s){return this._fitBounds(i,{immediately:s,constraints:!0})},fitVertically:function(i){var s=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(s,i)},fitHorizontally:function(i){var s=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(s,i)},getConstrainedBounds:function(i){var s;return s=this.getBounds(i),this._applyBoundaryConstraints(s)},panBy:function(i,s){var u=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(u.plus(i),s)},panTo:function(i,s){return s?(this.centerSpringX.resetTo(i.x),this.centerSpringY.resetTo(i.y)):(this.centerSpringX.springTo(i.x),this.centerSpringY.springTo(i.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:i,immediately:s}),this},zoomBy:function(i,s,u){return this.zoomTo(this.zoomSpring.target.value*i,s,u)},zoomTo:function(i,s,u){var d=this;return this.zoomPoint=s instanceof e.Point&&!isNaN(s.x)&&!isNaN(s.y)?s:null,u?this._adjustCenterSpringsForZoomPoint(function(){d.zoomSpring.resetTo(i)}):this.zoomSpring.springTo(i),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:i,refPoint:s,immediately:u}),this},setRotation:function(i){return this.viewer&&this.viewer.drawer.canRotate()?(this.degrees=e.positiveModulo(i,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:i}),this):this},getRotation:function(){return this.degrees},resize:function(i,s){var u=this.getBoundsNoRotate(),d=u;return this.containerSize.x=i.x,this.containerSize.y=i.y,this._updateContainerInnerSize(),s&&(d.width=u.width*(i.x/this.containerSize.x),d.height=d.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:i,maintain:s}),this.fitBounds(d,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var i=this;this._adjustCenterSpringsForZoomPoint(function(){i.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var s=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,s},_adjustCenterSpringsForZoomPoint:function(i){if(this.zoomPoint){var s=this.pixelFromPoint(this.zoomPoint,!0);i();var d=this.pixelFromPoint(this.zoomPoint,!0).minus(s),r=this.deltaPointsFromPixels(d,!0);this.centerSpringX.shiftBy(r.x),this.centerSpringY.shiftBy(r.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else i()},deltaPixelsFromPointsNoRotate:function(i,s){return i.times(this._containerInnerSize.x*this.getZoom(s))},deltaPixelsFromPoints:function(i,s){return this.deltaPixelsFromPointsNoRotate(i.rotate(this.getRotation()),s)},deltaPointsFromPixelsNoRotate:function(i,s){return i.divide(this._containerInnerSize.x*this.getZoom(s))},deltaPointsFromPixels:function(i,s){return this.deltaPointsFromPixelsNoRotate(i,s).rotate(-this.getRotation())},pixelFromPointNoRotate:function(i,s){return this._pixelFromPointNoRotate(i,this.getBoundsNoRotate(s))},pixelFromPoint:function(i,s){return this._pixelFromPoint(i,this.getBoundsNoRotate(s))},_pixelFromPointNoRotate:function(i,s){return i.minus(s.getTopLeft()).times(this._containerInnerSize.x/s.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(i,s){return this._pixelFromPointNoRotate(i.rotate(this.getRotation(),this.getCenter(!0)),s)},pointFromPixelNoRotate:function(i,s){var u=this.getBoundsNoRotate(s);return i.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/u.width).plus(u.getTopLeft())},pointFromPixel:function(i,s){return this.pointFromPixelNoRotate(i,s).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(i,s){var u=this._contentBoundsNoRotate.width;return new e.Point(i*this._contentSizeNoRotate.x/u,s*this._contentSizeNoRotate.x/u)},viewportToImageCoordinates:function(i,s){if(i instanceof e.Point)return this.viewportToImageCoordinates(i.x,i.y);if(this.viewer){var u=this.viewer.world.getItemCount();if(u>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===u)return this.viewer.world.getItemAt(0).viewportToImageCoordinates(i,s,!0)}return this._viewportToImageDelta(i-this._contentBoundsNoRotate.x,s-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(i,s){var u=this._contentBoundsNoRotate.width;return new e.Point(i/this._contentSizeNoRotate.x*u,s/this._contentSizeNoRotate.x*u)},imageToViewportCoordinates:function(i,s){if(i instanceof e.Point)return this.imageToViewportCoordinates(i.x,i.y);if(this.viewer){var u=this.viewer.world.getItemCount();if(u>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===u)return this.viewer.world.getItemAt(0).imageToViewportCoordinates(i,s,!0)}var r=this._imageToViewportDelta(i,s);return r.x+=this._contentBoundsNoRotate.x,r.y+=this._contentBoundsNoRotate.y,r},imageToViewportRectangle:function(i,s,u,d){var r=i;if(r instanceof e.Rect||(r=new e.Rect(i,s,u,d)),this.viewer){var o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===o)return this.viewer.world.getItemAt(0).imageToViewportRectangle(i,s,u,d,!0)}var p=this.imageToViewportCoordinates(r.x,r.y),y=this._imageToViewportDelta(r.width,r.height);return new e.Rect(p.x,p.y,y.x,y.y,r.degrees)},viewportToImageRectangle:function(i,s,u,d){var r=i;if(r instanceof e.Rect||(r=new e.Rect(i,s,u,d)),this.viewer){var o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===o)return this.viewer.world.getItemAt(0).viewportToImageRectangle(i,s,u,d,!0)}var p=this.viewportToImageCoordinates(r.x,r.y),y=this._viewportToImageDelta(r.width,r.height);return new e.Rect(p.x,p.y,y.x,y.y,r.degrees)},viewerElementToImageCoordinates:function(i){var s=this.pointFromPixel(i,!0);return this.viewportToImageCoordinates(s)},imageToViewerElementCoordinates:function(i){var s=this.imageToViewportCoordinates(i);return this.pixelFromPoint(s,!0)},windowToImageCoordinates:function(i){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var s=i.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(s)},imageToWindowCoordinates:function(i){return e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(i).plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(i){return this.pointFromPixel(i,!0)},viewportToViewerElementCoordinates:function(i){return this.pixelFromPoint(i,!0)},viewerElementToViewportRectangle:function(i){return e.Rect.fromSummits(this.pointFromPixel(i.getTopLeft(),!0),this.pointFromPixel(i.getTopRight(),!0),this.pointFromPixel(i.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(i){return e.Rect.fromSummits(this.pixelFromPoint(i.getTopLeft(),!0),this.pixelFromPoint(i.getTopRight(),!0),this.pixelFromPoint(i.getBottomLeft(),!0))},windowToViewportCoordinates:function(i){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var s=i.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(s)},viewportToWindowCoordinates:function(i){return e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(i).plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(i){if(this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===s)return this.viewer.world.getItemAt(0).viewportToImageZoom(i)}return i*(this._containerInnerSize.x/this._contentSizeNoRotate.x*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(i){if(this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===s)return this.viewer.world.getItemAt(0).imageToViewportZoom(i)}return i*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(i){return this.flipped===i||(this.flipped=i,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:i})),this}}}(OpenSeadragon),function(e){e.TiledImage=function(r){var o=this;e.console.assert(r.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(r.drawer,"[TiledImage] options.drawer is required"),e.console.assert(r.viewer,"[TiledImage] options.viewer is required"),e.console.assert(r.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(r.source,"[TiledImage] options.source is required"),e.console.assert(!r.clip||r.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=r.tileCache,delete r.tileCache,this._drawer=r.drawer,delete r.drawer,this._imageLoader=r.imageLoader,delete r.imageLoader,r.clip instanceof e.Rect&&(this._clip=r.clip.clone()),delete r.clip;var a=r.x||0;delete r.x;var p=r.y||0;delete r.y,this.normHeight=r.source.dimensions.y/r.source.dimensions.x,this.contentAspectX=r.source.dimensions.x/r.source.dimensions.y;var y=1;r.width?(y=r.width,delete r.width,r.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete r.height)):r.height&&(y=r.height/this.normHeight,delete r.height);var w=r.fitBounds;delete r.fitBounds;var O=r.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete r.fitBoundsPlacement;var R=r.degrees||0;delete r.degrees,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:e.DEFAULT_SETTINGS.subPixelRoundingForTransparency},r),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:a,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:p,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:y,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:R,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),w&&this.fitBounds(w,O,!0),this._drawingHandler=function(A){o.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:o},A))}},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(r){r!==this._fullyLoaded&&(this._fullyLoaded=r,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var r=this._xSpring.update(),o=this._ySpring.update(),a=this._scaleSpring.update(),p=this._degreesSpring.update();return!!(r||o||a||p)&&(this._updateForScale(),this._needsDraw=!0,!0)},draw:function(){0!==this.opacity||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy()},getBounds:function(r){return this.getBoundsNoRotate(r).rotate(this.getRotation(r),this._getRotationPoint(r))},getBoundsNoRotate:function(r){return r?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(r){var o=this.getBoundsNoRotate(r);if(this._clip){var y=this._clip.times((r?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x);o=new e.Rect(o.x+y.x,o.y+y.y,y.width,y.height)}return o.rotate(this.getRotation(r),this._getRotationPoint(r))},getTileBounds:function(r,o,a){var p=this.source.getNumTiles(r),y=(p.x+o%p.x)%p.x,w=(p.y+a%p.y)%p.y,O=this.source.getTileBounds(r,y,w);return this.getFlip()&&(O.x=1-O.x-O.width),O.x+=(o-y)/p.x,O.y+=this._worldHeightCurrent/this._worldWidthCurrent*((a-w)/p.y),O},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var r=this.imageToWindowCoordinates(new e.Point(0,0)),o=this.imageToWindowCoordinates(this.getContentSize());return new e.Point(o.x-r.x,o.y-r.y)},_viewportToImageDelta:function(r,o,a){var p=a?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(r*(this.source.dimensions.x/p),o*(this.source.dimensions.y*this.contentAspectX/p))},viewportToImageCoordinates:function(r,o,a){var p;return r instanceof e.Point?(a=o,p=r):p=new e.Point(r,o),p=p.rotate(-this.getRotation(a),this._getRotationPoint(a)),a?this._viewportToImageDelta(p.x-this._xSpring.current.value,p.y-this._ySpring.current.value):this._viewportToImageDelta(p.x-this._xSpring.target.value,p.y-this._ySpring.target.value)},_imageToViewportDelta:function(r,o,a){var p=a?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(r/this.source.dimensions.x*p,o/this.source.dimensions.y/this.contentAspectX*p)},imageToViewportCoordinates:function(r,o,a){r instanceof e.Point&&(a=o,o=r.y,r=r.x);var p=this._imageToViewportDelta(r,o);return a?(p.x+=this._xSpring.current.value,p.y+=this._ySpring.current.value):(p.x+=this._xSpring.target.value,p.y+=this._ySpring.target.value),p.rotate(this.getRotation(a),this._getRotationPoint(a))},imageToViewportRectangle:function(r,o,a,p,y){var w=r;w instanceof e.Rect?y=o:w=new e.Rect(r,o,a,p);var O=this.imageToViewportCoordinates(w.getTopLeft(),y),R=this._imageToViewportDelta(w.width,w.height,y);return new e.Rect(O.x,O.y,R.x,R.y,w.degrees+this.getRotation(y))},viewportToImageRectangle:function(r,o,a,p,y){var w=r;r instanceof e.Rect?y=o:w=new e.Rect(r,o,a,p);var O=this.viewportToImageCoordinates(w.getTopLeft(),y),R=this._viewportToImageDelta(w.width,w.height,y);return new e.Rect(O.x,O.y,R.x,R.y,w.degrees-this.getRotation(y))},viewerElementToImageCoordinates:function(r){var o=this.viewport.pointFromPixel(r,!0);return this.viewportToImageCoordinates(o)},imageToViewerElementCoordinates:function(r){var o=this.imageToViewportCoordinates(r);return this.viewport.pixelFromPoint(o,!0)},windowToImageCoordinates:function(r){var o=r.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(o)},imageToWindowCoordinates:function(r){return this.imageToViewerElementCoordinates(r).plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(r){var o=this._scaleSpring.current.value;return r=r.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((r.x-this._xSpring.current.value)/o,(r.y-this._ySpring.current.value)/o,r.width/o,r.height/o,r.degrees)},viewportToImageZoom:function(r){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*r},imageToViewportZoom:function(r){return r/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(r,o){var a=this._xSpring.target.value===r.x&&this._ySpring.target.value===r.y;if(o){if(a&&this._xSpring.current.value===r.x&&this._ySpring.current.value===r.y)return;this._xSpring.resetTo(r.x),this._ySpring.resetTo(r.y),this._needsDraw=!0}else{if(a)return;this._xSpring.springTo(r.x),this._ySpring.springTo(r.y),this._needsDraw=!0}a||this._raiseBoundsChange()},setWidth:function(r,o){this._setScale(r,o)},setHeight:function(r,o){this._setScale(r/this.normHeight,o)},setCroppingPolygons:function(r){try{if(!e.isArray(r))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=r.map(function(p){return function(p){return p.map(function(y){try{if(function(p){return p instanceof e.Point||"number"==typeof p.x&&"number"==typeof p.y}(y))return{x:y.x,y:y.y};throw new Error}catch(w){throw new Error("A Provided cropping polygon point is not supported")}})}(p)})}catch(p){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(p),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(r,o,a){var p=e.Placement.properties[o=o||e.Placement.CENTER],y=this.contentAspectX,w=0,O=0,R=1,A=1;if(this._clip&&(y=this._clip.getAspectRatio(),R=this._clip.width/this.source.dimensions.x,A=this._clip.height/this.source.dimensions.y,r.getAspectRatio()>y?(w=this._clip.x/this._clip.height*r.height,O=this._clip.y/this._clip.height*r.height):(w=this._clip.x/this._clip.width*r.width,O=this._clip.y/this._clip.width*r.width)),r.getAspectRatio()>y){var C=r.height/A,_=0;p.isHorizontallyCentered?_=(r.width-r.height*y)/2:p.isRight&&(_=r.width-r.height*y),this.setPosition(new e.Point(r.x-w+_,r.y-O),a),this.setHeight(C,a)}else{var D=r.width/R,N=0;p.isVerticallyCentered?N=(r.height-r.width/y)/2:p.isBottom&&(N=r.height-r.width/y),this.setPosition(new e.Point(r.x-w,r.y-O+N),a),this.setWidth(D,a)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(r){e.console.assert(!r||r instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),this._clip=r instanceof e.Rect?r.clone():null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return!!this.flipped},setFlip:function(r){this.flipped=!!r,this._needsDraw=!0,this._raiseBoundsChange()},getOpacity:function(){return this.opacity},setOpacity:function(r){r!==this.opacity&&(this.opacity=r,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(r){this._preload=!!r,this._needsDraw=!0},getRotation:function(r){return r?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(r,o){this._degreesSpring.target.value===r&&this._degreesSpring.isAtTargetValue()||(o?this._degreesSpring.resetTo(r):this._degreesSpring.springTo(r),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(r){return this.getBoundsNoRotate(r).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(r){r!==this.compositeOperation&&(this.compositeOperation=r,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(r,o){var a=this._scaleSpring.target.value===r;if(o){if(a&&this._scaleSpring.current.value===r)return;this._scaleSpring.resetTo(r),this._updateForScale(),this._needsDraw=!0}else{if(a)return;this._scaleSpring.springTo(r),this._updateForScale(),this._needsDraw=!0}a||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var r=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),o=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,a=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(o/this.minPixelRatio)/Math.log(2))));return a=Math.max(a,this.source.minLevel||0),{lowestLevel:r=Math.min(r,a),highestLevel:a}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;)this.lastDrawn.pop().beingDrawn=!1;var o=this.viewport,a=this._viewportToTiledImageRectangle(o.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var p=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(a=a.intersection(p)))return}for(var y=this._getLevelsInterval(),w=y.lowestLevel,O=y.highestLevel,R=null,A=!1,C=e.now(),_=O;_>=w;_--){var D=!1,N=o.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(_),!0).x*this._scaleSpring.current.value;if(_===w||!A&&N>=this.minPixelRatio)D=!0,A=!0;else if(!A)continue;var Z=o.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(_),!1).x*this._scaleSpring.current.value,Y=o.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,re=this.immediateRender?1:Y,h=Math.min(1,(N-.5)/.5),ie=re/Math.abs(re-Z);if(R=this._updateLevel(A,D,_,h,ie,a,C,R),this._providesCoverage(this.coverage,_))break}this._drawTiles(this.lastDrawn),R&&!R.context2D?(this._loadTile(R,C),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(r,o,a){var p,y;this.wrapHorizontal?(p=e.positiveModulo(o.x,1),y=e.positiveModulo(a.x,1)):(p=Math.max(0,o.x),y=Math.min(1,a.x));var w,O,R=1/this.source.aspectRatio;this.wrapVertical?(w=e.positiveModulo(o.y,R),O=e.positiveModulo(a.y,R)):(w=Math.max(0,o.y),O=Math.min(R,a.y));var A=this.source.getTileAtPoint(r,new e.Point(p,w)),C=this.source.getTileAtPoint(r,new e.Point(y,O)),_=this.source.getNumTiles(r);return this.wrapHorizontal&&(A.x+=_.x*Math.floor(o.x),C.x+=_.x*Math.floor(a.x)),this.wrapVertical&&(A.y+=_.y*Math.floor(o.y/R),C.y+=_.y*Math.floor(a.y/R)),{topLeft:A,bottomRight:C}},_updateLevel:function(r,o,a,p,y,w,O,R){var A=w.getBoundingBox().getTopLeft(),C=w.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:r,level:a,opacity:p,visibility:y,drawArea:w,topleft:A,bottomright:C,currenttime:O,best:R}),this._resetCoverage(this.coverage,a),this._resetCoverage(this.loadingCoverage,a);var _=this._getCornerTiles(a,A,C),D=_.topLeft,N=_.bottomRight,Z=this.source.getNumTiles(a),Y=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(N.x+=1,this.wrapHorizontal||(N.x=Math.min(N.x,Z.x-1)));for(var re=D.x;re<=N.x;re++)for(var h=D.y;h<=N.y;h++){var ie;if(this.getFlip()){var ye=(Z.x+re%Z.x)%Z.x;ie=re+Z.x-ye-ye-1}else ie=re;null!==w.intersection(this.getTileBounds(a,ie,h))&&(R=this._updateTile(o,r,ie,h,a,p,y,Y,Z,O,R))}return R},_updateTile:function(r,o,a,p,y,w,O,R,A,C,_){var D=this._getTile(a,p,y,C,A,this._worldWidthCurrent,this._worldHeightCurrent),N=o;this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:D}),this._setCoverage(this.coverage,y,a,p,!1);var Z=D.loaded||D.loading||this._isCovered(this.loadingCoverage,y,a,p);if(this._setCoverage(this.loadingCoverage,y,a,p,Z),!D.exists||(r&&!N&&(this._isCovered(this.coverage,y,a,p)?this._setCoverage(this.coverage,y,a,p,!0):N=!0),!N))return _;if(this._positionTile(D,this.source.tileOverlap,this.viewport,R,O),!D.loaded)if(D.context2D)this._setTileLoaded(D);else{var Y=this._tileCache.getImageRecord(D.cacheKey);if(Y){var re=Y.getImage();this._setTileLoaded(D,re)}}return D.loaded?this._blendTile(D,a,p,y,w,C)&&(this._needsDraw=!0):D.loading?this._tilesLoading++:Z||(_=this._compareTiles(_,D)),_},_getTile:function(r,o,a,p,y,w,O){var R,A,C,_,D,N,Z,Y,re,h,ie=this.tilesMatrix,ye=this.source;return ie[a]||(ie[a]={}),ie[a][r]||(ie[a][r]={}),(!ie[a][r][o]||!ie[a][r][o].flipped!=!this.flipped)&&(R=(y.x+r%y.x)%y.x,A=(y.y+o%y.y)%y.y,C=this.getTileBounds(a,r,o),_=ye.getTileBounds(a,R,A,!0),D=ye.tileExists(a,R,A),N=ye.getTileUrl(a,R,A),Z=ye.getTilePostData(a,R,A),this.loadTilesWithAjax?(Y=ye.getTileAjaxHeaders(a,R,A),e.isPlainObject(this.ajaxHeaders)&&(Y=e.extend({},this.ajaxHeaders,Y))):Y=null,re=ye.getContext2D?ye.getContext2D(a,R,A):void 0,h=new e.Tile(a,r,o,C,D,N,re,this.loadTilesWithAjax,Y,_,Z,ye.getTileHashKey(a,R,A,N,Y,Z)),this.getFlip()?0===R&&(h.isRightMost=!0):R===y.x-1&&(h.isRightMost=!0),A===y.y-1&&(h.isBottomMost=!0),h.flipped=this.flipped,ie[a][r][o]=h),(h=ie[a][r][o]).lastTouchTime=p,h},_loadTile:function(r,o){var a=this;r.loading=!0,this._imageLoader.addJob({src:r.url,postData:r.postData,loadWithAjax:r.loadWithAjax,ajaxHeaders:r.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(p,y,w){a._onTileLoad(r,o,p,y,w)},abort:function(){r.loading=!1}})},_onTileLoad:function(r,o,a,p,y){if(!a)return e.console.error("Tile %s failed to load: %s - error: %s",r,r.url,p),this.viewer.raiseEvent("tile-load-failed",{tile:r,tiledImage:this,time:o,message:p,tileRequest:y}),r.loading=!1,void(r.exists=!1);if(o<this.lastResetTime)return e.console.warn("Ignoring tile %s loaded before reset: %s",r,r.url),void(r.loading=!1);var w=this,O=function(){var A=w.source.getClosestLevel();w._setTileLoaded(r,a,A,y)};this._midDraw?window.setTimeout(O,1):O()},_setTileLoaded:function(r,o,a,p){var y=0,w=this;function O(){return y++,R}function R(){0==--y&&(r.loading=!1,r.loaded=!0,r.context2D||w._tileCache.cacheTile({image:o,tile:r,cutoff:a,tiledImage:w}),w._needsDraw=!0)}this.viewer.raiseEvent("tile-loaded",{tile:r,tiledImage:this,tileRequest:p,image:o,getCompletionCallback:O}),O()()},_positionTile:function(r,o,a,p,y){var w=r.bounds.getTopLeft();w.x*=this._scaleSpring.current.value,w.y*=this._scaleSpring.current.value,w.x+=this._xSpring.current.value,w.y+=this._ySpring.current.value;var O=r.bounds.getSize();O.x*=this._scaleSpring.current.value,O.y*=this._scaleSpring.current.value;var R=a.pixelFromPointNoRotate(w,!0),A=a.pixelFromPointNoRotate(w,!1),C=a.deltaPixelsFromPointsNoRotate(O,!0),_=a.deltaPixelsFromPointsNoRotate(O,!1),D=A.plus(_.divide(2)),N=p.squaredDistanceTo(D);o||(C=C.plus(new e.Point(1,1))),r.isRightMost&&this.wrapHorizontal&&(C.x+=.75),r.isBottomMost&&this.wrapVertical&&(C.y+=.75),r.position=R,r.size=C,r.squaredDistance=N,r.visibility=y},_blendTile:function(r,o,a,p,y,w){var R,A,O=1e3*this.blendTime;if(r.blendStart||(r.blendStart=w),R=w-r.blendStart,A=O?Math.min(1,R/O):1,this.alwaysBlend&&(A*=y),r.opacity=A,this.lastDrawn.push(r),1===A)this._setCoverage(this.coverage,p,o,a,!0),this._hasOpaqueTile=!0;else if(R<O)return!0;return!1},_compareTiles:function(r,o){return!r||o.visibility>r.visibility||o.visibility===r.visibility&&o.squaredDistance<r.squaredDistance?o:r},_drawTiles:function(r){if(0!==this.opacity&&(0!==r.length||this.placeholderFillStyle)){var a,o=r[0];o&&(a=this.opacity<1||this.compositeOperation&&"source-over"!==this.compositeOperation||!this._isBottomItem()&&o._hasTransparencyChannel());var p,y,R,w=this.viewport.getZoom(!0),O=this.viewportToImageZoom(w);r.length>1&&O>this.smoothTileEdgesMinZoom&&!this.iOSDevice&&this.getRotation(!0)%360==0&&e.supportsCanvas&&this.viewer.useCanvas&&(a=!0,p=o.getScaleForEdgeSmoothing(),y=o.getTranslationForEdgeSmoothing(p,this._drawer.getCanvasSize(!1),this._drawer.getCanvasSize(!0))),a&&(p||(R=this.viewport.viewportToViewerElementRectangle(this.getClippedBounds(!0)).getIntegerBoundingBox(),this._drawer.viewer.viewport.getFlip()&&(0!==this.viewport.degrees||this.getRotation(!0)%360!=0)&&(R.x=this._drawer.viewer.container.clientWidth-(R.x+R.width)),R=R.times(e.pixelDensityRatio)),this._drawer._clear(!0,R)),p||(0!==this.viewport.degrees&&this._drawer._offsetForRotation({degrees:this.viewport.degrees,useSketch:a}),this.getRotation(!0)%360!=0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:a}),0===this.viewport.degrees&&this.getRotation(!0)%360==0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip());var A=!1;if(this._clip){this._drawer.saveContext(a);var C=this.imageToViewportRectangle(this._clip,!0);C=C.rotate(-this.getRotation(!0),this._getRotationPoint(!0));var _=this._drawer.viewportToDrawerRectangle(C);p&&(_=_.times(p)),y&&(_=_.translate(y)),this._drawer.setClip(_,a),A=!0}if(this._croppingPolygons){this._drawer.saveContext(a);try{var D=this._croppingPolygons.map(function(ye){return ye.map(function(Oe){var _e=this.imageToViewportCoordinates(Oe.x,Oe.y,!0).rotate(-this.getRotation(!0),this._getRotationPoint(!0)),Ue=this._drawer.viewportCoordToDrawerCoord(_e);return p&&(Ue=Ue.times(p)),Ue})});this._drawer.clipWithPolygons(D,a)}catch(ye){e.console.error(ye)}A=!0}if(this.placeholderFillStyle&&!1===this._hasOpaqueTile){var N=this._drawer.viewportToDrawerRectangle(this.getBounds(!0));p&&(N=N.times(p)),y&&(N=N.translate(y));var Z;Z="function"==typeof this.placeholderFillStyle?this.placeholderFillStyle(this,this._drawer.context):this.placeholderFillStyle,this._drawer.drawRectangle(N,Z,a)}var Y=function d(r){if("number"==typeof r)return u(r);if(!r||!e.Browser)return i;var o=r[e.Browser.vendor];return s(o)&&(o=r["*"]),u(o)}(this.subPixelRoundingForTransparency),re=!1;Y===e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS?re=!0:Y===e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&(re=!(this.viewer&&this.viewer.isAnimating()));for(var ie=r.length-1;ie>=0;ie--)this._drawer.drawTile(o=r[ie],this._drawingHandler,a,p,y,re),o.beingDrawn=!0,this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:this,tile:o});A&&this._drawer.restoreContext(a),p||(this.getRotation(!0)%360!=0&&this._drawer._restoreRotationChanges(a),0!==this.viewport.degrees&&this._drawer._restoreRotationChanges(a)),a&&(p&&(0!==this.viewport.degrees&&this._drawer._offsetForRotation({degrees:this.viewport.degrees,useSketch:!1}),this.getRotation(!0)%360!=0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:!1})),this._drawer.blendSketch({opacity:this.opacity,scale:p,translate:y,compositeOperation:this.compositeOperation,bounds:R}),p&&(this.getRotation(!0)%360!=0&&this._drawer._restoreRotationChanges(!1),0!==this.viewport.degrees&&this._drawer._restoreRotationChanges(!1))),p||0===this.viewport.degrees&&this.getRotation(!0)%360==0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip(),this._drawDebugInfo(r)}},_drawDebugInfo:function(r){if(this.debugMode)for(var o=r.length-1;o>=0;o--){var a=r[o];try{this._drawer.drawDebugInfo(a,r.length,o,this)}catch(p){e.console.error(p)}}},_providesCoverage:function(r,o,a,p){var y,w,O,R;if(!r[o])return!1;if(void 0===a||void 0===p){for(O in y=r[o])if(Object.prototype.hasOwnProperty.call(y,O))for(R in w=y[O])if(Object.prototype.hasOwnProperty.call(w,R)&&!w[R])return!1;return!0}return void 0===r[o][a]||void 0===r[o][a][p]||!0===r[o][a][p]},_isCovered:function(r,o,a,p){return void 0===a||void 0===p?this._providesCoverage(r,o+1):this._providesCoverage(r,o+1,2*a,2*p)&&this._providesCoverage(r,o+1,2*a,2*p+1)&&this._providesCoverage(r,o+1,2*a+1,2*p)&&this._providesCoverage(r,o+1,2*a+1,2*p+1)},_setCoverage:function(r,o,a,p,y){r[o]?(r[o][a]||(r[o][a]={}),r[o][a][p]=y):e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",o)},_resetCoverage:function(r,o){r[o]={}}});var i=e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function s(r){return r!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&r!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&r!==e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function u(r){return s(r)?i:r}}(OpenSeadragon),function(e){var i=function(u){e.console.assert(u,"[TileCache.cacheTile] options is required"),e.console.assert(u.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(u.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=u.tile,this.tiledImage=u.tiledImage},s=function(u){e.console.assert(u,"[ImageRecord] options is required"),e.console.assert(u.image,"[ImageRecord] options.image is required"),this._image=u.image,this._tiles=[]};s.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var u=document.createElement("canvas");u.width=this._image.width,u.height=this._image.height,this._renderedContext=u.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(u){e.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=u},addTile:function(u){e.console.assert(u,"[ImageRecord.addTile] tile is required"),this._tiles.push(u)},removeTile:function(u){for(var d=0;d<this._tiles.length;d++)if(this._tiles[d]===u)return void this._tiles.splice(d,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",u)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(u){this._maxImageCacheCount=(u=u||{}).maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(u){e.console.assert(u,"[TileCache.cacheTile] options is required"),e.console.assert(u.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(u.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(u.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var d=u.cutoff||0,r=this._tilesLoaded.length,o=this._imagesLoaded[u.tile.cacheKey];if(o||(e.console.assert(u.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),o=this._imagesLoaded[u.tile.cacheKey]=new s({image:u.image}),this._imagesLoadedCount++),o.addTile(u.tile),u.tile.cacheImageRecord=o,this._imagesLoadedCount>this._maxImageCacheCount){for(var w,O,A,_,a=null,p=-1,y=null,D=this._tilesLoaded.length-1;D>=0;D--)if(!((w=(_=this._tilesLoaded[D]).tile).level<=d||w.beingDrawn)){if(!a){a=w,p=D,y=_;continue}((A=w.lastTouchTime)<(O=a.lastTouchTime)||A===O&&w.level>a.level)&&(a=w,p=D,y=_)}a&&p>=0&&(this._unloadTile(y),r=p)}this._tilesLoaded[r]=new i({tile:u.tile,tiledImage:u.tiledImage})},clearTilesFor:function(u){e.console.assert(u,"[TileCache.clearTilesFor] tiledImage is required");for(var d,r=0;r<this._tilesLoaded.length;++r)(d=this._tilesLoaded[r]).tiledImage===u&&(this._unloadTile(d),this._tilesLoaded.splice(r,1),r--)},getImageRecord:function(u){return e.console.assert(u,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[u]},_unloadTile:function(u){e.console.assert(u,"[TileCache._unloadTile] tileRecord is required");var d=u.tile,r=u.tiledImage;d.unload(),d.cacheImageRecord=null;var o=this._imagesLoaded[d.cacheKey];o.removeTile(d),o.getTileCount()||(o.destroy(),delete this._imagesLoaded[d.cacheKey],this._imagesLoadedCount--),r.viewer.raiseEvent("tile-unloaded",{tile:d,tiledImage:r})}}}(OpenSeadragon),function(e){e.World=function(i){var s=this;e.console.assert(i.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=i.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(u){s._autoRefigureSizes?s._figureSizes():s._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(i,s){if(e.console.assert(i,"[World.addItem] item is required"),e.console.assert(i instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),void 0!==(s=s||{}).index){var u=Math.max(0,Math.min(this._items.length,s.index));this._items.splice(u,0,i)}else this._items.push(i);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,i.addHandler("bounds-change",this._delegatedFigureSizes),i.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:i})},getItemAt:function(i){return e.console.assert(void 0!==i,"[World.getItemAt] index is required"),this._items[i]},getIndexOfItem:function(i){return e.console.assert(i,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,i)},getItemCount:function(){return this._items.length},setItemIndex:function(i,s){e.console.assert(i,"[World.setItemIndex] item is required"),e.console.assert(void 0!==s,"[World.setItemIndex] index is required");var u=this.getIndexOfItem(i);if(s>=this._items.length)throw new Error("Index bigger than number of layers.");s===u||-1===u||(this._items.splice(u,1),this._items.splice(s,0,i),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:i,previousIndex:u,newIndex:s}))},removeItem:function(i){e.console.assert(i,"[World.removeItem] item is required");var s=e.indexOf(this._items,i);-1!==s&&(i.removeHandler("bounds-change",this._delegatedFigureSizes),i.removeHandler("clip-change",this._delegatedFigureSizes),i.destroy(),this._items.splice(s,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(i))},removeAll:function(){var i,s;for(this.viewer._cancelPendingImages(),s=0;s<this._items.length;s++)(i=this._items[s]).removeHandler("bounds-change",this._delegatedFigureSizes),i.removeHandler("clip-change",this._delegatedFigureSizes),i.destroy();var u=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,s=0;s<u.length;s++)this._raiseRemoveItem(i=u[s])},resetItems:function(){for(var i=0;i<this._items.length;i++)this._items[i].reset()},update:function(){for(var i=!1,s=0;s<this._items.length;s++)i=this._items[s].update()||i;return i},draw:function(){for(var i=0;i<this._items.length;i++)this._items[i].draw();this._needsDraw=!1},needsDraw:function(){for(var i=0;i<this._items.length;i++)if(this._items[i].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(i){this._autoRefigureSizes=i,i&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(i){var y,s=(i=i||{}).immediately||!1,u=i.layout||e.DEFAULT_SETTINGS.collectionLayout,r=i.columns||e.DEFAULT_SETTINGS.collectionColumns,o=i.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,p=o+(i.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin);y=!i.rows&&r?r:Math.ceil(this._items.length/(i.rows||e.DEFAULT_SETTINGS.collectionRows));var R,A,C,D,w=0,O=0;this.setAutoRefigureSizes(!1);for(var N=0;N<this._items.length;N++)N&&N%y==0&&("horizontal"===u?(O+=p,w=0):(w+=p,O=0)),A=(R=this._items[N]).getBounds(),D=new e.Point(w+(o-(C=A.width>A.height?o:o*(A.width/A.height)))/2,O+(o-C*(A.height/A.width))/2),R.setPosition(D,s),R.setWidth(C,s),"horizontal"===u?w+=p:O+=p;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var i=this._homeBounds?this._homeBounds.clone():null,s=this._contentSize?this._contentSize.clone():null,u=this._contentFactor||0;if(this._items.length){var d=this._items[0],r=d.getBounds();this._contentFactor=d.getContentSize().x/r.width;for(var o=d.getClippedBounds().getBoundingBox(),a=o.x,p=o.y,y=o.x+o.width,w=o.y+o.height,O=1;O<this._items.length;O++)r=(d=this._items[O]).getBounds(),this._contentFactor=Math.max(this._contentFactor,d.getContentSize().x/r.width),o=d.getClippedBounds().getBoundingBox(),a=Math.min(a,o.x),p=Math.min(p,o.y),y=Math.max(y,o.x+o.width),w=Math.max(w,o.y+o.height);this._homeBounds=new e.Rect(a,p,y-a,w-p),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;(this._contentFactor!==u||!this._homeBounds.equals(i)||!this._contentSize.equals(s))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(i){this.raiseEvent("remove-item",{item:i})}})}(OpenSeadragon);var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(e){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,u={},d={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function _(D){return D instanceof r?new r(D.type,_(D.content),D.alias):Array.isArray(D)?D.map(_):D.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(_){return Object.prototype.toString.call(_).slice(8,-1)},objId:function(_){return _.__id||Object.defineProperty(_,"__id",{value:++s}),_.__id},clone:function _(D,N){var Z,Y;switch(N=N||{},d.util.type(D)){case"Object":if(Y=d.util.objId(D),N[Y])return N[Y];for(var re in N[Y]=Z={},D)D.hasOwnProperty(re)&&(Z[re]=_(D[re],N));return Z;case"Array":return Y=d.util.objId(D),N[Y]?N[Y]:(N[Y]=Z=[],D.forEach(function(h,ie){Z[ie]=_(h,N)}),Z);default:return D}},getLanguage:function(_){for(;_;){var D=i.exec(_.className);if(D)return D[1].toLowerCase();_=_.parentElement}return"none"},setLanguage:function(_,D){_.className=_.className.replace(RegExp(i,"gi"),""),_.classList.add("language-"+D)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(Z){var _=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Z.stack)||[])[1];if(_){var D=document.getElementsByTagName("script");for(var N in D)if(D[N].src==_)return D[N]}return null}},isActive:function(_,D,N){for(var Z="no-"+D;_;){var Y=_.classList;if(Y.contains(D))return!0;if(Y.contains(Z))return!1;_=_.parentElement}return!!N}},languages:{plain:u,plaintext:u,text:u,txt:u,extend:function(_,D){var N=d.util.clone(d.languages[_]);for(var Z in D)N[Z]=D[Z];return N},insertBefore:function(_,D,N,Z){var Y=(Z=Z||d.languages)[_],re={};for(var h in Y)if(Y.hasOwnProperty(h)){if(h==D)for(var ie in N)N.hasOwnProperty(ie)&&(re[ie]=N[ie]);N.hasOwnProperty(h)||(re[h]=Y[h])}var ye=Z[_];return Z[_]=re,d.languages.DFS(d.languages,function(Oe,_e){_e===ye&&Oe!=_&&(this[Oe]=re)}),re},DFS:function _(D,N,Z,Y){Y=Y||{};var re=d.util.objId;for(var h in D)if(D.hasOwnProperty(h)){N.call(D,h,D[h],Z||h);var ie=D[h],ye=d.util.type(ie);"Object"!==ye||Y[re(ie)]?"Array"===ye&&!Y[re(ie)]&&(Y[re(ie)]=!0,_(ie,N,h,Y)):(Y[re(ie)]=!0,_(ie,N,null,Y))}}},plugins:{},highlightAll:function(_,D){d.highlightAllUnder(document,_,D)},highlightAllUnder:function(_,D,N){var Z={callback:N,container:_,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};d.hooks.run("before-highlightall",Z),Z.elements=Array.prototype.slice.apply(Z.container.querySelectorAll(Z.selector)),d.hooks.run("before-all-elements-highlight",Z);for(var re,Y=0;re=Z.elements[Y++];)d.highlightElement(re,!0===D,Z.callback)},highlightElement:function(_,D,N){var Z=d.util.getLanguage(_),Y=d.languages[Z];d.util.setLanguage(_,Z);var re=_.parentElement;re&&"pre"===re.nodeName.toLowerCase()&&d.util.setLanguage(re,Z);var ie={element:_,language:Z,grammar:Y,code:_.textContent};function ye(_e){ie.highlightedCode=_e,d.hooks.run("before-insert",ie),ie.element.innerHTML=ie.highlightedCode,d.hooks.run("after-highlight",ie),d.hooks.run("complete",ie),N&&N.call(ie.element)}if(d.hooks.run("before-sanity-check",ie),(re=ie.element.parentElement)&&"pre"===re.nodeName.toLowerCase()&&!re.hasAttribute("tabindex")&&re.setAttribute("tabindex","0"),!ie.code)return d.hooks.run("complete",ie),void(N&&N.call(ie.element));if(d.hooks.run("before-highlight",ie),ie.grammar)if(D&&e.Worker){var Oe=new Worker(d.filename);Oe.onmessage=function(_e){ye(_e.data)},Oe.postMessage(JSON.stringify({language:ie.language,code:ie.code,immediateClose:!0}))}else ye(d.highlight(ie.code,ie.grammar,ie.language));else ye(d.util.encode(ie.code))},highlight:function(_,D,N){var Z={code:_,grammar:D,language:N};if(d.hooks.run("before-tokenize",Z),!Z.grammar)throw new Error('The language "'+Z.language+'" has no grammar.');return Z.tokens=d.tokenize(Z.code,Z.grammar),d.hooks.run("after-tokenize",Z),r.stringify(d.util.encode(Z.tokens),Z.language)},tokenize:function(_,D){var N=D.rest;if(N){for(var Z in N)D[Z]=N[Z];delete D.rest}var Y=new p;return y(Y,Y.head,_),a(_,Y,D,Y.head,0),function O(_){for(var D=[],N=_.head.next;N!==_.tail;)D.push(N.value),N=N.next;return D}(Y)},hooks:{all:{},add:function(_,D){var N=d.hooks.all;N[_]=N[_]||[],N[_].push(D)},run:function(_,D){var N=d.hooks.all[_];if(N&&N.length)for(var Y,Z=0;Y=N[Z++];)Y(D)}},Token:r};function r(_,D,N,Z){this.type=_,this.content=D,this.alias=N,this.length=0|(Z||"").length}function o(_,D,N,Z){_.lastIndex=D;var Y=_.exec(N);if(Y&&Z&&Y[1]){var re=Y[1].length;Y.index+=re,Y[0]=Y[0].slice(re)}return Y}function a(_,D,N,Z,Y,re){for(var h in N)if(N.hasOwnProperty(h)&&N[h]){var ie=N[h];ie=Array.isArray(ie)?ie:[ie];for(var ye=0;ye<ie.length;++ye){if(re&&re.cause==h+","+ye)return;var Oe=ie[ye],_e=Oe.inside,Ue=!!Oe.lookbehind,qe=!!Oe.greedy,nt=Oe.alias;if(qe&&!Oe.pattern.global){var Bt=Oe.pattern.toString().match(/[imsuy]*$/)[0];Oe.pattern=RegExp(Oe.pattern.source,Bt+"g")}for(var ft=Oe.pattern||Oe,Ve=Z.next,ut=Y;Ve!==D.tail&&!(re&&ut>=re.reach);ut+=Ve.value.length,Ve=Ve.next){var Dt=Ve.value;if(D.length>_.length)return;if(!(Dt instanceof r)){var rt,xe=1;if(qe){if(!(rt=o(ft,ut,_,Ue))||rt.index>=_.length)break;var yt=rt.index,jt=rt.index+rt[0].length,Pt=ut;for(Pt+=Ve.value.length;yt>=Pt;)Pt+=(Ve=Ve.next).value.length;if(ut=Pt-=Ve.value.length,Ve.value instanceof r)continue;for(var Lt=Ve;Lt!==D.tail&&(Pt<jt||"string"==typeof Lt.value);Lt=Lt.next)xe++,Pt+=Lt.value.length;xe--,Dt=_.slice(ut,Pt),rt.index-=ut}else if(!(rt=o(ft,0,Dt,Ue)))continue;var Mt=rt[0],Ht=Dt.slice(0,yt=rt.index),Et=Dt.slice(yt+Mt.length),oi=ut+Dt.length;re&&oi>re.reach&&(re.reach=oi);var Ft=Ve.prev;if(Ht&&(Ft=y(D,Ft,Ht),ut+=Ht.length),w(D,Ft,xe),Ve=y(D,Ft,new r(h,_e?d.tokenize(Mt,_e):Mt,nt,Mt)),Et&&y(D,Ve,Et),xe>1){var wt={cause:h+","+ye,reach:oi};a(_,D,N,Ve.prev,ut,wt),re&&wt.reach>re.reach&&(re.reach=wt.reach)}}}}}}function p(){var _={value:null,prev:null,next:null},D={value:null,prev:_,next:null};_.next=D,this.head=_,this.tail=D,this.length=0}function y(_,D,N){var Z=D.next,Y={value:N,prev:D,next:Z};return D.next=Y,Z.prev=Y,_.length++,Y}function w(_,D,N){for(var Z=D.next,Y=0;Y<N&&Z!==_.tail;Y++)Z=Z.next;D.next=Z,Z.prev=D,_.length-=Y}if(e.Prism=d,r.stringify=function _(D,N){if("string"==typeof D)return D;if(Array.isArray(D)){var Z="";return D.forEach(function(ye){Z+=_(ye,N)}),Z}var Y={type:D.type,content:_(D.content,N),tag:"span",classes:["token",D.type],attributes:{},language:N},re=D.alias;re&&(Array.isArray(re)?Array.prototype.push.apply(Y.classes,re):Y.classes.push(re)),d.hooks.run("wrap",Y);var h="";for(var ie in Y.attributes)h+=" "+ie+'="'+(Y.attributes[ie]||"").replace(/"/g,"&quot;")+'"';return"<"+Y.tag+' class="'+Y.classes.join(" ")+'"'+h+">"+Y.content+"</"+Y.tag+">"},!e.document)return e.addEventListener&&(d.disableWorkerMessageHandler||e.addEventListener("message",function(_){var D=JSON.parse(_.data),N=D.language,Y=D.immediateClose;e.postMessage(d.highlight(D.code,d.languages[N],N)),Y&&e.close()},!1)),d;var R=d.util.currentScript();function A(){d.manual||d.highlightAll()}if(R&&(d.filename=R.src,R.hasAttribute("data-manual")&&(d.manual=!0)),!d.manual){var C=document.readyState;"loading"===C||"interactive"===C&&R&&R.defer?document.addEventListener("DOMContentLoaded",A):window.requestAnimationFrame?window.requestAnimationFrame(A):window.setTimeout(A,16)}return d}(_self);"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism),Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(i,s){var u={};u["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[s]},u.cdata=/^<!\[CDATA\[|\]\]>$/i;var d={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:u}};d["language-"+s]={pattern:/[\s\S]+/,inside:Prism.languages[s]};var r={};r[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:d},Prism.languages.insertBefore("markup","cdata",r)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,i){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:Prism.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml,function(e){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var s=e.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(Prism),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism.languages.js=Prism.languages.javascript,function(){if(void 0!==Prism&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var u={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},d="data-src-status",r="loading",o="loaded",p="pre[data-src]:not(["+d+'="'+o+'"]):not(['+d+'="'+r+'"])';Prism.hooks.add("before-highlightall",function(R){R.selector+=", "+p}),Prism.hooks.add("before-sanity-check",function(R){var A=R.element;if(A.matches(p)){R.code="",A.setAttribute(d,r);var C=A.appendChild(document.createElement("CODE"));C.textContent="Loading\u2026";var _=A.getAttribute("data-src"),D=R.language;if("none"===D){var N=(/\.(\w+)$/.exec(_)||[,"none"])[1];D=u[N]||N}Prism.util.setLanguage(C,D),Prism.util.setLanguage(A,D);var Z=Prism.plugins.autoloader;Z&&Z.loadLanguages(D),function y(R,A,C){var _=new XMLHttpRequest;_.open("GET",R,!0),_.onreadystatechange=function(){4==_.readyState&&(_.status<400&&_.responseText?A(_.responseText):C(_.status>=400?function(R,A){return"\u2716 Error "+R+" while fetching file: "+A}(_.status,_.statusText):"\u2716 Error: File does not exist or is empty"))},_.send(null)}(_,function(Y){A.setAttribute(d,o);var re=function w(R){var A=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(R||"");if(A){var C=Number(A[1]),D=A[3];return A[2]?D?[C,Number(D)]:[C,void 0]:[C,C]}}(A.getAttribute("data-range"));if(re){var h=Y.split(/\r\n?|\n/g),ie=re[0],ye=null==re[1]?h.length:re[1];ie<0&&(ie+=h.length),ie=Math.max(0,Math.min(ie-1,h.length)),ye<0&&(ye+=h.length),ye=Math.max(0,Math.min(ye,h.length)),Y=h.slice(ie,ye).join("\n"),A.hasAttribute("data-start")||A.setAttribute("data-start",String(ie+1))}C.textContent=Y,Prism.highlightElement(C)},function(Y){A.setAttribute(d,"failed"),C.textContent=Y})}}),Prism.plugins.fileHighlight={highlight:function(A){for(var D,C=(A||document).querySelectorAll(p),_=0;D=C[_++];)Prism.highlightElement(D)}};var O=!1;Prism.fileHighlight=function(){O||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),O=!0),Prism.plugins.fileHighlight.highlight.apply(this,arguments)}}}();